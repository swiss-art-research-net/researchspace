<div class="inline-form-switch">
  <semantic-form-switch for="[[for_kp]]" 
                        switch-on-field="participant_has_domain_type" 
                        label="[[subjectLabel]]">

    <semantic-form-switch-case label="Event">
      <semantic-form-composite-input  for="[[for_kp]]" 
                                      new-subject-template="/PC11_had_participant/{{{{raw}}}}{{UUID}}{{{{/raw}}}}" 
                                      fields='[[fieldDefinitions
                                                  classtype="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
                                                  participant_has_domain_type="http://www.researchspace.org/pattern/system/participant/has_domain_type"
                                                  participant_has_range_type="http://www.researchspace.org/pattern/system/participant/has_range_type"
                                                  participant_event="http://www.researchspace.org/pattern/system/participant/event"
                                                  participant_role="http://www.researchspace.org/pattern/system/participant/role"
                                              ]]'>

          <semantic-form-hidden-input for="classtype" default-value='http://www.cidoc-crm.org/cidoc-crm/PC11_had_participant'> </semantic-form-hidden-input>
          
          <semantic-form-hidden-input for="participant_has_domain_type" 
                                      default-value='http://www.researchspace.org/resource/PC11_had_participant/has_domain_type/event'>
          </semantic-form-hidden-input>

          <semantic-form-hidden-input for="participant_has_range_type" 
                                      default-value='[[had_participant_has_range_type_value]]'> 
          </semantic-form-hidden-input>

          <div class="form-inline-inputs">
            <div style="flex: 1;">
              <semantic-form-select-input for='participant_event' 
                                          label="Event" 
                                          render-header="false"
                                          placeholder="Select event" 
                                          nested-form-template='{{{{raw}}}}{{> forms:Event nested=true editable=true mode="new" }}{{{{/raw}}}}'> 
              </semantic-form-select-input>
            </div>
            <div style="flex: 1;">
              <semantic-form-tree-picker-input  for="participant_role" 
                                                label="Role" 
                                                render-header="false"
                                                placeholder="Select role"
                                                close-dropdown-on-selection='true'
                                                tree-patterns='{"scheme": "<http://www.researchspace.org/resource/vocab/actor_role>", 
                                                                "schemePattern": "?item <http://www.cidoc-crm.org/cidoc-crm/P71i_is_listed_in> <http://www.researchspace.org/resource/vocab/actor_role>",
                                                                "relationPattern": "?item crm:P127_has_broader_term ?parent"}'

                                                scheme-page-button-config='{"iri": "http://www.researchspace.org/resource/ThinkingFrames",
                                                                            "view": "authority-list",
                                                                            "scheme": "http://www.researchspace.org/resource/vocab/actor_role",
                                                                            "tooltip": "Open list of roles"
                                                                          }'
                                                
                                                nested-form-template='{{{{raw}}}}{{> forms:Type nested=true editable=true mode="new"
                                                                                      scheme="http://www.researchspace.org/resource/vocab/actor_role"
                                                                                      entityType="role" }}{{{{/raw}}}}'

                                                query-item-label='SELECT ?label WHERE {
                                                                    ?item skos:prefLabel ?label .
                                                }'>
              </semantic-form-tree-picker-input>
            </div>
          </div>
      </semantic-form-composite-input>
    </semantic-form-switch-case>

    <semantic-form-switch-case label="Activity">
      <semantic-form-composite-input  for="[[for_kp]]" 
                                      new-subject-template="/PC11_had_participant/{{{{raw}}}}{{UUID}}{{{{/raw}}}}" 
                                      fields='[[fieldDefinitions
                                                  classtype="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
                                                  participant_has_domain_type="http://www.researchspace.org/pattern/system/participant/has_domain_type"
                                                  participant_has_range_type="http://www.researchspace.org/pattern/system/participant/has_range_type"
                                                  participant_activity="http://www.researchspace.org/pattern/system/participant/activity"
                                                  participant_role="http://www.researchspace.org/pattern/system/participant/role"
                                              ]]'>

          <semantic-form-hidden-input for="classtype" default-value='http://www.cidoc-crm.org/cidoc-crm/PC11_had_participant'> </semantic-form-hidden-input>
          <semantic-form-hidden-input for="participant_has_domain_type" 
                                      default-value='http://www.researchspace.org/resource/PC11_had_participant/has_domain_type/activity'> 
          </semantic-form-hidden-input>
          <semantic-form-hidden-input for="participant_has_range_type" 
                                      default-value='[[had_participant_has_range_type_value]]'> 
          </semantic-form-hidden-input>

          <div class="form-inline-inputs">
            <div style="flex: 1;">
              <semantic-form-select-input for='participant_activity' 
                                          label="Activity" 
                                          render-header="false"
                                          placeholder="Select activity" 
                                          nested-form-template='{{{{raw}}}}{{> forms:Activity nested=true editable=true mode="new" }}{{{{/raw}}}}'> 
              </semantic-form-select-input>
            </div>
            <div style="flex: 1;">
              <semantic-form-tree-picker-input  for="participant_role" 
                                                label="Role" 
                                                render-header="false"
                                                placeholder="Select role"
                                                close-dropdown-on-selection='true'
                                                tree-patterns='{"scheme": "<http://www.researchspace.org/resource/vocab/actor_role>", 
                                                                "schemePattern": "?item <http://www.cidoc-crm.org/cidoc-crm/P71i_is_listed_in> <http://www.researchspace.org/resource/vocab/actor_role>",
                                                                "relationPattern": "?item crm:P127_has_broader_term ?parent"}'

                                                scheme-page-button-config='{"iri": "http://www.researchspace.org/resource/ThinkingFrames",
                                                                            "view": "authority-list",
                                                                            "scheme": "http://www.researchspace.org/resource/vocab/actor_role",
                                                                            "tooltip": "Open list of roles"
                                                                          }'
                                                
                                                nested-form-template='{{{{raw}}}}{{> forms:Type nested=true editable=true mode="new"
                                                                                      scheme="http://www.researchspace.org/resource/vocab/actor_role"
                                                                                      entityType="role" }}{{{{/raw}}}}'

                                                query-item-label='SELECT ?label WHERE {
                                                                    ?item skos:prefLabel ?label .
                                                }'>
              </semantic-form-tree-picker-input>
            </div>
          </div>
      </semantic-form-composite-input>
    </semantic-form-switch-case>
    
  </semantic-form-switch>
</div>
            