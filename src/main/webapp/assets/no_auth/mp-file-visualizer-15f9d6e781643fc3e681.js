(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1239:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(11),a=i(1),n=i(34),s=i(56),o=i(23),l=i(1211),c=i(631),p=i(327),m=i(1219),u=["image/gif","image/jpeg","image/bmp","image/png","image/webp","image/svg+xml","image/x-icon"],f=function(e){function FileVisualizer(t,i){var r=e.call(this,t,i)||this;return r.cancellation=new n.Cancellation,r.state={progress:void 0},r}return r.__extends(FileVisualizer,e),FileVisualizer.prototype.getFileManager=function(){var e=this.context.semanticContext.repository;return new l.FileManager({repository:e})},FileVisualizer.prototype.componentDidMount=function(){this.fetchResource()},FileVisualizer.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},FileVisualizer.prototype.componentWillReceiveProps=function(e){e.iri!==this.props.iri&&this.fetchResource(e)},FileVisualizer.prototype.fetchResource=function(e){var t=this;(e=e||this.props).iri&&this.cancellation.map(this.getFileManager().getFileResource(o.Rdf.iri(e.iri),{namePredicateIri:this.props.namePredicateIri,mediaTypePredicateIri:this.props.mediaTypePredicateIri})).observe({value:function(e){t.setState({resource:e})},error:function(e){t.setState({alertState:{alert:c.AlertType.WARNING,message:"Failed to fetch resource ("+e+")."},progress:null})}})},FileVisualizer.prototype.render=function(){var e,t=this.props.iri,i=this.state.resource;i?e=-1!==u.indexOf(i.mediaType)?this.renderImageContent(i):this.renderFileContent(i):this.state.alertState?e=this.renderError():t&&(e=this.renderEmptyContent());return a.createElement("div",{className:m.FileVisualizer+" "+(this.props.className?this.props.className:""),style:this.props.style,title:this.props.title||"Download file"},e)},FileVisualizer.prototype.renderImageContent=function(e){var t=l.FileManager.getFileUrl(e.fileName,this.props.storage);return a.createElement("a",{className:m.uploadedImageDepiction,href:t},a.createElement("img",{src:t}))},FileVisualizer.prototype.renderFileContent=function(e){var t=getFileIcon(e.mediaType),i=l.FileManager.getFileUrl(e.fileName,this.props.storage);return a.createElement("a",{key:"resource-iri",href:i,className:m.fileIcon},a.createElement("i",{className:t,"aria-hidden":"true"}))},FileVisualizer.prototype.renderEmptyContent=function(){return a.createElement("div",{className:m.emptyBody},a.createElement(p.Spinner,{className:m.spinner}))},FileVisualizer.prototype.renderError=function(){return a.createElement("div",{className:m.emptyBody},"Error",a.createElement("div",{className:m.alertComponent},a.createElement(c.Alert,r.__assign({},this.state.alertState))))},FileVisualizer}(s.Component);function getFileIcon(e){switch(e){case"image/jpeg":case"image/jpg":case"image/svg+xml":case"image/tiff":case"image/bmp":case"image/png":return"fa fa-file-image-o";case"application/pdf":return"fa fa-file-pdf-o";case"application/xml":return"fa fa-file-excel-o";case"text/plain":return"fa fa-file-text";case"text/html":return"fa fa-file-text-o";case"video/mpeg":case"video/mp4":case"video/ogg":case"video/quicktime":case"video/webm":case"video/x-ms-wmv":case"video/x-flv":case"video/3gpp":case"video/3gpp2":return"fa fa-film";default:return"fa fa-file"}}t.FileVisualizer=f,t.default=f,t.getFileIcon=getFileIcon}}]);
//# sourceMappingURL=mp-file-visualizer-15f9d6e781643fc3e681.js.map