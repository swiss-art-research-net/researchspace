{"version":3,"sources":["webpack:///./src/main/web/components/semantic/graph/layouts/GridLayout.ts"],"names":["component","registerCytoscapeLayout","identity","mapOptions","api","options","has","sortBy","sort","positionBy","x","y","xFn","maybe","fromNullable","map","getNumberValueForProperty","getOrElse","Nothing","yFn","element","row","undefined","col","factory","createFactory"],"mappings":"iIAmBA,YACA,QACA,UACA,OAEA,UACA,UAUa,EAAAA,UAAY,EAAAC,wBAAwB,OAAQ,EAAAC,UAIzD,SAASC,WAAWC,EAAmBC,GACrC,GAAI,EAAAC,IAAID,EAAS,UAAW,CAC1B,IAAME,EAASF,EAAgB,OAC/BA,EAAc,KAAI,EAAAG,KAAKD,IAErB,EAAAD,IAAID,EAAS,gBAAkB,EAAAC,IAAID,EAAS,kBAC9CA,EAAkB,SAStB,SAASI,WAAWC,EAAuBC,GACzC,IAAMC,EAAMC,EAAMC,aAAaJ,GAAGK,IAAI,EAAAC,2BAA2BC,UAAUJ,EAAMK,SAC3EC,EAAMN,EAAMC,aAAaH,GAAGI,IAAI,EAAAC,2BAA2BC,UAAUJ,EAAMK,SACjF,OAAO,SAAUE,GACf,MAAO,CACLC,IAAKT,EAAIQ,GAASH,eAAUK,GAC5BC,IAAKJ,EAAIC,GAASH,eAAUK,KAfRb,CAAWJ,EAAqB,YAAGA,EAAqB,cAGhF,OAAOA,KAZI,EAAAmB,QAAU,EAAAC,cAAc,EAAAzB,WACrC,UAAe,EAAAA","file":"semantic-graph-layout-grid-d3bb6cded3525adf4f44.js","sourcesContent":["/**\n * ResearchSpace\n * Copyright (C) 2020, Â© Trustees of the British Museum\n * Copyright (C) 2015-2019, metaphacts GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as maybe from 'data.maybe';\nimport { has } from 'lodash';\nimport { identity } from 'core.lambda';\nimport { createFactory } from 'react';\n\nimport { registerCytoscapeLayout, CytoscapeApi } from '../api/Api';\nimport { sort, getNumberValueForProperty } from '../api/LayoutHelpers';\n\n/**\n * Register built-in cytoscape grid layout.\n *\n * @example\n *   <graph-layout-grid></graph-layout-grid>\n *\n * @see http://js.cytoscape.org/#layouts/grid\n */\nexport const component = registerCytoscapeLayout('grid', identity, mapOptions);\nexport const factory = createFactory(component);\nexport default component;\n\nfunction mapOptions(api: CytoscapeApi, options: Cy.LayoutOptions): Cy.LayoutOptions {\n  if (has(options, 'sortBy')) {\n    const sortBy = options['sortBy'];\n    options['sort'] = sort(sortBy);\n  }\n  if (has(options, 'positionRow') || has(options, 'positionCol')) {\n    options['position'] = positionBy(options['positionRow'], options['positionCol']);\n  }\n\n  return options;\n}\n\n/**\n * Transform position properties to position function required by the layout.\n */\nfunction positionBy(x: string | undefined, y: string | undefined) {\n  const xFn = maybe.fromNullable(x).map(getNumberValueForProperty).getOrElse(maybe.Nothing);\n  const yFn = maybe.fromNullable(y).map(getNumberValueForProperty).getOrElse(maybe.Nothing);\n  return function (element: Cy.CollectionFirstNode): { row: number; col: number } {\n    return {\n      row: xFn(element).getOrElse(undefined),\n      col: yFn(element).getOrElse(undefined),\n    };\n  };\n}\n"],"sourceRoot":""}