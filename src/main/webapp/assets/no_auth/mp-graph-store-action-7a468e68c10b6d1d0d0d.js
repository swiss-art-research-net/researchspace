(window.webpackJsonp=window.webpackJsonp||[]).push([[355],{1383:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(1),a=r(35),s=r(16),o=r(10),p=r(7),c=r(72),l=r(56),h=r(23),d=r(63),u=r(61),f=r(1264),g=r(116),m=r(327),y=r(117),v=i.createFactory(c.Button),b=i.createFactory(c.ButtonToolbar);r(1384);var k="mp-rdf-graph-action",G=function(e){function GraphActionLink(t,r){var n=e.call(this,t,r)||this;return n.onClick=function(){if(!n.state.isInProcess)if("DELETE"===n.props.action){var onHide_1=function(){return y.getOverlaySystem().hide("confirm-graph-deleting")};y.getOverlaySystem().show("confirm-graph-deleting",i.createElement(y.OverlayDialog,{show:!0,title:"Delete graph",bsSize:"lg",onHide:onHide_1,children:a.div({style:{textAlign:"center"}},a.p({},'Are you sure that you want to delete the named graph "'+n.props.graphuri+'"?'),a.p({},"Please note that for larger named graphs (> 1 million statements), the deletion may typically take a few seconds (or even minutes) to be finally processed by the database."),b({style:{display:"inline-block"}},v({bsStyle:"success",onClick:function(){onHide_1(),n.deleteGraph()}},"Yes"),v({bsStyle:"danger",onClick:onHide_1},"No")))}))}else if("GET"===n.props.action){var e=n.context.semanticContext.repository,t=u.SparqlUtil.getMimeType(n.props.fileEnding),r=n.props.fileEnding&&s.endsWith(n.props.graphuri,n.props.fileEnding)?"":n.props.fileEnding,p=s.startsWith(n.props.graphuri,"file:///")?n.props.graphuri.replace("file:///","")+r:"graph-export-"+o().format("YYYY-MM-DDTHH-mm-ss")+"."+r;f.RDFGraphStoreService.downloadGraph({targetGraph:h.Rdf.iri(n.props.graphuri),acceptHeader:t,fileName:p,repository:e}).onValue((function(e){}))}},n.state={isInProcess:!1},n}return n.__extends(GraphActionLink,e),GraphActionLink.prototype.render=function(){return a.span({className:p(this.props.className,k),onClick:this.onClick},this.state.isInProcess?a.div({className:k+"__spinner-wrap"},i.createElement(m.Spinner,{spinnerDelay:0,className:k+"__spinner"}),a.span({className:k+"__hide"},this.props.children)):this.props.children)},GraphActionLink.prototype.deleteGraph=function(){var e=this;this.setState({isInProcess:!0}),g.addNotification({level:"info",message:"The delete command has been executed and is currently being processed by the database"});var t=this.context.semanticContext.repository;f.RDFGraphStoreService.deleteGraph({targetGraph:h.Rdf.iri(this.props.graphuri),repository:t}).onValue((function(e){return d.refresh()})).onError((function(t){e.setState({isInProcess:!1}),g.addNotification({level:"error",message:t})}))},GraphActionLink}(l.Component);t.GraphActionLink=G,t.default=G}}]);
//# sourceMappingURL=mp-graph-store-action-7a468e68c10b6d1d0d0d.js.map