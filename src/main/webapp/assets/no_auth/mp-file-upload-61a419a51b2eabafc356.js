(window.webpackJsonp=window.webpackJsonp||[]).push([[353],{1387:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=r(11),s=r(1),n=r(16),i=r(33),a=r(19),p=r(72),l=r(63),c=r(23),u=r(1265),d=r(631),g=r(1654),h=function(e){function FileUpload(t,r){var o=e.call(this,t,r)||this;return o.performPostAction=function(e){o.props.postAction&&"reload"!==o.props.postAction?"redirect"===o.props.postAction?l.navigateToResource(e).onValue((function(e){return e})):l.navigateToResource(c.Rdf.iri(o.props.postAction)).onValue((function(e){return e})):l.refresh()},o.state={alertState:i.Nothing(),progress:i.Nothing(),progressText:i.Nothing(),showOptions:!1},o}return o.__extends(FileUpload,e),FileUpload.prototype.componentDidMount=function(){var e=this;this.messages=a.pool(),this.messages.onValue((function(t){var r=e.state.alertState.isJust?e.state.alertState.get().message:"";e.setState({alertState:i.Just({alert:d.AlertType.WARNING,message:r+t})})}))},FileUpload.prototype.onDrop=function(e){var t=this;this.setState({alertState:i.Nothing(),progress:i.Nothing()});var r=e[0],o=n.isEmpty(this.props)||n.isEmpty(this.props.contentType)?u.FileUploadService.getMimeType(r):this.props.contentType;u.FileUploadService.uploadFile({createResourceQuery:this.props.createResourceQuery,generateIdQuery:this.props.generateIdQuery,storage:this.props.storage,metadataExtractor:this.props.metadataExtractor,contextUri:this.props.contextUri,file:r,contentType:o,onProgress:function(e){return t.setState({progress:i.Just(e),progressText:i.Just("Uploading ...")})}}).onValue(this.performPostAction).onError((function(e){return t.messages.plug(a.constant("File: "+r.name+" failed ("+e+").<br/>"))}))},FileUpload.prototype.render=function(){var e=this,t=n.isEmpty(this.props)||n.isEmpty(this.props.description)?"Please drag&drop your image file(s) here.":this.props.description;return s.createElement("div",{style:{width:"50%"}},this.state.alertState.map((function(e){return s.createElement(d.Alert,o.__assign({},e))})).getOrElse(null),this.state.progress.map((function(t){return s.createElement(p.ProgressBar,{active:!0,min:0,max:100,now:t,label:e.state.progressText.getOrElse("Uploading Files")})})).getOrElse(null),s.createElement(g.Dropzone,{onDrop:this.onDrop.bind(this)},s.createElement("div",{className:"text-center"},t)))},FileUpload}(s.Component);t.FileUpload=h,t.default=h}}]);
//# sourceMappingURL=mp-file-upload-61a419a51b2eabafc356.js.map