(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{2225:function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var t=i(16),n=i(2224),a=i(33),o=i(61),s=i(223),c=i(1606),u=function(){function Serializer(){var e=this;this.serializeConjunct=function(r){if(r.kind===c.ConjunctKinds.Relation)return{relation:{range:e.compactIRI(r.range.iri),relation:e.compactIRI(r.relation.iri),disjuncts:r.disjuncts.map(e.serializeRelationDisjunct)},uniqueId:r.uniqueId};if(r.kind===c.ConjunctKinds.Text)return{text:{range:e.compactIRI(r.range.iri),disjuncts:r.disjuncts.map((function(e){return e.value}))},uniqueId:r.uniqueId};throw new Error("Unknown conjunct kind")},this.serializeRelationDisjunct=function(r){var i="Resource"===r.kind?e.serializeResource(r.value):s.serialize(r.value);return[r.kind,i]}}return Serializer.prototype.serializeState=function(e){return{search:e.search?this.serializeSearch(e.search):void 0,facet:e.facet?this.serializeFacet(e.facet):void 0,result:e.result?s.serialize(e.result):void 0,datasets:e.datasets?s.serialize(e.datasets):void 0,alignment:e.alignment?s.serialize(e.alignment):void 0,graphScopeSearch:e.graphScopeSearch?s.serialize(e.graphScopeSearch):void 0}},Serializer.prototype.serializeSearch=function(e){return{domain:this.compactIRI(e.domain.iri),conjuncts:e.conjuncts.map(this.serializeConjunct)}},Serializer.prototype.serializeFacet=function(e){return e.conjuncts.map(this.serializeConjunct)},Serializer.prototype.serializeResource=function(e){return s.serialize(e)},Serializer.prototype.compactIRI=function(e){return o.SparqlUtil.compactIriUsingPrefix(e)},Serializer}();r.Serializer=u;var l=function(){function Deserializer(e){var r=this;this.store=e,this.deserializeConjunct=function(e,i,t){if(e.relation){if(!(n=e.relation.disjuncts)||!Array.isArray(n))throw new Error("Invalid disjuncts for serialized relation conjunct");return{uniqueId:e.uniqueId,kind:c.ConjunctKinds.Relation,relation:r.deserializeRelation({iri:e.relation.relation,domain:t,range:e.relation.range}),range:r.deserializeCategory(e.relation.range),conjunctIndex:[i],disjuncts:n.map((function(e,t){return r.deserializeRelationDisjunct(e,[i,t])}))}}if(e.text){var n;if(!(n=e.text.disjuncts)||!Array.isArray(n))throw new Error("Invalid disjuncts for serialized text conjunct");return{uniqueId:e.uniqueId,kind:c.ConjunctKinds.Text,range:r.deserializeCategory(e.text.range),conjunctIndex:[i],disjuncts:n.map((function(e,t){return r.deserializeTextDisjunct(e,[i,t])}))}}throw new Error("Invalid serialized conjunct")}}return Deserializer.prototype.deserializeState=function(e){if(!e||"object"!=typeof e||!e.search)return{search:void 0,facet:void 0,result:{},datasets:[],alignment:a.Nothing(),graphScopeSearch:e.graphScopeSearch?s.deserialize(e.graphScopeSearch):a.Nothing()};var r=e.result?s.deserialize(e.result):void 0;return{search:this.deserializeSearch(e.search),facet:this.deserializeFacet(e.facet,e.search.domain),result:r||{},datasets:e.datasets?s.deserialize(e.datasets):[],alignment:e.alignment?s.deserialize(e.alignment):a.Nothing(),graphScopeSearch:e.graphScopeSearch?s.deserialize(e.graphScopeSearch):a.Nothing()}},Deserializer.prototype.deserializeSearch=function(e){var r=this;return{domain:this.deserializeCategory(e.domain),conjuncts:e.conjuncts.map((function(i,t){return r.deserializeConjunct(i,t,e.domain)}))}},Deserializer.prototype.deserializeFacet=function(e,r){var i=this;if(e)return{conjuncts:e.map((function(e,t){var n=i.deserializeConjunct(e,t,r);if(n.kind!==c.ConjunctKinds.Relation)throw new Error("Unexpected conjunct kind for facet: "+n.kind);return n}))}},Deserializer.prototype.deserializeRelationDisjunct=function(e,r){if(!e||!Array.isArray(e)||2!==e.length)throw new Error("Invalid serialized relation disjunct");var i=e[0],t=e[1];return{kind:i,value:"Resource"===i?this.deserializeResource(t):s.deserialize(t),disjunctIndex:r}},Deserializer.prototype.deserializeTextDisjunct=function(e,r){if("string"!=typeof e)throw new Error("Invalid serialized text disjunct");return{kind:c.TextDisjunctKind,value:e,disjunctIndex:r}},Deserializer.prototype.deserializeCategory=function(e){if(!e)throw new Error("Category IRI cannot be empty");var r=this.expandIri(e),i=this.store.categories.get(r);if(!i)throw new Error("Category not found: "+r);return i},Deserializer.prototype.deserializeRelation=function(e){var r=e.iri,i=e.domain,t=e.range;if(!r)throw new Error("Relation IRI cannot be empty");var n=this.expandIri(r),a=this.expandIri(i),o=this.expandIri(t),s=this.store.relations.get(c.RelationKey.key({iri:n,domain:a,range:o}));if(!s)throw new Error("Relation not found: "+n);return s},Deserializer.prototype.deserializeResource=function(e){return s.deserialize(e)},Deserializer.prototype.expandIri=function(e){return o.SparqlUtil.resolveIris([e])[0]},Deserializer}();r.Deserializer=l;var d={search:"s",facet:"f",type:"t",domain:"do",range:"ra",relation:"re",text:"te",conjuncts:"c",disjuncts:"d","#type":"T","#value":"V"},p=t.invert(d);function deepMapObject(e,r){if(void 0===e&&null===e)return e;if(Array.isArray(e))return e.map((function(e){return deepMapObject(e,r)}));if("object"==typeof e){for(var i={},t=0,n=Object.keys(e);t<n.length;t++){var a=n[t],o=e[a],s=r(a,o,(function(e){return deepMapObject(e,r)}));s&&(i[s.key]=s.value)}return i}return e}function packState(e){return deepMapObject(e,(function(e,r,i){return{key:e.startsWith("@")||e in p?"@"+e:d[e]||e,value:i(r)}}))}r.packState=packState,r.unpackState=function unpackState(e){return deepMapObject(e,(function(e,r,i){return{key:e.startsWith("@")?e.substring(1):p[e]||e,value:i(r)}}))},r.serializeSearch=function serializeSearch(e,r,i,t,a,o){var s=packState((new u).serializeState({search:e,facet:r,result:i,datasets:t,alignment:a,graphScopeSearch:o})),c=JSON.stringify(s);return n.compressToEncodedURIComponent(c)}}}]);
//# sourceMappingURL=default~semantic-search~semantic-search-action-save-search-result-30925c38200ac431592b.js.map