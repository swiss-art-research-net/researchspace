(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{2241:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),n=a(1),l=a(35),i=a(72),u=a(635),o=n.createFactory(i.Row),s=n.createFactory(i.Col);t.CLASS_NAME="field-editor";var d=u(t.CLASS_NAME),p=function(e){function FieldEditorRow(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggle=function(e){var a=e.expand;t.props.expanded!==a&&(a&&t.props.onExpand?t.props.onExpand():!a&&t.props.onCollapse&&t.props.onCollapse())},t}return r.__extends(FieldEditorRow,e),FieldEditorRow.prototype.componentDidMount=function(){this.props.expandOnMount&&this.toggle({expand:!0})},FieldEditorRow.prototype.componentWillReceiveProps=function(e){!this.props.expandOnMount&&e.expandOnMount&&this.toggle({expand:!0})},FieldEditorRow.prototype.render=function(){var e=this,t=this.props,a=t.onCollapse,r=t.expanded,u=t.label,p=t.error,c=this.props.element||this.props.children,f=r&&a;return o({className:d("row").toString()},s({md:3,onClick:function(){return e.toggle({expand:!0})}},l.span({},u)),s({md:f?8:9},o({},r?c:l.i({className:d("expand").toString(),onClick:function(){return e.toggle({expand:!0})}},"Click to add an optional "+u+".")),p?o({className:d("error").toString()},p.message):null),s({md:1,style:{display:f?void 0:"none"}},n.createElement(i.Button,{className:d("collapse").toString(),bsSize:"sm",onClick:function(){return e.toggle({expand:!1})}},l.span({className:"fa fa-times"}))))},FieldEditorRow}(n.Component);t.FieldEditorRow=p,t.default=n.createFactory(p)},2971:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r,n=a(16),l=a(33),i=a(141),u=a(1237),o=a(23),s=o.vocabularies.sp,d=o.vocabularies.field,p=o.vocabularies.rdf,c=o.vocabularies.rdfs,f=o.vocabularies.xsd,v=o.vocabularies.VocabPlatform;!function(e){function asValue(e){return"string"==typeof e?{value:e}:void 0}e.wrap=function wrap(e){return"simple"===e.type?{type:"simple",schemePattern:asValue(e.schemePattern),relationPattern:asValue(e.relationPattern)}:{type:"full",rootsQuery:asValue(e.rootsQuery),childrenQuery:asValue(e.childrenQuery),parentsQuery:asValue(e.parentsQuery),searchQuery:asValue(e.searchQuery)}},e.unwrap=function unwrap(e){if("simple"===e.type){var t=e.schemePattern,a=e.relationPattern;return{type:"simple",schemePattern:t?t.value:void 0,relationPattern:a?a.value:void 0}}var r=e.rootsQuery,n=e.childrenQuery,l=e.parentsQuery,i=e.searchQuery;return{type:"full",rootsQuery:r.value,childrenQuery:n.value,parentsQuery:l.value,searchQuery:i.value}}}(r=t.ValidatedTreeConfig||(t.ValidatedTreeConfig={})),t.createFieldDefinitionGraph=function createFieldDefinitionGraph(e){e.id;var t=e.label,a=e.description,r=e.domain,l=e.xsdDatatype,i=e.range,u=e.min,m=e.max,g=e.order,y=e.defaultValues,h=e.testSubject,b=e.selectPattern,E=e.insertPattern,S=e.deletePattern,P=e.askPattern,C=e.valueSetPattern,x=e.autosuggestionPattern,R=e.categories,_=e.treePatterns,Q=new Array,T=o.Rdf.iri("");Q.push(o.Rdf.triple(T,p.type,d.Field)),t.forEach((function(e){return Q.push(o.Rdf.triple(T,c.label,e))})),a&&a.length>0&&Q.push(o.Rdf.triple(T,c.comment,o.Rdf.literal(a,f._string)));var V=o.Rdf.bnode();Q.push(o.Rdf.triple(T,d.insert_pattern,V)),Q.push(o.Rdf.triple(V,p.type,s.Query)),Q.push(o.Rdf.triple(V,s.text,o.Rdf.literal(E,f._string)));for(var L=0,F=r;L<F.length;L++){var I=F[L];Q.push(o.Rdf.triple(T,d.domain,o.Rdf.iri(I)))}l&&Q.push(o.Rdf.triple(T,d.xsd_datatype,o.Rdf.iri(l)));for(var N=0,A=i;N<A.length;N++){I=A[N];Q.push(o.Rdf.triple(T,d.range,o.Rdf.iri(I)))}u&&Q.push(o.Rdf.triple(T,d.min_occurs,o.Rdf.literal(u,f._string))),m&&Q.push(o.Rdf.triple(T,d.max_occurs,o.Rdf.literal(m,f._string))),g&&Q.push(o.Rdf.triple(T,d.order,o.Rdf.literal(g,f._string)));for(var q=0,w=y;q<w.length;q++){I=w[q];Q.push(o.Rdf.triple(T,d.default_value,o.Rdf.literal(I,f._string)))}if(R&&!n.isEmpty(R)&&n.forEach(R,(function(e){return Q.push(o.Rdf.triple(T,d.category,e))})),b&&b.length>0){var D=o.Rdf.bnode();Q.push(o.Rdf.triple(T,d.select_pattern,D)),Q.push(o.Rdf.triple(D,p.type,s.Query)),Q.push(o.Rdf.triple(D,s.text,o.Rdf.literal(b,f._string)))}if(P&&P.length>0){var O=o.Rdf.bnode();Q.push(o.Rdf.triple(T,d.ask_pattern,O)),Q.push(o.Rdf.triple(O,p.type,s.Query)),Q.push(o.Rdf.triple(O,s.text,o.Rdf.literal(P,f._string)))}if(S&&S.length>0){var M=o.Rdf.bnode();Q.push(o.Rdf.triple(T,d.delete_pattern,M)),Q.push(o.Rdf.triple(M,p.type,s.Query)),Q.push(o.Rdf.triple(M,s.text,o.Rdf.literal(S,f._string)))}if(C&&C.length>0){var j=o.Rdf.bnode();Q.push(o.Rdf.triple(T,d.valueset_pattern,j)),Q.push(o.Rdf.triple(j,p.type,s.Query)),Q.push(o.Rdf.triple(j,s.text,o.Rdf.literal(C,f._string)))}if(x&&x.length>0){var k=o.Rdf.bnode();Q.push(o.Rdf.triple(T,d.autosuggestion_pattern,k)),Q.push(o.Rdf.triple(k,p.type,s.Query)),Q.push(o.Rdf.triple(k,s.text,o.Rdf.literal(x,f._string)))}if(h&&Q.push(o.Rdf.triple(T,d.testsubject,o.Rdf.iri(h))),_){var J=JSON.stringify(_,null,2);Q.push(o.Rdf.triple(T,d.tree_patterns,o.Rdf.literal(J,v.SyntheticJsonDatatype)))}return o.Rdf.graph(Q)},t.getFieldDefitionState=function getFieldDefitionState(e){var createValue=function(e){return{value:e}};return u.getFieldDefinitionProp(e).map((function(t){var a=i.ConfigHolder.getUIConfig().preferredLanguages,n=[];void 0!==t.label&&("string"==typeof t.label?n.push({value:createValue(t.label),lang:""}):t.label.forEach((function(e){var t=e.value,a=e.language;return n.push({value:createValue(t),lang:a})}))),n.sort((function(e,t){return a.indexOf(e.lang)-a.indexOf(t.lang)}));var u=[],o=[];return"string"==typeof t.domain?u=[createValue(t.domain)]:Array.isArray(t.domain)&&(u=t.domain.map(createValue)),"string"==typeof t.range?o=[createValue(t.range)]:Array.isArray(t.range)&&(o=t.range.map(createValue)),{isLoading:!1,id:l.fromNullable(e.value).map(createValue),label:n,description:l.fromNullable(t.description).map(createValue),categories:t.categories,domain:u,xsdDatatype:l.fromNullable(t.xsdDatatype).map(createValue),range:o,min:l.fromNullable(t.minOccurs).map(createValue),max:l.fromNullable(t.maxOccurs).map(createValue),order:l.fromNullable(t.order).map(createValue),defaults:t.defaultValues.map(createValue),testSubject:l.fromNullable(t.testSubject).map(createValue),insertPattern:l.fromNullable(t.insertPattern).map(createValue),selectPattern:l.fromNullable(t.selectPattern).map(createValue),askPattern:l.fromNullable(t.askPattern).map(createValue),deletePattern:l.fromNullable(t.deletePattern).map(createValue),valueSetPattern:l.fromNullable(t.valueSetPattern).map(createValue),autosuggestionPattern:l.fromNullable(t.autosuggestionPattern).map(createValue),treePatterns:l.fromNullable(t.treePatterns).map(r.wrap)}}))},t.unwrapState=function unwrapState(e){var t=e.id,a=e.label,l=e.description,i=e.categories,u=e.domain,s=e.xsdDatatype,d=e.range,p=e.min,c=e.max,f=e.order,v=e.defaults,m=e.testSubject,g=e.selectPattern,y=e.insertPattern,h=e.deletePattern,b=e.askPattern,E=e.valueSetPattern,S=e.autosuggestionPattern,P=e.treePatterns,C={id:t,description:l,xsdDatatype:s,min:p,max:c,order:f,testSubject:m,selectPattern:g,insertPattern:y,deletePattern:h,askPattern:b,valueSetPattern:E,autosuggestionPattern:S},x=n.mapValues(C,(function(e){return e.map((function(e){return e.value})).getOrElse(void 0)}));return x.label=a.map((function(e){var t=e.value,a=e.lang;return a.length?o.Rdf.langLiteral(t.value,a):o.Rdf.literal(t.value)})),x.categories=i,x.domain=u.map((function(e){return e.value})),x.range=d.map((function(e){return e.value})),x.defaultValues=v.map((function(e){return e.value})),x.treePatterns=P.map(r.unwrap).getOrElse(void 0),x}},2972:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),n=a(1),l=a(1),i=a(1953),u=a(1581),o=a(2241),s="tree-patterns-editor",d=function(e){function TreePatternsEditor(){var t=null!==e&&e.apply(this,arguments)||this;return t.fullConfigDefaults=u.createDefaultTreeQueries(),t.changeConfigType=function(e){var a,r=e.currentTarget.value;if("simple"===r)a={type:r};else{var n=u.createDefaultTreeQueries();a={type:"full",rootsQuery:{value:n.rootsQuery},childrenQuery:{value:n.childrenQuery},parentsQuery:{value:n.parentsQuery},searchQuery:{value:n.searchQuery}}}t.props.onChange(a)},t}return r.__extends(TreePatternsEditor,e),TreePatternsEditor.prototype.render=function(){var e=this.props.config;return n.createElement("div",{className:s},n.createElement(o.FieldEditorRow,{label:"type",expanded:!0},n.createElement("label",{className:"tree-patterns-editor__type-switch"},n.createElement("input",{type:"radio",value:"simple",checked:"simple"===e.type,onChange:this.changeConfigType})," ","Simple"),n.createElement("label",{className:"tree-patterns-editor__type-switch"},n.createElement("input",{type:"radio",value:"full",checked:"full"===e.type,onChange:this.changeConfigType})," Full")),"simple"===e.type?this.renderSimpleEditor(e):this.renderFullEditor(e))},TreePatternsEditor.prototype.renderSimpleEditor=function(e){var t=this;return n.createElement("div",{key:"simple",className:s+"__simple-config"},n.createElement(o.FieldEditorRow,{label:"scheme pattern",expanded:Boolean(e.schemePattern),onExpand:function(){return t.changeConfig(e,{schemePattern:{value:u.DefaultLightweightPatterns.schemePattern}})},onCollapse:function(){return t.changeConfig(e,{schemePattern:void 0})},error:e.schemePattern?e.schemePattern.error:void 0},n.createElement(i.SparqlEditor,{syntaxErrorCheck:!1,query:e.schemePattern?e.schemePattern.value:"",onChange:function(a){return t.changeConfig(e,{schemePattern:{value:a.value}})}})),n.createElement(o.FieldEditorRow,{label:"relation pattern",expanded:Boolean(e.relationPattern),onExpand:function(){return t.changeConfig(e,{relationPattern:{value:u.DefaultLightweightPatterns.relationPattern}})},onCollapse:function(){return t.changeConfig(e,{relationPattern:void 0})},error:e.relationPattern?e.relationPattern.error:void 0},n.createElement(i.SparqlEditor,{syntaxErrorCheck:!1,query:e.relationPattern?e.relationPattern.value:"",onChange:function(a){return t.changeConfig(e,{relationPattern:{value:a.value}})}})))},TreePatternsEditor.prototype.renderFullEditor=function(e){return n.createElement("div",{key:"full",className:s+"__full-config"},this.renderFullQuery(e,"rootsQuery","roots query"),this.renderFullQuery(e,"childrenQuery","children query"),this.renderFullQuery(e,"parentsQuery","parents query"),this.renderFullQuery(e,"searchQuery","search query"))},TreePatternsEditor.prototype.renderFullQuery=function(e,t,a){var r=this,l=e[t],u=this.fullConfigDefaults[t];return n.createElement(o.FieldEditorRow,{label:a,expanded:Boolean(l),expandOnMount:!0,onExpand:function(){var a;return r.changeConfig(e,((a={})[t]={value:u},a))},error:l?l.error:void 0},n.createElement(i.SparqlEditor,{syntaxErrorCheck:!1,query:l?l.value:void 0,onChange:function(a){var n;return r.changeConfig(e,((n={})[t]={value:a.value},n))}}))},TreePatternsEditor.prototype.changeConfig=function(e,t){this.props.onChange(r.__assign(r.__assign({},e),t))},TreePatternsEditor}(l.Component);t.TreePatternsEditor=d},2973:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),n=a(332),l=a(61);function collectTreeConfigErrors(e){var t=[],collectError=function(e){e&&e.error&&t.push(e.error)};return"simple"===e.type?(collectError(e.schemePattern),collectError(e.relationPattern)):(collectError(e.rootsQuery),collectError(e.childrenQuery),collectError(e.parentsQuery),collectError(e.searchQuery)),t}function validateQuery(e){var t,a,r=e.query,n=e.patterns,i=e.type,u=e.variables,o=void 0===u?[]:u,s=e.projection,d=void 0===s?[]:s,p=e.error;if("string"!=typeof r&&"string"!=typeof n)return{value:"",error:new Error(p)};try{if(r)t=r,a=collectQueryInfo({query:l.SparqlUtil.parseQuery(r)});else if(n){t=n,a=collectQueryInfo({patterns:l.SparqlUtil.parsePatterns(n)})}}catch(e){return{value:t,error:e}}var c=a.queryType,f=a.allVariables,v=a.projectionVariables,m=!i||c===i,g=new Set(v),y=o.every((function(e){return f.has(e)})),h=d.every((function(e){return g.has(e)}));return m&&y&&h?{value:t}:{value:t,error:new Error(p)}}function collectQueryInfo(e){var t=new(function(e){function class_1(){var t=null!==e&&e.apply(this,arguments)||this;return t.allVariables=new Set,t}return r.__extends(class_1,e),class_1.prototype.variableTerm=function(t){var a=t.substr(1);return this.allVariables.add(a),e.prototype.variableTerm.call(this,t)},class_1.prototype.query=function(t){return this.queryType=t.queryType,e.prototype.query.call(this,t)},class_1.prototype.insertDelete=function(t){return this.queryType=t.updateType,e.prototype.insertDelete.call(this,t)},class_1}(l.QueryVisitor)),a=e.query,n=e.patterns,i=[];return a?(t.sparqlQuery(a),"query"!==a.type||"SELECT"!==a.queryType||l.SparqlTypeGuards.isStarProjection(a.variables)||(i=a.variables.map((function(e){return l.SparqlTypeGuards.isTerm(e)?e.substr(1):e.variable.substr(1)})))):n&&n.forEach((function(e){return t.pattern(e)})),{queryType:t.queryType,allVariables:t.allVariables,projectionVariables:i}}t.collectStateErrors=function collectStateErrors(e){for(var t=[],collectError=function(e){e.error&&t.push(e.error)},a=0,r=[e.id,e.description,e.xsdDatatype,e.min,e.max,e.order,e.testSubject,e.selectPattern,e.insertPattern,e.deletePattern,e.askPattern,e.valueSetPattern,e.autosuggestionPattern];a<r.length;a++){r[a].map(collectError)}return e.label.forEach((function(e){var t=e.value;return collectError(t)})),e.domain.forEach(collectError),e.range.forEach(collectError),e.defaults.forEach(collectError),e.treePatterns.map(collectTreeConfigErrors),t},t.collectTreeConfigErrors=collectTreeConfigErrors,t.validateIri=function validateIri(e){return n.Util.isIRI(e)?{value:e}:{value:e,error:new Error("Identifier must be a valid full IRI string.")}},t.validateLabel=function validateLabel(e){return e.length>0?{value:e}:{value:e,error:new Error("Label should be meaningful and have at least one character.")}},t.validateMin=function validateMin(e){var t=Number(e);return Number.isInteger(t)&&t>=0?{value:e}:{value:e,error:new Error("Min. Cardinality must be >= 0")}},t.validateMax=function validateMax(e){var t=Number(e);return"unbound"===e||Number.isInteger(t)&&t>=1?{value:e}:{value:e,error:new Error("Max. Cardinality must be >= 1 or unbound")}},t.validateOrder=function validateOrder(e){var t=Number(e);return Number.isInteger(t)&&t>=0?{value:e}:{value:e,error:new Error("Order must be >= 0")}},t.validateInsert=function validateInsert(e){return validateQuery({query:e,type:"insertdelete",variables:["subject","value"],error:"Insert pattern must be a valid SPARQL UPDATE INSERT query and must have a $subject and $value variable."})},t.validateDelete=function validateDelete(e){return validateQuery({query:e,type:"insertdelete",variables:["subject","value"],error:"Delete pattern must be a valid SPARQL UPDATE DELETE query and must have a $subject and $value variable."})},t.validateSelect=function validateSelect(e){return validateQuery({query:e,type:"SELECT",variables:["subject","value"],projection:["value"],error:"Select pattern must be a valid SPARQL SELECT query, must have a $subject and $value variable and must expose a ?value projection variable."})},t.validateAsk=function validateAsk(e){return validateQuery({query:e,type:"ASK",error:"Ask validation pattern must be a valid SPARQL ASK query."})},t.validateValueSet=function validateValueSet(e){return validateQuery({query:e,type:"SELECT",projection:["value"],error:"Select valueset pattern must be a valid SPARQL SELECT query and must expose a ?value projection variable."})},t.validateAutosuggestion=function validateAutosuggestion(e){return validateQuery({query:e,type:"SELECT",projection:["value","label"],error:"Select autosuggestion pattern must be a valid SPARQL SELECT query and must expose a ?value and ?label projection variable."})},t.validateTreeConfig=function validateTreeConfig(e){return"simple"===e.type?{type:"simple",schemePattern:e.schemePattern?validateQuery({patterns:e.schemePattern.value,variables:["item"],error:"Tree scheme pattern must be a valid SPARQL pattern and must expose an ?item variable."}):void 0,relationPattern:e.relationPattern?validateQuery({patterns:e.relationPattern.value,variables:["item","parent"],error:"Tree relation pattern must be a valid SPARQL pattern and must expose an ?item and ?parent variables."}):void 0}:{type:"full",rootsQuery:validateQuery({query:e.rootsQuery?e.rootsQuery.value:void 0,type:"SELECT",projection:["item","label","hasChildren"],error:"Tree roots pattern must be a valid SPARQL SELECT query and must expose a ?item, ?label and ?hasChildren projection variables."}),childrenQuery:validateQuery({query:e.childrenQuery?e.childrenQuery.value:void 0,type:"SELECT",variables:["parent"],projection:["item","label","hasChildren"],error:"Tree children pattern must be a valid SPARQL SELECT query, must have a ?parent variable and must expose a ?item, ?label and ?hasChildren projection variables."}),parentsQuery:validateQuery({query:e.parentsQuery?e.parentsQuery.value:void 0,type:"SELECT",projection:["item","parent","parentLabel"],error:"Tree parents pattern must be a valid SPARQL SELECT query and must expose a ?item, ?parent and ?parentLabel projection variables."}),searchQuery:validateQuery({query:e.searchQuery?e.searchQuery.value:void 0,type:"SELECT",projection:["item","score","label","hasChildren"],error:"Tree search pattern must be a valid SPARQL SELECT query and must expose a ?item, ?score, ?label and ?hasChildren projection variables."})}},t.collectQueryInfo=collectQueryInfo},2974:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),n=a(1),l=a(72),i=a(1559),u=function(e){function FieldEditorLabel(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(FieldEditorLabel,e),FieldEditorLabel.prototype.render=function(){var e=this.props,t=e.label,a=e.isRequired,r=e.langOptions,u=e.onChangeLabelValue,o=e.onChangeLabelLang,s=e.onDeleteLabel,d=t.value,p=t.lang;return n.createElement(l.FormGroup,null,n.createElement(l.InputGroup,null,n.createElement(l.FormControl,{placeholder:"Label",value:d.value,onChange:function(e){var t=e.target.value;u(t)}}),n.createElement("div",{className:"input-group-btn",style:{fontSize:"inherit",display:"flex"}},n.createElement("div",{className:"field-editor__lang-selector-holder"},n.createElement(i.default,{value:p,options:r,clearable:!1,onChange:function(e){return o(e.value)}})),a?null:n.createElement(l.Button,{className:"field-editor__delete-label-button",onClick:function(){return s()}},n.createElement("i",{className:"fa fa-times"})))),d.error?n.createElement(l.Row,{className:"field-editor__error"},n.createElement(l.Col,{md:12},d.error.message)):null)},FieldEditorLabel}(n.Component);t.FieldEditorLabel=u},666:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var r=a(11),n=a(1),l=a(35),i=a(635),u=a(72),o=a(1559),s=a(1949),d=a(33),p=a(7),c=a(56),f=a(23),v=a(61),m=a(63),g=a(118),y=a(141),h=a(1953),b=a(1581),E=a(327),S=a(2057),P=a(2241),C=a(2971),x=a(2972),R=a(2973),_=a(2974);a(1371);var Q=n.createFactory(u.Button),T=n.createFactory(u.Row),V=n.createFactory(u.Col),L=n.createFactory(u.FormControl),F=n.createFactory(s.default),I=n.createFactory(o.default),N=i("field-editor"),A=function(e){function FieldEditorComponent(t,a){var i=e.call(this,t,a)||this;i.renderEditor=function(){var e=d.Just({value:""}),t=d.Nothing(),a=i.languages.find((function(e){return!i.state.label.find((function(t){return t.lang===e}))})),u=i.languages.map((function(e){var t=Boolean(i.state.label.find((function(t){return t.lang===e})));return{value:e,label:e,disabled:t}})),addLabel=function(){var e=r.__spreadArrays(i.state.label),t=R.validateLabel("");e.push({value:t,lang:a||""}),i.updateState({label:e})};return l.div({},P.default({label:"Label*",expanded:i.state.label.length>0,expandOnMount:!0,onExpand:function(){return addLabel()},element:[i.state.label.map((function(e,t){return i.renderLabel(e,t,u)})),Boolean(a)?l.a({onClick:function(){return addLabel()}},"+ Add label"):null]}),P.default({label:"Identifier*",expanded:i.state.id.isJust,expandOnMount:!0,onExpand:function(){return i.updateValues({id:e},R.validateIri)},error:i.state.id.map((function(e){return e.error})).getOrElse(void 0),element:l.div({className:"input-group"},[L({className:N("iri-input").toString(),type:"text",placeholder:"Any IRI to be used as unique identifier for the field definition.",onChange:function(e){return i.updateValues({id:getFormValue(e)},R.validateIri)},value:i.state.id.isJust?i.state.id.get().value:void 0,disabled:i.isEditMode()}),l.div({className:"input-group-btn"},i.isEditMode()?i.renderCopyToClipboardButton():Q({title:"Generate IRI",onClick:function(e){return i.generateIRI()}},l.i({className:"fa fa-refresh"})))])}),P.default({label:"Description",expanded:i.state.description.isJust,onExpand:function(){return i.updateValues({description:e})},onCollapse:function(){return i.updateValues({description:t})},element:F({className:p("form-control",N("description-input").toString()),rows:4,placeholder:"Description",onChange:function(e){return i.updateValues({description:getFormValue(e)})},value:i.state.description.isJust?i.state.description.get().value:void 0})}),P.default({label:"Categories",expanded:!0,element:n.createElement(b.SemanticTreeInput,r.__assign(r.__assign({},i.state.categoryQueries),{initialSelection:i.state.categories,multipleSelection:!0,onSelectionChanged:function(e){var t=b.TreeSelection.leafs(e).map((function(e){return e.iri})).toArray();i.updateState({categories:t})}}))}),i.renderMultipleValuesInput({values:i.state.domain,label:"Domains",addButtonLabel:"+ Add domain",showAddButton:!0,placeholder:"Any IRI to be used as domain for the field definition.",onChange:function(e,t){var a=r.__spreadArrays(i.state.domain);a[t]=R.validateIri(e),i.updateState({domain:a})},onAdd:function(){var e=r.__spreadArrays(i.state.domain,[R.validateIri("")]);i.updateState({domain:e})},onDelete:function(e){var t=r.__spreadArrays(i.state.domain);t.splice(e,1),i.updateState({domain:t})}}),P.default({label:"XSD Datatype",expanded:i.state.xsdDatatype.isJust,onExpand:function(){return i.updateValues({xsdDatatype:e})},onCollapse:function(){return i.updateValues({xsdDatatype:t})},error:i.state.xsdDatatype.map((function(e){return e.error})).getOrElse(void 0),element:I({value:i.state.xsdDatatype.map((function(e){return e.value})).getOrElse(void 0),className:N("xsd-input").toString(),multi:!1,clearable:!1,placeholder:"Please select any XSD datatype",options:f.vocabularies.xsd.LIST_TYPES,onChange:function(e){return i.updateValues({xsdDatatype:d.Just({value:e.value})})},labelKey:"label",valueKey:"value"})}),i.renderMultipleValuesInput({values:i.state.range,label:"Ranges",addButtonLabel:"+ Add range",showAddButton:!0,placeholder:"Any IRI to be used as range for the field definition.",onChange:function(e,t){var a=r.__spreadArrays(i.state.range);a[t]=R.validateIri(e),i.updateState({range:a})},onAdd:function(){var e=r.__spreadArrays(i.state.range,[R.validateIri("")]);i.updateState({range:e})},onDelete:function(e){var t=r.__spreadArrays(i.state.range);t.splice(e,1),i.updateState({range:t})}}),P.default({label:"Min. Cardinality",expanded:i.state.min.isJust,onExpand:function(){return i.updateValues({min:d.Just({value:"0"})},R.validateMin)},onCollapse:function(){return i.updateValues({min:t})},error:i.state.min.map((function(e){return e.error})).getOrElse(void 0),element:L({className:N("min-input").toString(),type:"number",min:0,step:1,placeholder:'Any positive number from 0 to n. "0" for not required.',onChange:function(e){return i.updateValues({min:getFormValue(e)},R.validateMin)},value:i.state.min.map((function(e){return e.value})).getOrElse(void 0)})}),P.default({label:"Max. Cardinality",expanded:i.state.max.isJust,onExpand:function(){return i.updateValues({max:d.Just({value:"1"})},R.validateMax)},onCollapse:function(){return i.updateValues({max:t})},error:i.state.max.map((function(e){return e.error})).getOrElse(void 0),element:L({className:N("max-input").toString(),type:"text",placeholder:'Any positive number from 1 to n. "unbound" for unlimited.',onChange:function(e){return i.updateValues({max:getFormValue(e)},R.validateMax)},value:i.state.max.map((function(e){return e.value})).getOrElse(void 0)})}),P.default({label:"Order",expanded:i.state.order.isJust,onExpand:function(){return i.updateValues({order:d.Just({value:"1"})},R.validateOrder)},onCollapse:function(){return i.updateValues({order:t})},error:i.state.order.map((function(e){return e.error})).getOrElse(void 0),element:L({className:N("order-input").toString(),type:"text",placeholder:"Any positive number greater than 0.",onChange:function(e){return i.updateValues({order:getFormValue(e)},R.validateOrder)},value:i.state.order.map((function(e){return e.value})).getOrElse(void 0)})}),i.renderMultipleValuesInput({values:i.defaultsUpToMax(),label:"Default values",addButtonLabel:"+ Add default value",showAddButton:!(i.isMaxSet()&&i.state.defaults.length>=parseInt(i.state.max.get().value)),onChange:function(e,t){var a=r.__spreadArrays(i.defaultsUpToMax());a[t]={value:e},i.updateState({defaults:a})},onAdd:function(){var e=r.__spreadArrays(i.defaultsUpToMax(),[{value:""}]);i.updateState({defaults:e})},onDelete:function(e){var t=r.__spreadArrays(i.defaultsUpToMax());t.splice(e,1),i.updateState({defaults:t})}}),P.default({label:"Test Subject",expanded:i.state.testSubject.isJust,onExpand:function(){return i.updateValues({testSubject:e},R.validateIri)},onCollapse:function(){return i.updateValues({testSubject:t})},error:i.state.testSubject.map((function(e){return e.error})).getOrElse(void 0),element:L({className:N("label-input").toString(),type:"text",placeholder:"IRI of any entity to be used for testing the patterns of the field.",onChange:function(e){return i.updateValues({testSubject:getFormValue(e)},R.validateIri)},value:i.state.testSubject.isJust?i.state.testSubject.get().value:void 0})}),P.default({label:"Insert Pattern*",expanded:i.state.insertPattern.isJust,expandOnMount:!0,onExpand:function(){return i.updateValues({insertPattern:d.Just({value:"INSERT { $subject ?predicate $value} WHERE {}"})},R.validateInsert)},error:i.state.insertPattern.map((function(e){return e.error})).getOrElse(void 0),element:n.createElement(h.SparqlEditor,{onChange:function(e){return i.updateValues({insertPattern:d.Just({value:e.value})},R.validateInsert)},syntaxErrorCheck:!1,query:i.state.insertPattern.map((function(e){return e.value})).getOrElse("")})}),P.default({label:"Select Pattern",expanded:i.state.selectPattern.isJust,onExpand:function(){return i.updateValues({selectPattern:d.Just({value:"SELECT ?value ?label WHERE {\n  $subject ?predicate ?value.\n  ?value rdfs:label ?label.\n}"})},R.validateSelect)},onCollapse:function(){return i.updateValues({selectPattern:t})},error:i.state.selectPattern.map((function(e){return e.error})).getOrElse(void 0),element:n.createElement(h.SparqlEditor,{onChange:function(e){return i.updateValues({selectPattern:d.Just({value:e.value})},R.validateSelect)},syntaxErrorCheck:!1,query:i.state.selectPattern.map((function(e){return e.value})).getOrElse("")})}),P.default({label:"Delete Pattern",expanded:i.state.deletePattern.isJust,onExpand:function(){return i.updateValues({deletePattern:d.Just({value:"DELETE { $subject ?predicate $value} WHERE {}"})},R.validateDelete)},onCollapse:function(){return i.updateValues({deletePattern:t})},error:i.state.deletePattern.map((function(e){return e.error})).getOrElse(void 0),element:n.createElement(h.SparqlEditor,{onChange:function(e){return i.updateValues({deletePattern:d.Just({value:e.value})},R.validateDelete)},syntaxErrorCheck:!1,query:i.state.deletePattern.map((function(e){return e.value})).getOrElse("")})}),P.default({label:"ASK Validation Pattern",expanded:i.state.askPattern.isJust,onExpand:function(){return i.updateValues({askPattern:d.Just({value:"ASK {}"})},R.validateAsk)},onCollapse:function(){return i.updateValues({askPattern:t})},error:i.state.askPattern.map((function(e){return e.error})).getOrElse(void 0),element:n.createElement(h.SparqlEditor,{onChange:function(e){return i.updateValues({askPattern:d.Just({value:e.value})},R.validateAsk)},syntaxErrorCheck:!1,query:i.state.askPattern.map((function(e){return e.value})).getOrElse("")})}),P.default({label:"Value Set Pattern",expanded:i.state.valueSetPattern.isJust,onExpand:function(){return i.updateValues({valueSetPattern:d.Just({value:"SELECT ?value ?label WHERE {\n  ?value a ?anyType ;\n    rdfs:label ?label .\n}"})},R.validateValueSet)},onCollapse:function(){return i.updateValues({valueSetPattern:t})},error:i.state.valueSetPattern.map((function(e){return e.error})).getOrElse(void 0),element:n.createElement(h.SparqlEditor,{onChange:function(e){return i.updateValues({valueSetPattern:d.Just({value:e.value})},R.validateValueSet)},syntaxErrorCheck:!1,query:i.state.valueSetPattern.map((function(e){return e.value})).getOrElse("")})}),P.default({label:"Autosuggestion Pattern",expanded:i.state.autosuggestionPattern.isJust,onExpand:function(){return i.updateValues({autosuggestionPattern:d.Just({value:'SELECT ?value ?label WHERE {\n  ?value a ?anyType ;\n    rdfs:label ?label .\n  FILTER REGEX(STR(?label), "?token")\n} LIMIT 10'})},R.validateAutosuggestion)},onCollapse:function(){return i.updateValues({autosuggestionPattern:t})},error:i.state.autosuggestionPattern.map((function(e){return e.error})).getOrElse(void 0),element:n.createElement(h.SparqlEditor,{onChange:function(e){return i.updateValues({autosuggestionPattern:d.Just({value:e.value})},R.validateAutosuggestion)},syntaxErrorCheck:!1,query:i.state.autosuggestionPattern.map((function(e){return e.value})).getOrElse("")})}),P.default({label:"Tree Patterns",expanded:i.state.treePatterns.isJust,onExpand:function(){return i.updateState({treePatterns:d.Just({type:"simple"})})},onCollapse:function(){return i.updateState({treePatterns:d.Nothing()})},element:n.createElement(x.TreePatternsEditor,{config:i.state.treePatterns.getOrElse({type:"simple"}),onChange:function(e){var t=R.validateTreeConfig(e);i.updateState({treePatterns:d.Just(t)})}})}),T({},V({md:3}),V({md:9},Q({disabled:!i.state.isValid,bsSize:"small",onClick:function(){return i.onSaveOrUpdate()},style:{marginLeft:"-15px"}},i.isEditMode()?"Update Field":"Create Field"),Q({disabled:!i.state.isValid,bsSize:"small",onClick:function(){return i.onSaveOrUpdate(i.props.navigateTo)},style:{marginLeft:10}},i.isEditMode()?"Update Field and Close":"Create Field and Close"))))},i.renderLabel=function(e,t,a){var l=e.value,u=e.lang,o=0===t;return n.createElement(_.FieldEditorLabel,{label:{value:l,lang:u},isRequired:o,langOptions:a,onChangeLabelValue:function(e){return i.updateLabelValue(t,o,e)},onChangeLabelLang:function(e){var a=r.__spreadArrays(i.state.label);a[t]=r.__assign(r.__assign({},a[t]),{lang:e}),i.updateState({label:a})},onDeleteLabel:function(){var e=r.__spreadArrays(i.state.label);e.splice(t,1),i.updateState({label:e})}})},i.renderCopyToClipboardButton=function(){var e=i.state.id.isJust?i.state.id.get().value:"",t=Q({title:"Copy to clipboard"},l.i({className:"fa fa-copy"}));return n.createElement(S.CopyToClipboardComponent,{text:e},t)},i.isEditMode=function(){return Boolean(i.props.fieldIri)},i.generateIRI=function(){var e=i.state.label.length>0?encodeURIComponent(i.state.label[0].value.value):Date.now(),t=i.getFieldInstanceIriBase()+e;i.updateValues({id:d.Just({value:t})},R.validateIri)},i.getFieldInstanceIriBase=function(){return i.props.fieldInstanceBaseIri?i.props.fieldInstanceBaseIri:v.SparqlUtil.RegisteredPrefixes.LdpBase?v.SparqlUtil.RegisteredPrefixes.LdpBase+"fieldDefinitionContainer/":"http://www.researchspace.org/fieldDefinition/"},i.onSaveOrUpdate=function(e){var t=function tryCreateFinalGraph(e){var t=C.unwrapState(e);if(!t.id||!t.label||!t.insertPattern)return d.Nothing();var a=C.createFieldDefinitionGraph(t);return d.Just(a)}(i.state);if(!t.isNothing){var a=t.get(),r=new g.LdpService(f.vocabularies.VocabPlatform.FieldDefinitionContainer.value);if(!i.isEditMode())return r.addResource(a,d.Just(i.state.id.get().value)).flatMap((function(t){var a=e?f.Rdf.iri(e):t;return m.navigateToResource(a,{},"assets")})).onValue((function(e){return e}));r.update(f.Rdf.iri(i.state.id.get().value),a).onValue((function(){e?m.navigateToResource(f.Rdf.iri(e),{},"assets").onValue((function(e){return e})):window.location.reload()}))}};var u=v.SparqlUtil.resolveIris([i.props.categoryScheme])[0],o=b.createDefaultTreeQueries({scheme:u.value});return i.languages=y.ConfigHolder.getUIConfig().preferredLanguages,i.state={id:d.Nothing(),label:[],description:d.Nothing(),categories:[],domain:[],xsdDatatype:d.Nothing(),range:[],min:d.Nothing(),max:d.Nothing(),order:d.Nothing(),defaults:[],testSubject:d.Nothing(),insertPattern:d.Nothing(),selectPattern:d.Nothing(),deletePattern:d.Nothing(),askPattern:d.Nothing(),valueSetPattern:d.Nothing(),autosuggestionPattern:d.Nothing(),treePatterns:d.Nothing(),isLoading:i.isEditMode(),isValid:!1,categoryQueries:o},i}return r.__extends(FieldEditorComponent,e),FieldEditorComponent.prototype.componentDidMount=function(){var e=this;if(this.isEditMode()){var t=f.Rdf.iri(this.props.fieldIri);C.getFieldDefitionState(t).observe({value:function(t){return e.setState(t)}})}},FieldEditorComponent.prototype.render=function(){return l.div({className:N("").toString()},this.state.isLoading?n.createElement(E.Spinner):this.renderEditor())},FieldEditorComponent.prototype.isMaxSet=function(){var e=this.state.max;return e.isJust&&parseInt(e.get().value)>=1},FieldEditorComponent.prototype.defaultsUpToMax=function(){var e=this.state,t=e.defaults,a=e.max;if(!this.isMaxSet())return t;var r=parseInt(a.get().value);return t.slice(0,r)},FieldEditorComponent.prototype.updateLabelValue=function(e,t,a){var n=r.__spreadArrays(this.state.label),l=n[e],i=l.value,u=l.lang,o=this.generateIriFromLabel(i.value),s=R.validateLabel(a);if(n[e]={value:s,lang:u},this.updateState({label:n}),t&&!this.isEditMode()&&this.state.id.map((function(e){return!e.value||e.value===o})).getOrElse(!0)){var p=this.generateIriFromLabel(a);this.updateValues({id:d.Just({value:p})},R.validateIri)}},FieldEditorComponent.prototype.renderMultipleValuesInput=function(e){var t=e.values,a=e.label,r=e.addButtonLabel,n=e.showAddButton,i=e.placeholder,u=e.onChange,o=e.onAdd,s=e.onDelete;return P.default({label:a,expanded:!0,element:[t.map((function(e,t){var a=e.value,r=e.error;return[l.div({className:N("default-input-holder").toString()},L({className:N("default-input").toString(),type:"text",placeholder:i,onChange:function(e){return u(e.target.value,t)},value:a}),Q({className:N("delete-default").toString(),onClick:function(){return s(t)}},l.span({className:"fa fa-times"}))),r?T({className:N("error").toString()},V({md:12},r.message)):null]})),n?l.a({onClick:o},r):null]})},FieldEditorComponent.prototype.updateValues=function(e,t){var a=Object.keys(e).reduce((function(a,r){var n=e[r].map((function(e){return t?t(e.value):{value:e.value}}));return a[r]=n,a}),{});this.updateState(a)},FieldEditorComponent.prototype.updateState=function(e){var t=r.__assign(r.__assign({},this.state),e),a=R.collectStateErrors(t);this.setState(r.__assign(r.__assign({},e),{isValid:0===a.length}))},FieldEditorComponent.prototype.generateIriFromLabel=function(e){return this.getFieldInstanceIriBase()+encodeURIComponent(e)},FieldEditorComponent.defaultProps={categoryScheme:"<http://www.researchspace.org/resource/system/FieldCategories>",navigateTo:"http://www.researchspace.org/resource/assets/Fields"},FieldEditorComponent}(c.Component);function getFormValue(e){var t=e.target.value;return d.Just({value:t})}t.component=A,t.factory=n.createFactory(t.component),t.default=t.component}}]);
//# sourceMappingURL=field-editor-85063a5d29903bd00906.js.map