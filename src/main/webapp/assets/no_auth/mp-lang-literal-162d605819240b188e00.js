(window.webpackJsonp=window.webpackJsonp||[]).push([[359],{1468:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});var r=t(11),a=t(1),i=t(33),l=t(16),o=t(56),s=t(329),p=t(34),u=t(630),g=t(61),c=t(23),d=t(327),f=t(63),L=function(e){function LangLiteral(n,t){var r=e.call(this,n,t)||this;return r.cancellation=new p.Cancellation,r.renderResult=function(e){return function(n){var t=r.props,i=t.style,l=t.className,o=r.getTemplateString(e);return a.createElement(u.TemplateItem,{template:{source:o,options:n},componentProps:{style:i,className:l}})}},r.state={isLoading:!0,isNoResult:!1,data:i.Nothing()},r}return r.__extends(LangLiteral,e),LangLiteral.prototype.componentDidMount=function(){var e=this,n=this.prepareQuery(),t=g.SparqlClient.setBindings(g.SparqlUtil.parseQuerySync(n),{__subject__:this.props.subject?c.Rdf.iri(this.props.subject):f.getCurrentResource()});this.cancellation.derive().map(g.SparqlClient.select(t,{context:this.context.semanticContext}).onValue((function(n){if(g.SparqlUtil.isSelectResultEmpty(n))e.setState({isLoading:!1,isNoResult:!0});else{var t={};l.forEach(n.results.bindings,(function(e){var n=e.node.value;t[n]||(t[n]={},t[n].others=[]),l.includes(t[n].others,e.value)||t[n].others.push(e.value),e.value.equals(e.preferredLanguage)&&l.remove(t[n].others,e.preferredLanguage),e.preferredLanguage&&(t[n].preferredLanguage=e.preferredLanguage)}));var r={results:l.values(t)};e.setState({data:i.Just(r),isLoading:!1,isNoResult:!1})}})))},LangLiteral.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},LangLiteral.prototype.prepareQuery=function(){var e=this.props,n=e.path,t=e.property;if(!t)throw new Error("At least attribute 'property' must be specified");var r="OPTIONAL{\n                    ?node <"+t+"> ?value .\n                    "+("FILTER(LANGMATCHES(LANG(?value),'"+s.getPreferredUserLanguage()+"'))")+"\n                    BIND(?value as ?preferredLanguage)\n                }";return n?"SELECT DISTINCT\n                ?node ?value ?preferredLanguage\n            WHERE{\n                ?__subject__ "+n+" ?node .\n                ?node <"+t+"> ?value .\n                "+r+"\n            }":"SELECT DISTINCT\n                ?node ?value ?preferredLanguage\n            WHERE{\n                ?__subject__ <"+t+"> ?value .\n                BIND( ?__subject__ as ?node )\n                "+r+"\n            }"},LangLiteral.prototype.getTemplateString=function(e){if(e)return e;var n=s.getPreferredUserLanguage();return"\n    <div>\n      {{#each results}}\n        {{#if preferredLanguage}}\n          {{preferredLanguage.value}}\n          {{#if preferredLanguage.lang}}\n            ({{preferredLanguage.lang}})\n          {{/if}}\n        {{else}}\n          Property "+('<mp-label iri="'+this.props.property+'"></mp-label>')+" is not available in your preferred language ("+n+')\n        {{/if}}\n        {{#if others.length}}\n          \n      <mp-popover title="Other languages">\n        <mp-popover-trigger placement="right" trigger=\'["hover","click","focus"]\'>\n          <i class="fa fa-language hidden-print" style="margin-left: 10px;" aria-hidden="true"></i>\n        </mp-popover-trigger>\n        <mp-popover-content style="background: white;">\n          {{#each others}}\n            <div>{{value}} {{#if lang}}({{lang}}){{/if}}</div><hr>\n          {{/each}}\n        </mp-popover-content>\n      </mp-popover>\n    \n        {{/if}}\n        <br>\n      {{/each}}\n    </div>\n    '},LangLiteral.prototype.render=function(){var e=this.props,n=e.template,t=e.noResultTemplate,r=this.state,i=r.data,l=r.isLoading;return r.isNoResult?a.createElement(u.TemplateItem,{template:{source:t}}):l?a.createElement(d.Spinner,null):a.createElement("div",null,i.map(this.renderResult(n)).getOrElse(null))},LangLiteral}(o.Component);n.LangLiteral=L,n.default=L}}]);
//# sourceMappingURL=mp-lang-literal-162d605819240b188e00.js.map