{"version":3,"sources":["webpack:///./node_modules/cytoscape-panzoom/cytoscape-panzoom.js"],"names":["register","cytoscape","$","fn","cyPanzoom","cytoscapePanzoom","options","panzoom","apply","this","container","defaults","zoomFactor","zoomDelay","minZoom","maxZoom","fitPadding","panSpeed","panDistance","panDragAreaSize","panMinPercentSpeed","panInactiveArea","panIndicatorMinOpacity","zoomOnly","fitSelector","undefined","animateOnFit","fitAnimationDuration","sliderHandleIcon","zoomInIcon","zoomOutIcon","resetIcon","params","extend","functions","destroy","$this","$pz","find","data","forEach","l","window","unbind","evt","off","remove","init","each","$container","winbdgs","$win","windowBind","push","bind","windowUnbind","i","length","splice","cybdgs","cy","$panzoom","prepend","css","addClass","$zoomIn","append","$zoomOut","$reset","$slider","$sliderHandle","$noZoomTick","$panner","$pHandle","$pUp","$pDown","$pLeft","$pRight","$pIndicator","donePanning","clearInterval","panInterval","handler","hide","calculateZoomCenterPoint","pan","zoom","zx","width","zy","height","zooming","startZooming","endZooming","zoomTo","level","renderedPosition","x","y","e","stopPropagation","preventDefault","handle2pan","v","originalEvent","pageX","offset","left","pageY","top","r","d","Math","sqrt","percent","min","NaN","max","isNaN","positionIndicator","vnorm","w","h","opacity","color","round","show","background","setInterval","panBy","sliderMdownHandler","sliderMmoveHandler","sliding","setSliderFromMouse","handleOffset","zmin","zmax","log","p","z","pow","positionSliderFromZoom","bindButton","$button","factor","zoomInterval","button","doZoom","lvl","mdEvt","target","offsetY","lastMove","mmEvt","now","Date","removeClass","on","cyOn","elesToFit","elements","size","reset","call","animate","fit","eles","padding","duration","Array","prototype","slice","arguments","error","module","exports","jQuery"],"mappings":"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","file":"npm.cytoscape-panzoom-f9b4d503e68e80539f2c.js","sourcesContent":["/*!\nCopyright (c) The Cytoscape Consortium\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the “Software”), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n;(function(){ 'use strict';\n\n  // registers the extension on a cytoscape lib ref\n  var register = function( cytoscape, $ ){\n    if( !cytoscape ){ return; } // can't register if cytoscape unspecified\n\n    $.fn.cyPanzoom = $.fn.cytoscapePanzoom = function( options ){\n      panzoom.apply( this, [ options, $ ] );\n\n      return this; // chainability\n    };\n\n    // if you want a core extension\n    cytoscape('core', 'panzoom', function( options ){ // could use options object, but args are up to you\n      var cy = this;\n\n      panzoom.apply( cy.container(), [ options, $ ] );\n\n      return this; // chainability\n    });\n\n  };\n\n  var defaults = {\n    zoomFactor: 0.05, // zoom factor per zoom tick\n    zoomDelay: 45, // how many ms between zoom ticks\n    minZoom: 0.1, // min zoom level\n    maxZoom: 10, // max zoom level\n    fitPadding: 50, // padding when fitting\n    panSpeed: 10, // how many ms in between pan ticks\n    panDistance: 10, // max pan distance per tick\n    panDragAreaSize: 75, // the length of the pan drag box in which the vector for panning is calculated (bigger = finer control of pan speed and direction)\n    panMinPercentSpeed: 0.25, // the slowest speed we can pan by (as a percent of panSpeed)\n    panInactiveArea: 8, // radius of inactive area in pan drag box\n    panIndicatorMinOpacity: 0.5, // min opacity of pan indicator (the draggable nib); scales from this to 1.0\n    zoomOnly: false, // a minimal version of the ui only with zooming (useful on systems with bad mousewheel resolution)\n    fitSelector: undefined, // selector of elements to fit\n    animateOnFit: function(){ // whether to animate on fit\n      return false;\n    },\n    fitAnimationDuration: 1000, // duration of animation on fit\n\n    // icon class names\n    sliderHandleIcon: 'fa fa-minus',\n    zoomInIcon: 'fa fa-plus',\n    zoomOutIcon: 'fa fa-minus',\n    resetIcon: 'fa fa-expand'\n  };\n\n  var panzoom = function( params, $ ){\n    var options = $.extend(true, {}, defaults, params);\n    var fn = params;\n\n    var functions = {\n      destroy: function(){\n        var $this = $(this);\n        var $pz = $this.find(\".cy-panzoom\");\n\n        $pz.data('winbdgs').forEach(function( l ){\n          $(window).unbind( l.evt, l.fn );\n        });\n\n        $pz.data('cybdgs').forEach(function( l ){\n          $this.cytoscape('get').off( l.evt, l.fn );\n        });\n\n        $pz.remove();\n      },\n\n      init: function(){\n        var browserIsMobile = 'ontouchstart' in window;\n\n        return $(this).each(function(){\n          var $container = $(this);\n\n          var winbdgs = [];\n          var $win = $(window);\n\n          var windowBind = function( evt, fn ){\n            winbdgs.push({ evt: evt, fn: fn });\n\n            $win.bind( evt, fn );\n          };\n\n          var windowUnbind = function( evt, fn ){\n            for( var i = 0; i < winbdgs.length; i++ ){\n              var l = winbdgs[i];\n\n              if( l.evt === evt && l.fn === fn ){\n                winbdgs.splice( i, 1 );\n                break;\n              }\n            }\n\n            $win.unbind( evt, fn );\n          };\n\n          var cybdgs = [];\n          var cy = $container.cytoscape('get');\n\n          var cyOn = function( evt, fn ){\n            cybdgs.push({ evt: evt, fn: fn });\n\n            cy.on( evt, fn );\n          };\n\n          var cyOff = function( evt, fn ){\n            for( var i = 0; i < cybdgs.length; i++ ){\n              var l = cybdgs[i];\n\n              if( l.evt === evt && l.fn === fn ){\n                cybdgs.splice( i, 1 );\n                break;\n              }\n            }\n\n            cy.off( evt, fn );\n          };\n\n          var $panzoom = $('<div class=\"cy-panzoom\"></div>');\n          $container.prepend( $panzoom );\n\n          $panzoom.css('position', 'absolute'); // must be absolute regardless of stylesheet\n\n          $panzoom.data('winbdgs', winbdgs);\n          $panzoom.data('cybdgs', cybdgs);\n\n          if( options.zoomOnly ){\n            $panzoom.addClass(\"cy-panzoom-zoom-only\");\n          }\n\n          // add base html elements\n          /////////////////////////\n\n          var $zoomIn = $('<div class=\"cy-panzoom-zoom-in cy-panzoom-zoom-button\"><span class=\"icon '+ options.zoomInIcon +'\"></span></div>');\n          $panzoom.append( $zoomIn );\n\n          var $zoomOut = $('<div class=\"cy-panzoom-zoom-out cy-panzoom-zoom-button\"><span class=\"icon ' + options.zoomOutIcon + '\"></span></div>');\n          $panzoom.append( $zoomOut );\n\n          var $reset = $('<div class=\"cy-panzoom-reset cy-panzoom-zoom-button\"><span class=\"icon ' + options.resetIcon + '\"></span></div>');\n          $panzoom.append( $reset );\n\n          var $slider = $('<div class=\"cy-panzoom-slider\"></div>');\n          $panzoom.append( $slider );\n\n          $slider.append('<div class=\"cy-panzoom-slider-background\"></div>');\n\n          var $sliderHandle = $('<div class=\"cy-panzoom-slider-handle\"><span class=\"icon ' + options.sliderHandleIcon + '\"></span></div>');\n          $slider.append( $sliderHandle );\n\n          var $noZoomTick = $('<div class=\"cy-panzoom-no-zoom-tick\"></div>');\n          $slider.append( $noZoomTick );\n\n          var $panner = $('<div class=\"cy-panzoom-panner\"></div>');\n          $panzoom.append( $panner );\n\n          var $pHandle = $('<div class=\"cy-panzoom-panner-handle\"></div>');\n          $panner.append( $pHandle );\n\n          var $pUp = $('<div class=\"cy-panzoom-pan-up cy-panzoom-pan-button\"></div>');\n          var $pDown = $('<div class=\"cy-panzoom-pan-down cy-panzoom-pan-button\"></div>');\n          var $pLeft = $('<div class=\"cy-panzoom-pan-left cy-panzoom-pan-button\"></div>');\n          var $pRight = $('<div class=\"cy-panzoom-pan-right cy-panzoom-pan-button\"></div>');\n          $panner.append( $pUp ).append( $pDown ).append( $pLeft ).append( $pRight );\n\n          var $pIndicator = $('<div class=\"cy-panzoom-pan-indicator\"></div>');\n          $panner.append( $pIndicator );\n\n          // functions for calculating panning\n          ////////////////////////////////////\n\n          function handle2pan(e){\n            var v = {\n              x: e.originalEvent.pageX - $panner.offset().left - $panner.width()/2,\n              y: e.originalEvent.pageY - $panner.offset().top - $panner.height()/2\n            }\n\n            var r = options.panDragAreaSize;\n            var d = Math.sqrt( v.x*v.x + v.y*v.y );\n            var percent = Math.min( d/r, 1 );\n\n            if( d < options.panInactiveArea ){\n              return {\n                x: NaN,\n                y: NaN\n              };\n            }\n\n            v = {\n              x: v.x/d,\n              y: v.y/d\n            };\n\n            percent = Math.max( options.panMinPercentSpeed, percent );\n\n            var vnorm = {\n              x: -1 * v.x * (percent * options.panDistance),\n              y: -1 * v.y * (percent * options.panDistance)\n            };\n\n            return vnorm;\n          }\n\n          function donePanning(){\n            clearInterval(panInterval);\n            windowUnbind(\"mousemove\", handler);\n\n            $pIndicator.hide();\n          }\n\n          function positionIndicator(pan){\n            var v = pan;\n            var d = Math.sqrt( v.x*v.x + v.y*v.y );\n            var vnorm = {\n              x: -1 * v.x/d,\n              y: -1 * v.y/d\n            };\n\n            var w = $panner.width();\n            var h = $panner.height();\n            var percent = d/options.panDistance;\n            var opacity = Math.max( options.panIndicatorMinOpacity, percent );\n            var color = 255 - Math.round( opacity * 255 );\n\n            $pIndicator.show().css({\n              left: w/2 * vnorm.x + w/2,\n              top: h/2 * vnorm.y + h/2,\n              background: \"rgb(\" + color + \", \" + color + \", \" + color + \")\"\n            });\n          }\n\n          function calculateZoomCenterPoint(){\n            var cy = $container.cytoscape(\"get\");\n            var pan = cy.pan();\n            var zoom = cy.zoom();\n\n            zx = $container.width()/2;\n            zy = $container.height()/2;\n          }\n\n          var zooming = false;\n          function startZooming(){\n            zooming = true;\n\n            calculateZoomCenterPoint();\n          }\n\n\n          function endZooming(){\n            zooming = false;\n          }\n\n          var zx, zy;\n          function zoomTo(level){\n            var cy = $container.cytoscape(\"get\");\n\n            if( !zooming ){ // for non-continuous zooming (e.g. click slider at pt)\n              calculateZoomCenterPoint();\n            }\n\n            cy.zoom({\n              level: level,\n              renderedPosition: { x: zx, y: zy }\n            });\n          }\n\n          var panInterval;\n\n          var handler = function(e){\n            e.stopPropagation(); // don't trigger dragging of panzoom\n            e.preventDefault(); // don't cause text selection\n            clearInterval(panInterval);\n\n            var pan = handle2pan(e);\n\n            if( isNaN(pan.x) || isNaN(pan.y) ){\n              $pIndicator.hide();\n              return;\n            }\n\n            positionIndicator(pan);\n            panInterval = setInterval(function(){\n              $container.cytoscape(\"get\").panBy(pan);\n            }, options.panSpeed);\n          };\n\n          $pHandle.bind(\"mousedown\", function(e){\n            // handle click of icon\n            handler(e);\n\n            // update on mousemove\n            windowBind(\"mousemove\", handler);\n          });\n\n          $pHandle.bind(\"mouseup\", function(){\n            donePanning();\n          });\n\n          windowBind(\"mouseup blur\", function(){\n            donePanning();\n          });\n\n\n\n          // set up slider behaviour\n          //////////////////////////\n\n          $slider.bind('mousedown', function(){\n            return false; // so we don't pan close to the slider handle\n          });\n\n          var sliderVal;\n          var sliding = false;\n          var sliderPadding = 2;\n\n          function setSliderFromMouse(evt, handleOffset){\n            if( handleOffset === undefined ){\n              handleOffset = 0;\n            }\n\n            var padding = sliderPadding;\n            var min = 0 + padding;\n            var max = $slider.height() - $sliderHandle.height() - 2*padding;\n            var top = evt.pageY - $slider.offset().top - handleOffset;\n\n            // constrain to slider bounds\n            if( top < min ){ top = min }\n            if( top > max ){ top = max }\n\n            var percent = 1 - (top - min) / ( max - min );\n\n            // move the handle\n            $sliderHandle.css('top', top);\n\n            var zmin = options.minZoom;\n            var zmax = options.maxZoom;\n\n            // assume (zoom = zmax ^ p) where p ranges on (x, 1) with x negative\n            var x = Math.log(zmin) / Math.log(zmax);\n            var p = (1 - x)*percent + x;\n\n            // change the zoom level\n            var z = Math.pow( zmax, p );\n\n            // bound the zoom value in case of floating pt rounding error\n            if( z < zmin ){\n              z = zmin;\n            } else if( z > zmax ){\n              z = zmax;\n            }\n\n            zoomTo( z );\n          }\n\n          var sliderMdownHandler, sliderMmoveHandler;\n          $sliderHandle.bind('mousedown', sliderMdownHandler = function( mdEvt ){\n            var handleOffset = mdEvt.target === $sliderHandle[0] ? mdEvt.offsetY : 0;\n            sliding = true;\n\n            startZooming();\n            $sliderHandle.addClass(\"active\");\n\n            var lastMove = 0;\n            windowBind('mousemove', sliderMmoveHandler = function( mmEvt ){\n              var now = +new Date;\n\n              // throttle the zooms every 10 ms so we don't call zoom too often and cause lag\n              if( now > lastMove + 10 ){\n                lastMove = now;\n              } else {\n                return false;\n              }\n\n              setSliderFromMouse(mmEvt, handleOffset);\n\n              return false;\n            });\n\n            // unbind when\n            windowBind('mouseup', function(){\n              windowUnbind('mousemove', sliderMmoveHandler);\n              sliding = false;\n\n              $sliderHandle.removeClass(\"active\");\n              endZooming();\n            });\n\n            return false;\n          });\n\n          $slider.bind('mousedown', function(e){\n            if( e.target !== $sliderHandle[0] ){\n              sliderMdownHandler(e);\n              setSliderFromMouse(e);\n            }\n          });\n\n          function positionSliderFromZoom(){\n            var cy = $container.cytoscape(\"get\");\n            var z = cy.zoom();\n            var zmin = options.minZoom;\n            var zmax = options.maxZoom;\n\n            // assume (zoom = zmax ^ p) where p ranges on (x, 1) with x negative\n            var x = Math.log(zmin) / Math.log(zmax);\n            var p = Math.log(z) / Math.log(zmax);\n            var percent = 1 - (p - x) / (1 - x); // the 1- bit at the front b/c up is in the -ve y direction\n\n            var min = sliderPadding;\n            var max = $slider.height() - $sliderHandle.height() - 2*sliderPadding;\n            var top = percent * ( max - min );\n\n            // constrain to slider bounds\n            if( top < min ){ top = min }\n            if( top > max ){ top = max }\n\n            // move the handle\n            $sliderHandle.css('top', top);\n          }\n\n          positionSliderFromZoom();\n\n          cyOn('zoom', function(){\n            if( !sliding ){\n              positionSliderFromZoom();\n            }\n          });\n\n          // set the position of the zoom=1 tick\n          (function(){\n            var z = 1;\n            var zmin = options.minZoom;\n            var zmax = options.maxZoom;\n\n            // assume (zoom = zmax ^ p) where p ranges on (x, 1) with x negative\n            var x = Math.log(zmin) / Math.log(zmax);\n            var p = Math.log(z) / Math.log(zmax);\n            var percent = 1 - (p - x) / (1 - x); // the 1- bit at the front b/c up is in the -ve y direction\n\n            if( percent > 1 || percent < 0 ){\n              $noZoomTick.hide();\n              return;\n            }\n\n            var min = sliderPadding;\n            var max = $slider.height() - $sliderHandle.height() - 2*sliderPadding;\n            var top = percent * ( max - min );\n\n            // constrain to slider bounds\n            if( top < min ){ top = min }\n            if( top > max ){ top = max }\n\n            $noZoomTick.css('top', top);\n          })();\n\n          // set up zoom in/out buttons\n          /////////////////////////////\n\n          function bindButton($button, factor){\n            var zoomInterval;\n\n            $button.bind(\"mousedown\", function(e){\n              e.preventDefault();\n              e.stopPropagation();\n\n              if( e.button != 0 ){\n                return;\n              }\n\n              var cy = $container.cytoscape(\"get\");\n              var doZoom = function(){\n                var zoom = cy.zoom();\n                var lvl = cy.zoom() * factor;\n\n                if( lvl < options.minZoom ){\n                  lvl = options.minZoom;\n                }\n\n                if( lvl > options.maxZoom ){\n                  lvl = options.maxZoom;\n                }\n\n                if( (lvl == options.maxZoom && zoom == options.maxZoom) ||\n                  (lvl == options.minZoom && zoom == options.minZoom)\n                ){\n                  return;\n                }\n\n                zoomTo(lvl);\n              };\n\n              startZooming();\n              doZoom();\n              zoomInterval = setInterval(doZoom, options.zoomDelay);\n\n              return false;\n            });\n\n            windowBind(\"mouseup blur\", function(){\n              clearInterval(zoomInterval);\n              endZooming();\n            });\n          }\n\n          bindButton( $zoomIn, (1 + options.zoomFactor) );\n          bindButton( $zoomOut, (1 - options.zoomFactor) );\n\n          $reset.bind(\"mousedown\", function(e){\n            if( e.button != 0 ){\n              return;\n            }\n\n            var cy = $container.cytoscape(\"get\");\n            var elesToFit = options.fitSelector?cy.elements(options.fitSelector):cy.elements();\n            \n            if( elesToFit.size() === 0 ){\n              cy.reset();\n            } else {\n              var animateOnFit = typeof options.animateOnFit === 'function' ? options.animateOnFit.call() : options.animateOnFit;\n              if(animateOnFit){\n                cy.animate({\n                  fit: {\n                    eles: elesToFit,\n                    padding: options.fitPadding\n                  }\n                }, {\n                  duration: options.fitAnimationDuration\n                });\n              }\n              else{\n                cy.fit( elesToFit, options.fitPadding );\n              }\n              \n            }\n\n            return false;\n          });\n\n\n\n        });\n      }\n    };\n\n    if( functions[fn] ){\n      return functions[fn].apply(this, Array.prototype.slice.call( arguments, 1 ));\n    } else if( typeof fn == 'object' || !fn ) {\n      return functions.init.apply( this, arguments );\n    } else {\n      $.error(\"No such function `\"+ fn +\"` for jquery.cytoscapePanzoom\");\n    }\n\n    return $(this);\n  };\n\n\n  if( typeof module !== 'undefined' && module.exports ){ // expose as a commonjs module\n    module.exports = register;\n  }\n\n  if( typeof define !== 'undefined' && define.amd ){ // expose as an amd/requirejs module\n    define('cytoscape-panzoom', function(){\n      return register;\n    });\n  }\n\n  if( typeof cytoscape !== 'undefined' && typeof jQuery !== 'undefined' ){ // expose to global cytoscape (i.e. window.cytoscape)\n    register( cytoscape, jQuery );\n  }\n\n})();\n"],"sourceRoot":""}