(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1233:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),i=a(1),r=a(35),l=a(72),o=a(16),s=a(1949),u=a(1559),p=i.createFactory(u.default),g=a(23),d=a(1208),c=a(1553),h=a(1619),f=a(1688),x=function(e){function PlainTextInput(t,a){var n=e.call(this,t,a)||this;return n.hasFocus=!1,n.onTextChanged=function(e){var t=e.target.value,a=n.state.language;n.setState({text:t,language:a}),n.setAndValidate(n.createValue(t,a))},n.state=n.reformatText(t),n.languages=n.getAvailableLanguages(),n}return n.__extends(PlainTextInput,e),PlainTextInput.prototype.componentDidMount=function(){this.languages.length>0&&this.props.requireLanguage&&this.setState({language:this.languages[0]})},PlainTextInput.prototype.componentWillReceiveProps=function(e){this.hasFocus||this.setState(this.reformatText(e))},PlainTextInput.prototype.render=function(){return r.div({className:"plain-text-field"},r.div({className:"plain-text-field__inputs"},this.renderElement(),this.renderLanguageSelect()),i.createElement(f.ValidationMessages,{errors:c.FieldValue.getErrors(this.props.value)}))},PlainTextInput.prototype.isMultiline=function(){return this.props.multiline||!1},PlainTextInput.prototype.getAvailableLanguages=function(){var e=[];this.props.languages&&(e=e.concat(this.props.languages));var t=getLanguageFromNode(c.FieldValue.asRdfNode(this.props.value));return t&&e.indexOf(t)<0&&e.push(t),e},PlainTextInput.prototype.reformatText=function(e){var t=c.FieldValue.asRdfNode(e.value),a=this.state?this.state.language:void 0;return{text:t?t.value:"",language:t?getLanguageFromNode(t):a}},PlainTextInput.prototype.onLanguageChanged=function(e){var t=this.state.text;this.setState({text:t,language:e.key}),c.FieldValue.isEmpty(this.props.value)||this.setAndValidate(this.createValue(t,e.key))},PlainTextInput.prototype.createValue=function(e,t){if(0===e.length)return c.FieldValue.empty;var a,n=this.props.definition.xsdDatatype||g.vocabularies.xsd._string;return!t&&g.XsdDataTypeValidation.sameXsdDatatype(n,g.vocabularies.rdf.langString)&&(n=g.vocabularies.xsd._string),a=t?g.Rdf.langLiteral(e,t):g.XsdDataTypeValidation.sameXsdDatatype(n,g.vocabularies.xsd.anyURI)?g.Rdf.iri(e):g.Rdf.literal(e,n),c.AtomicValue.set(this.props.value,{value:a})},PlainTextInput.prototype.getStyle=function(){if(this.props.dataState!==c.DataState.Verifying){var e=this.props.value,t=c.FieldValue.getErrors(e);return t.size>0?t.some(c.FieldError.isPreventSubmit)?"error":"warning":void 0}},PlainTextInput.prototype.renderElement=function(){var e=this,t=this.props.definition,a=c.FieldValue.asRdfNode(this.props.value),n=void 0===this.props.placeholder?this.createDefaultPlaceholder(t):this.props.placeholder;return this.isMultiline()?i.createElement(s.default,{className:"plain-text-field__text",style:getTextAreaStyle(this.getStyle()),value:this.state.text,placeholder:n,onChange:this.onTextChanged}):i.createElement(l.FormGroup,{validationState:this.getStyle()},i.createElement(l.FormControl,{className:"plain-text-field__text",value:this.state.text,type:"text",placeholder:n,onChange:this.onTextChanged,onFocus:function(){e.hasFocus=!0},onBlur:function(){e.hasFocus=!1,e.setState(e.reformatText(e.props))},title:a?a.toString():void 0,readOnly:!this.canEdit}))},PlainTextInput.prototype.getOptionsForLanguageSelect=function(e){var t=e.map((function(e){return{key:e,label:e}}));return this.props.requireLanguage||t.unshift({key:void 0,label:"No language"}),t},PlainTextInput.prototype.renderLanguageSelect=function(){var e=this;if(!(this.languages.length<1)){var t=this.getOptionsForLanguageSelect(this.languages),a=this.state.language,n=o.find(t,(function(e){return e.key===a}));return p({className:"plain-text-field__language",onChange:function(t){return e.onLanguageChanged(t)},options:t,value:n,disabled:t.length<1,clearable:!1})}},PlainTextInput.prototype.createDefaultPlaceholder=function(e){return"Enter "+(d.getPreferredLabel(e.label)||"value").toLocaleLowerCase()+" here..."},PlainTextInput.makeHandler=h.AtomicValueInput.makeAtomicHandler,PlainTextInput}(h.AtomicValueInput);function getLanguageFromNode(e){if(e&&e.isLiteral())return e.language?e.language:void 0}function getTextAreaStyle(e){switch(e){case"warning":return{borderColor:"#e99002"};case"error":return{borderColor:"#d32a0e"};default:return{}}}t.PlainTextInput=x,h.SingleValueInput.assertStatic(x),t.default=x}}]);
//# sourceMappingURL=semantic-form-text-input-db974d083dcdf3691854.js.map