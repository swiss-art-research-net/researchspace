{"version":3,"sources":["webpack:///./node_modules/slate/lib/slate.es.js","webpack:///./node_modules/slate/node_modules/lodash/_root.js","webpack:///./node_modules/slate/node_modules/lodash/isArray.js","webpack:///./node_modules/slate/node_modules/lodash/isObjectLike.js","webpack:///./node_modules/slate/node_modules/lodash/_getNative.js","webpack:///./node_modules/slate/node_modules/lodash/_castPath.js","webpack:///./node_modules/slate/node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/slate/node_modules/lodash/isObject.js","webpack:///./node_modules/slate/node_modules/lodash/_Symbol.js","webpack:///./node_modules/slate/node_modules/lodash/_copyObject.js","webpack:///./node_modules/slate/node_modules/lodash/_nativeCreate.js","webpack:///./node_modules/slate/node_modules/lodash/_ListCache.js","webpack:///./node_modules/slate/node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/slate/node_modules/lodash/_getMapData.js","webpack:///./node_modules/slate/node_modules/lodash/_toKey.js","webpack:///./node_modules/slate/node_modules/lodash/isSymbol.js","webpack:///./node_modules/slate/node_modules/lodash/_Map.js","webpack:///./node_modules/slate/node_modules/lodash/_assignValue.js","webpack:///./node_modules/slate/node_modules/lodash/_isIndex.js","webpack:///./node_modules/slate/node_modules/lodash/isArguments.js","webpack:///./node_modules/slate/node_modules/lodash/isLength.js","webpack:///./node_modules/slate/node_modules/lodash/_arrayPush.js","webpack:///./node_modules/slate/node_modules/lodash/keys.js","webpack:///./node_modules/slate/node_modules/lodash/_baseUnary.js","webpack:///./node_modules/slate/node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/slate/node_modules/lodash/_isPrototype.js","webpack:///./node_modules/slate/node_modules/lodash/_getSymbols.js","webpack:///./node_modules/slate/node_modules/lodash/_getPrototype.js","webpack:///./node_modules/slate/node_modules/lodash/_getTag.js","webpack:///./node_modules/slate/node_modules/lodash/_cloneArrayBuffer.js","webpack:///./node_modules/slate/node_modules/lodash/_baseGet.js","webpack:///./node_modules/slate/node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/slate/node_modules/lodash/_MapCache.js","webpack:///./node_modules/slate/node_modules/lodash/isFunction.js","webpack:///./node_modules/slate/node_modules/lodash/_toSource.js","webpack:///./node_modules/slate/node_modules/lodash/eq.js","webpack:///./node_modules/slate/node_modules/lodash/_arrayMap.js","webpack:///./node_modules/slate/node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/slate/node_modules/lodash/_defineProperty.js","webpack:///./node_modules/slate/node_modules/lodash/_flatRest.js","webpack:///./node_modules/slate/node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/slate/node_modules/lodash/isBuffer.js","webpack:///./node_modules/slate/node_modules/lodash/_overArg.js","webpack:///./node_modules/slate/node_modules/lodash/isArrayLike.js","webpack:///./node_modules/slate/node_modules/lodash/keysIn.js","webpack:///./node_modules/slate/node_modules/lodash/stubArray.js","webpack:///./node_modules/slate/node_modules/lodash/_getSymbolsIn.js","webpack:///./node_modules/slate/node_modules/lodash/_baseGetAllKeys.js","webpack:///./node_modules/slate/node_modules/lodash/_getAllKeysIn.js","webpack:///./node_modules/slate/node_modules/debug/src/browser.js","webpack:///./node_modules/slate/node_modules/debug/src/common.js","webpack:///./node_modules/slate/node_modules/lodash/pick.js","webpack:///./node_modules/slate/node_modules/lodash/_basePick.js","webpack:///./node_modules/slate/node_modules/lodash/_basePickBy.js","webpack:///./node_modules/slate/node_modules/lodash/_isKey.js","webpack:///./node_modules/slate/node_modules/lodash/_getRawTag.js","webpack:///./node_modules/slate/node_modules/lodash/_objectToString.js","webpack:///./node_modules/slate/node_modules/lodash/_stringToPath.js","webpack:///./node_modules/slate/node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/slate/node_modules/lodash/memoize.js","webpack:///./node_modules/slate/node_modules/lodash/_mapCacheClear.js","webpack:///./node_modules/slate/node_modules/lodash/_Hash.js","webpack:///./node_modules/slate/node_modules/lodash/_hashClear.js","webpack:///./node_modules/slate/node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/slate/node_modules/lodash/_isMasked.js","webpack:///./node_modules/slate/node_modules/lodash/_coreJsData.js","webpack:///./node_modules/slate/node_modules/lodash/_getValue.js","webpack:///./node_modules/slate/node_modules/lodash/_hashDelete.js","webpack:///./node_modules/slate/node_modules/lodash/_hashGet.js","webpack:///./node_modules/slate/node_modules/lodash/_hashHas.js","webpack:///./node_modules/slate/node_modules/lodash/_hashSet.js","webpack:///./node_modules/slate/node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/slate/node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/slate/node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/slate/node_modules/lodash/_listCacheHas.js","webpack:///./node_modules/slate/node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/slate/node_modules/lodash/_mapCacheDelete.js","webpack:///./node_modules/slate/node_modules/lodash/_isKeyable.js","webpack:///./node_modules/slate/node_modules/lodash/_mapCacheGet.js","webpack:///./node_modules/slate/node_modules/lodash/_mapCacheHas.js","webpack:///./node_modules/slate/node_modules/lodash/_mapCacheSet.js","webpack:///./node_modules/slate/node_modules/lodash/toString.js","webpack:///./node_modules/slate/node_modules/lodash/_baseToString.js","webpack:///./node_modules/slate/node_modules/lodash/_baseSet.js","webpack:///./node_modules/slate/node_modules/lodash/hasIn.js","webpack:///./node_modules/slate/node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/slate/node_modules/lodash/_hasPath.js","webpack:///./node_modules/slate/node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/slate/node_modules/lodash/flatten.js","webpack:///./node_modules/slate/node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/slate/node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/slate/node_modules/lodash/_overRest.js","webpack:///./node_modules/slate/node_modules/lodash/_apply.js","webpack:///./node_modules/slate/node_modules/lodash/_setToString.js","webpack:///./node_modules/slate/node_modules/lodash/_baseSetToString.js","webpack:///./node_modules/slate/node_modules/lodash/constant.js","webpack:///./node_modules/slate/node_modules/lodash/identity.js","webpack:///./node_modules/slate/node_modules/lodash/_shortOut.js","webpack:///./node_modules/slate/node_modules/lodash/omit.js","webpack:///./node_modules/slate/node_modules/lodash/_baseClone.js","webpack:///./node_modules/slate/node_modules/lodash/_Stack.js","webpack:///./node_modules/slate/node_modules/lodash/_stackClear.js","webpack:///./node_modules/slate/node_modules/lodash/_stackDelete.js","webpack:///./node_modules/slate/node_modules/lodash/_stackGet.js","webpack:///./node_modules/slate/node_modules/lodash/_stackHas.js","webpack:///./node_modules/slate/node_modules/lodash/_stackSet.js","webpack:///./node_modules/slate/node_modules/lodash/_arrayEach.js","webpack:///./node_modules/slate/node_modules/lodash/_baseAssign.js","webpack:///./node_modules/slate/node_modules/lodash/_baseTimes.js","webpack:///./node_modules/slate/node_modules/lodash/stubFalse.js","webpack:///./node_modules/slate/node_modules/lodash/isTypedArray.js","webpack:///./node_modules/slate/node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/slate/node_modules/lodash/_baseKeys.js","webpack:///./node_modules/slate/node_modules/lodash/_nativeKeys.js","webpack:///./node_modules/slate/node_modules/lodash/_baseAssignIn.js","webpack:///./node_modules/slate/node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/slate/node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/slate/node_modules/lodash/_cloneBuffer.js","webpack:///./node_modules/slate/node_modules/lodash/_copyArray.js","webpack:///./node_modules/slate/node_modules/lodash/_copySymbols.js","webpack:///./node_modules/slate/node_modules/lodash/_arrayFilter.js","webpack:///./node_modules/slate/node_modules/lodash/_copySymbolsIn.js","webpack:///./node_modules/slate/node_modules/lodash/_getAllKeys.js","webpack:///./node_modules/slate/node_modules/lodash/_DataView.js","webpack:///./node_modules/slate/node_modules/lodash/_Promise.js","webpack:///./node_modules/slate/node_modules/lodash/_Set.js","webpack:///./node_modules/slate/node_modules/lodash/_WeakMap.js","webpack:///./node_modules/slate/node_modules/lodash/_initCloneArray.js","webpack:///./node_modules/slate/node_modules/lodash/_initCloneByTag.js","webpack:///./node_modules/slate/node_modules/lodash/_Uint8Array.js","webpack:///./node_modules/slate/node_modules/lodash/_cloneDataView.js","webpack:///./node_modules/slate/node_modules/lodash/_cloneRegExp.js","webpack:///./node_modules/slate/node_modules/lodash/_cloneSymbol.js","webpack:///./node_modules/slate/node_modules/lodash/_cloneTypedArray.js","webpack:///./node_modules/slate/node_modules/lodash/_initCloneObject.js","webpack:///./node_modules/slate/node_modules/lodash/_baseCreate.js","webpack:///./node_modules/slate/node_modules/lodash/isMap.js","webpack:///./node_modules/slate/node_modules/lodash/_baseIsMap.js","webpack:///./node_modules/slate/node_modules/lodash/isSet.js","webpack:///./node_modules/slate/node_modules/lodash/_baseIsSet.js","webpack:///./node_modules/slate/node_modules/lodash/_baseUnset.js","webpack:///./node_modules/slate/node_modules/lodash/last.js","webpack:///./node_modules/slate/node_modules/lodash/_parent.js","webpack:///./node_modules/slate/node_modules/lodash/_baseSlice.js","webpack:///./node_modules/slate/node_modules/lodash/_customOmitClone.js","webpack:///./node_modules/slate/node_modules/lodash/isPlainObject.js"],"names":["n","generate","resetGenerator","KeyUtils","create","key","Error","setGenerator","func","_typeof","Symbol","iterator","obj","constructor","prototype","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","protoProps","staticProps","_extends","assign","arguments","source","hasOwnProperty","call","inherits","subClass","superClass","value","setPrototypeOf","__proto__","objectWithoutProperties","keys","indexOf","possibleConstructorReturn","self","ReferenceError","slicedToArray","arr","Array","isArray","sliceIterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","toConsumableArray","arr2","from","Data","this","attrs","isMap","fromJSON","object","fromJS","DEFAULTS","data","nodes","Document","_Record","getPrototypeOf","apply","toJSON","options","toArray","map","preserveKeys","isDocument","isList","_object$data","_object$key","_object$nodes","Node","createList","DEFAULTS$1","type","Inline","isInline","elements","list","isInlineList","any","every","item","DEFAULTS$2","Mark","isMark","createSet","isSet","createProperties","isMarkSet","DEFAULTS$3","marks","text","Leaf","updateMark","mark","newMark","equals","has","newMarks","withMutations","collection","remove","add","set","addMark","addMarks","set$$1","union","insertText","offset","string","slice","removeMark","m","isLeaf","createLeaves","leaves","size","invalid","result","cache","findLast","leaf","index","firstLeaf","first","unshift","splitLeaves","endOffset","left","right","find","startOffset","of","take","skip","_object$text","_object$marks","isLeafList","DEFAULTS$4","Text","getLeaves","decorations","decMarks","d","l","forEach","dec","start","end","hasStart","hasEnd","_Leaf$splitLeaves","_Leaf$splitLeaves2","before","bundle","_Leaf$splitLeaves3","_Leaf$splitLeaves4","middle","after","concat","x","removeText","setMark","properties","newProperties","merge","splitText","regenerateKey","mergeText","other","isText","isTextList","isNode","kind","Block","array","el","texts","node","isBlock","isNodeList","DEFAULTS$5","isBlockList","compare","path","min","pv","get","tv","create$1","crop","a","b","ca","cb","decrement","increment","newValue","newPath","isAbove","_crop","_crop2","p","t","isEqual","isYounger","_crop9","_crop10","pl","tl","Math","PathUtils","getAncestors","isAfter","_crop3","_crop4","isBefore","_crop5","_crop6","isOlder","_crop7","_crop8","isSibling","butLast","lift","drop","max","relate","av","transform","operation","position","pIndex","pEqual","pYounger","pAbove","np","paths","DEFAULTS$6","Point","isAfterPoint","point","isUnset","isAfterRange","range","isAtEndOfRange","isAtStartOfRange","isBeforePoint","isBeforeRange","isInRange","isAtEndOfNode","last","getLastText","isAtStartOfNode","getFirstText","isInNode","hasNode","moveBackward","moveForward","setOffset","moveTo","moveToStartOfNode","moveToEndOfNode","normalize","getNode","getPath","_text","getTextAtOffset","getOffset","getClosestBlock","getNextText","setKey","setPath","unset","get$$1","isPoint","_object$offset","_object$path","DEFAULTS$7","anchor","focus","Decoration","setProperties","_properties","isDecoration","Range","isRange","JSON","stringify","TYPES","block","change","decoration","document","editor","inline","selection","isObject","DEFAULTS$8","Selection","isSelection","DEFAULTS$9","isFocused","setIsFocused","setMarks","_object$isFocused","DEFAULTS$10","Value","insertNode","mapRanges","updatePoints","assertNode","mapPoints","mergeNode","newDocument","resolvePath","withPath","one","two","moveAnchorTo","moveFocusTo","moveNode","newIndex","_value5","removeNode","prev","getPreviousText","_range","moveStartTo","moveEndTo","setNode","resolveDecoration","setSelection","_value12","resolveSelection","splitNode","_range2","_value14","sel","createSelection","decs","createDecoration","filter","preserveData","preserveDecorations","preserveSelection","getClosestInline","getDescendant","getNextBlock","getPreviousBlock","getNextInline","getPreviousInline","getMarksAtRange","getActiveMarksAtRange","getLeafBlocksAtRange","getFragmentAtRange","getLeafInlinesAtRange","getTextsAtRange","isValue","_object$decorations","_object$document","_object$selection","debug","applyOperation","op","Operation","_op2","_op3","_path","_op4","_path2","_path3","_op6","_path4","_op7","_path5","_mark","_path6","_op9","_path7","_offset","_op10","_path8","_op11","_path9","_newProperties","_newProperties2","_newProperties3","_op14","_path10","debug$1","invertOperation","inversePath","transformedSibling","_inversePath","_inversePath2","_op5","OPERATION_ATTRIBUTES","add_mark","insert_node","insert_text","merge_node","move_node","remove_mark","remove_node","remove_text","set_mark","set_node","set_selection","set_value","split_node","DEFAULTS$11","invert","json","ATTRIBUTES","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","v","toJS","_v","_v2","_v3","_v4","_v5","return","isOperation","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isOperationList","DEFAULTS$12","operations","Change","o","isChange","_object$operations","CommandsPlugin","commands","onCommand","command","args","fn","onConstruct","registerCommand","SPACE","CHAMELEON","PUNCTUATION","isSurrogate","code","isWord","char","remaining","test","charAt","getCharLength","charCodeAt","getCharOffset","getWordOffset","started","TextUtils","getCharOffsetBackward","getCharOffsetForward","getWordOffsetBackward","getWordOffsetForward","deleteExpandedAtRange","isExpanded","deleteAtRange","hasDescendant","moveToStart","Commands$1","isCollapsed","withoutNormalizing","addMarkByKey","addMarkAtRange","snapshotSelection","startKey","endKey","isStartVoid","hasVoidParent","isEndVoid","startBlock","endBlock","isHanging","prevText","startVoid","getClosestVoid","nextText","removeNodeByKey","endVoid","_prevText","startText","endText","startLength","endLength","ancestor","getCommonAncestor","startChild","getFurthestAncestor","endChild","startParent","getParent","startParentIndex","endParentIndex","child","parent","_index","reverse","startChildIndex","endChildIndex","_parent","_index2","removeTextByKey","lonely","getFurthestOnlyChildAncestor","moveNodeByKey","mergeNodeByKey","voidParent","prevBlock","prevVoid","moveFocusBackward","traversed","deleteBackwardAtRange","deleteForwardAtRange","_range3","isVoid","nextBlock","_nextBlock","nextVoid","moveFocusForward","_next","wordOffset","startInline","extra","insertNodeByKey","atEnd","siblingText","splitRange","splitDescendantsByKey","fragment","mapDescendants","isAtStart","blocks","getBlocks","firstChild","lastChild","firstBlock","lastBlock","insertionNode","findInsertionNode","insertBlockAtRange","hasBlockChildren","lonelyChild","getFurthest","startIndex","nextChild","getNextSibling","nextNodes","skipUntil","lastIndex","findDescendant","inlineChild","inlineIndex","hasSingleNode","firstNode","fragmentInner","documentInner","matches","documentNode","insertInlineAtRange","assertDescendant","splitNodeByKey","insertTextAtRange","insertTextByKey","removeMarkAtRange","removeMarkByKey","setBlocksAtRange","sets","setNodeByKey","setInlinesAtRange","inlines","splitBlockAtRange","height","_range8","_value","h","isBackward","flip","moveAnchorToStartOfNode","setFocus","resolveRange","splitInlineAtRange","Infinity","_range9","toggleMarkAtRange","some","unwrapBlockAtRange","wrappers","getClosest","isSuperset","exists","toOrderedSet","toList","children","firstMatch","lastMatch","takeUntil","firstText","unwrapInlineAtRange","wrapBlockAtRange","clear","firstblock","lastblock","siblings","p1","p2","indexes","reduce","ind","wrapInlineAtRange","inlineParent","wrapInlineByKey","endInline","endIndex","startInner","startInnerIndex","endInner","startInlines","endInlines","startNode","endNode","wrapTextAtRange","prefix","suffix","startRange","endRange","moveToEnd","Commands$2","addMarksByPath","splitNodeByPath","insertNodeByPath","updated","isAtomic","setDecorations","original","previous","getPreviousSibling","newParentPath","removeMarksByPath","state","getTextsAsArray","newNode","parentPath","removeNodeByPath","removeTextByPath","insertTextByPath","prevProperties","replaceTextByPath","_options$target","textPath","textOffset","prevIndex","moveToRangeOfNode","parentIndex","grandPath","isFirst","isLast","moveNodeByPath","updatedPath","childIndex","childPath","wrapBlockByPath","wrapInlineByPath","_loop","method","_len3","_key3","assertPath","newKey","_len","_key","textKey","_len2","_key2","splitDescendantsByPath","Commands$3","save","_editor$tmp","tmp","undos","lastBatch","lastOperation","shouldMerge","batch","pop","_batch","takeLast","withoutSaving","redos","newData","setData","redo","_op","undo","inverse","_inverse","withoutMerging","Commands$4","proxy","_editor$value$selecti","_len41","_key41","select","pointEdgeObject","edge","toUpperCase","Edge","pointEdgeSideObject","side","Side","getDirectionNode","pointBackward","pointForward","isInBlock","isPreviousInVoid","isNextInVoid","pointWordBackward","pointName","pointWordForward","blur","deselect","moveAnchorBackward","moveAnchorWordBackward","moveAnchorForward","moveAnchorWordForward","_len4","_key4","_len5","_key5","moveAnchorToEndOfBlock","moveAnchorToEndOfInline","moveAnchorToEndOfDocument","moveAnchorToEndOfNode","moveToAnchor","moveAnchorToEndOfNextBlock","moveAnchorToEndOfNextInline","moveAnchorToEndOfNextText","_len6","_key6","moveAnchorToEndOfPreviousBlock","moveAnchorToEndOfPreviousInline","moveAnchorToEndOfPreviousText","moveAnchorToEndOfText","moveAnchorToStartOfBlock","moveAnchorToStartOfDocument","moveAnchorToStartOfInline","moveAnchorToStartOfNextBlock","moveAnchorToStartOfNextInline","moveAnchorToStartOfNextText","_len7","_key7","moveAnchorToStartOfPreviousBlock","moveAnchorToStartOfPreviousInline","moveAnchorToStartOfPreviousText","moveAnchorToStartOfText","_editor$moveAnchorBac","_len8","_key8","moveWordBackward","_len9","_key9","moveFocusWordBackward","moveToFocus","moveEndBackward","_len10","_key10","moveEndWordBackward","_len11","_key11","moveEndForward","_len12","_key12","moveEndWordForward","_len13","_key13","_len14","_key14","moveEndToEndOfBlock","moveEndToEndOfDocument","moveEndToEndOfNode","moveEndToEndOfInline","moveEndToEndOfNextBlock","moveEndToEndOfNextInline","moveEndToEndOfNextText","_len15","_key15","moveEndToEndOfPreviousBlock","moveEndToEndOfPreviousInline","moveEndToEndOfPreviousText","moveEndToEndOfText","moveEndToStartOfBlock","moveEndToStartOfDocument","moveEndToStartOfNode","moveEndToStartOfInline","moveEndToStartOfNextBlock","moveEndToStartOfNextInline","moveEndToStartOfNextText","_len16","_key16","moveEndToStartOfPreviousBlock","moveEndToStartOfPreviousInline","moveEndToStartOfPreviousText","moveEndToStartOfText","_len17","_key17","_len18","_key18","_len19","_key19","moveFocusWordForward","_len20","_key20","_len21","_key21","moveFocusToEndOfBlock","moveFocusToEndOfDocument","moveFocusToEndOfNode","moveFocusToEndOfInline","moveFocusToEndOfNextBlock","moveFocusToEndOfNextInline","moveFocusToEndOfNextText","_len22","_key22","moveFocusToEndOfPreviousBlock","moveFocusToEndOfPreviousInline","moveFocusToEndOfPreviousText","moveFocusToEndOfText","moveFocusToStartOfBlock","moveFocusToStartOfDocument","moveFocusToStartOfNode","moveFocusToStartOfInline","moveFocusToStartOfNextBlock","moveFocusToStartOfNextInline","moveFocusToStartOfNextText","_len23","_key23","moveFocusToStartOfPreviousBlock","moveFocusToStartOfPreviousInline","moveFocusToStartOfPreviousText","moveFocusToStartOfText","_editor$moveAnchorFor","_len24","_key24","moveWordForward","_editor$moveFocusWord","_len25","_key25","moveStartBackward","_len26","_key26","moveStartWordBackward","_len27","_key27","moveStartForward","_len28","_key28","moveStartWordForward","_len29","_key29","_len30","_key30","moveStartToEndOfBlock","moveStartToEndOfDocument","moveStartToEndOfNode","moveStartToEndOfInline","moveStartToEndOfNextBlock","moveStartToEndOfNextInline","moveStartToEndOfNextText","_len31","_key31","moveStartToEndOfPreviousBlock","moveStartToEndOfPreviousInline","moveStartToEndOfPreviousText","moveStartToEndOfText","moveStartToStartOfBlock","moveStartToStartOfDocument","moveStartToStartOfNode","moveStartToStartOfInline","moveStartToStartOfNextBlock","moveStartToStartOfNextInline","moveStartToStartOfNextText","_len32","_key32","moveStartToStartOfPreviousBlock","moveStartToStartOfPreviousInline","moveStartToStartOfPreviousText","moveStartToStartOfText","_len33","_key33","moveToEndOfBlock","moveToEndOfDocument","moveToEndOfInline","moveToEndOfNextBlock","moveToEndOfNextInline","moveToEndOfNextText","_len34","_key34","moveToEndOfPreviousBlock","moveToEndOfPreviousInline","moveToEndOfPreviousText","moveToEndOfText","moveToRangeOfDocument","_len35","_key35","moveToStartOfBlock","moveToStartOfDocument","moveToStartOfInline","moveToStartOfNextBlock","moveToStartOfNextInline","moveToStartOfNextText","_len36","_key36","moveToStartOfPreviousBlock","moveToStartOfPreviousInline","moveToStartOfPreviousText","moveToStartOfText","_options$snapshot","snapshot","k","setAnchor","_len37","_key37","setEnd","_len38","_key38","_len39","_key39","setStart","_len40","_key40","Commands$5","QueriesPlugin","queries","query","registerQuery","onQuery","ret","SlateError","_Error","_this","captureStackTrace","stack","SchemaPlugin","schema","rules","schemaRules","match","validateNode","r","testRules","failure","validateRules","normalizeNode","error","rule","defaultNormalize","delete","getTexts","_options$every","_options$match","valid","fail","_error","validateObject","validateType","validateData","validateMarks","validateText","validateFirst","validateLast","validateNodes","getMarks","def","_ret","replace","defs","count","lastCount","nextDef","validateParent","validatePrevious","validateNext","rewind","limit","lastMin","shift","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","deleteExpanded","Commands$6","CorePlugin","_options$plugins","plugins","isEmpty","_next2","_marks","_sel","deleteBackward","deleteCharBackward","deleteCharBackwardAtRange","deleteLineBackward","deleteLineBackwardAtRange","deleteWordBackward","deleteWordBackwardAtRange","deleteForward","deleteCharForward","deleteCharForwardAtRange","deleteLineForward","deleteLineForwardAtRange","deleteWordForward","deleteWordForwardAtRange","insertBlock","insertFragment","_value2","lastText","lastInline","isAppending","isInserting","insertFragmentAtRange","newTexts","includes","newText","insertInline","getInsertMarksAtRange","_marks2","_sel2","replaceMark","oldMark","setBlocks","setInlines","splitBlock","depth","splitInline","toggleMark","activeMarks","unwrapBlock","unwrapInline","wrapBlock","wrapInline","wrapText","isForward","debug$2","Editor","_options$controller","controller","_options$construct","construct","_attrs$onChange","onChange","_attrs$plugins","_attrs$readOnly","readOnly","_attrs$value","middleware","dirty","flushing","core","registerPlugin","run","setReadOnly","setValue","newDirtyPaths","getDirtyPaths","ancestors","table","getKeysToPathsTable","values","_ancestors","_ancestors2","nextPath","_ancestors3","previousPath","oldAncestors","newAncestors","_ancestors4","memo","transformed","Promise","resolve","then","flush","normalizeDirtyPaths","hasCommand","__command","hasQuery","__query","_this2","_this3","fns","overrides","_options$normalize","applyOperations","_this4","setOperationFlag","getFlag","unsetOperationFlag","withoutNormalization","normalizeNodeByPath","iterations","found","plugin","rest","commandsPlugin","queriesPlugin","schemaPlugin","mixin","Interface","Classes","Class","getOwnPropertyNames","name","desc","getOwnPropertyDescriptor","_name","entries","_ref","_ref2","camel","create$2","TYPE","is$$1","ObjectInterface","bind","toLowerCase","ModelInterface","ENABLED","LEAF","STORE_KEY","UNDEFINED","NULL","memoizeStore","WeakMap","memoize","property","noArgs","hasArgs","_memoizeStore$get","takesArguments","cachedValue","getIn","setIn","newChild","resetMemoization","useMemoization","enabled","NodeInterface","descendant","nested","getText","c","validate","ElementInterface","replaceNode","createPoint","resolvePoint","createRange","filterDescendants","forEachDescendant","findDescendantAndPath","pathToThisNode","foundPath","forEachDescendantWithPath","findFirstDescendantAndPath","findLastDescendantAndPath","_start","getMarksAtPosition","toSet","startPath","endPath","_getPreviousTextAndPa","getPreviousTextAndPath","_getPreviousTextAndPa2","_getNextTextAndPath","getNextTextAndPath","_getNextTextAndPath2","startMarks","endMarks","intersect","_getNextTextAndPath3","_getNextTextAndPath4","_getNextTextAndPath5","_getNextTextAndPath6","current","getBlocksAsArray","isLeafBlock","getBlocksAtRange","getBlocksAtRangeAsArray","getLeafBlocksAtRangeAsArray","getBlocksByType","getBlocksByTypeAsArray","getChild","getDecorations","getDepth","startAt","targetPath","targetPosition","mode","getFurthestBlock","getFurthestInline","getInlines","getInlinesAsArray","isLeafInline","getInlinesAtRange","getInlinesAtRangeAsArray","getLeafInlinesAtRangeAsArray","getInlinesByType","getInlinesByTypeAsArray","_range5","getLeafBlocksBetweenPathPositionsAsArray","childStartPath","childEndPath","getTextsAtRangeAsArray","getMarksAsArray","currentMarks","closestBlock","_previous","previousText","getOrderedMarksAtRange","getMarksByType","getMarksByTypeAsArray","getNextDeepMatchingNodeAndPath","getNextNode","getNextMatchingNodeAndPath","nextNode","_match","childMatch","_childMatch","_childMatch2","getNodesAtRange","_range6","onStartEdge","onEndEdge","relativeStartPath","relativeEndPath","_stack$peek","peek","pushAll","getOffsetAtRange","getOrderedMarks","getOrderedMarksBetweenPositions","getTextsBetweenPathPositionsAsArray","getOrderedMarksByType","getPreviousDeepMatchingNodeAndPath","getRootBlocksAtRange","getRootInlinesAtRange","getRootInlinesAtRangeAsArray","_this5","getPreviousNode","getPreviousMatchingNodeAndPath","previousNode","_match2","_childMatch3","_childMatch4","getSelectionIndexes","isSelected","getTextDirection","dir","_range10","getTextsBetweenPositionsAsArray","hasChild","hasInlineChildren","splice","isNodeInRange","toStart","toEnd","mapChildren","_this6","_this7","deep","flatMap","deleteIn","_child$splitText","_child$splitText2","befores","afters","_loop2","_iteratorNormalCompletion$1","_didIteratorError$1","_iteratorError$1","_step$1","_iterator$1","RangeInterface","setPoints","_values","updater","toRange","freeGlobal","freeSelf","root","Function","module","exports","isObjectLike","baseIsNative","getValue","getNative","isKey","stringToPath","toString","castPath","getRawTag","objectToString","symToStringTag","toStringTag","baseGetTag","assignValue","baseAssignValue","copyObject","customizer","isNew","nativeCreate","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entry","eq","assocIndexOf","isKeyable","getMapData","__data__","isSymbol","toKey","Map","objValue","reIsUint","isIndex","baseIsArguments","objectProto","propertyIsEnumerable","isArguments","isLength","arrayPush","arrayLikeKeys","baseKeys","isArrayLike","baseUnary","freeExports","nodeType","freeModule","freeProcess","process","nodeUtil","types","require","binding","e","isPrototype","Ctor","arrayFilter","stubArray","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","getPrototype","overArg","DataView","Set","toSource","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","ctorString","Uint8Array","cloneArrayBuffer","arrayBuffer","byteLength","baseGet","global","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","isFunction","tag","funcToString","arrayMap","iteratee","flatten","overRest","setToString","flatRest","baseTimes","isBuffer","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","String","stubFalse","Buffer","arg","baseKeysIn","keysIn","getSymbolsIn","baseGetAllKeys","keysFunc","symbolsFunc","getAllKeysIn","log","_console","console","formatArgs","useColors","namespace","humanize","diff","color","lastC","namespaces","storage","setItem","removeItem","load","getItem","env","DEBUG","window","__nwjs","navigator","userAgent","documentElement","style","WebkitAppearance","firebug","exception","parseInt","RegExp","$1","localstorage","localStorage","colors","formatters","j","message","setup","selectColor","hash","createDebug","abs","prevTime","curr","Number","Date","ms","coerce","format","formatter","val","logFn","destroy","extend","init","instances","delimiter","default","disable","enable","names","skips","split","len","substr","basePick","pick","basePickBy","hasIn","baseSet","predicate","reIsDeepProp","reIsPlainProp","nativeObjectToString","isOwn","unmasked","memoizeCapped","rePropName","reEscapeChar","number","quote","subString","resolver","memoized","Cache","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","isMasked","reIsHostCtor","funcProto","reIsNative","uid","coreJsData","maskSrcKey","exec","IE_PROTO","baseToString","symbolProto","symbolToString","baseHasIn","hasPath","hasFunc","baseFlatten","isFlattenable","isStrict","spreadableSymbol","isConcatSpreadable","nativeMax","otherArgs","thisArg","baseSetToString","shortOut","constant","identity","nativeNow","now","lastCalled","stamp","baseClone","baseUnset","customOmitClone","omit","isDeep","CLONE_DEEP_FLAG","Stack","arrayEach","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","initCloneArray","initCloneByTag","initCloneObject","cloneableTags","bitmask","isFlat","isFull","isFunc","stacked","subValue","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","LARGE_ARRAY_SIZE","baseIsTypedArray","nodeIsTypedArray","typedArrayTags","nativeKeys","nativeKeysIn","isProto","allocUnsafe","buffer","copy","resIndex","input","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","dataView","byteOffset","reFlags","regexp","symbolValueOf","valueOf","typedArray","baseCreate","objectCreate","proto","baseIsMap","nodeIsMap","baseIsSet","nodeIsSet","baseSlice","isPlainObject","objectCtorString"],"mappings":"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","file":"npm.slate-c5b4abc36a10605c3672.js","sourcesContent":["import isPlainObject from 'is-plain-object';\nimport { Map, List, Record, Set, is, OrderedSet, Stack } from 'immutable';\nimport invariant from 'tiny-invariant';\nimport warning from 'tiny-warning';\nimport Debug from 'debug';\nimport { reverse } from 'esrever';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport direction from 'direction';\n\n/**\n * An auto-incrementing index for generating keys.\n *\n * @type {Number}\n */\n\nvar n = void 0;\n\n/**\n * The global key generating function.\n *\n * @type {Function}\n */\n\nvar generate = void 0;\n\n/**\n * Create a key, using a provided key if available.\n *\n * @param {String|Void} key\n * @return {String}\n */\n\nfunction create(key) {\n  if (key == null) {\n    return generate();\n  }\n\n  if (typeof key === 'string') {\n    return key;\n  }\n\n  throw new Error('Keys must be strings, but you passed: ' + key);\n}\n\n/**\n * Set a different unique ID generating `function`.\n *\n * @param {Function} func\n */\n\nfunction setGenerator(func) {\n  generate = func;\n}\n\n/**\n * Reset the key generating function to its initial state.\n */\n\nfunction resetGenerator() {\n  n = 0;\n  generate = function generate() {\n    return '' + n++;\n  };\n}\n\n/**\n * Set the initial state.\n */\n\nresetGenerator();\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar KeyUtils = {\n  create: create,\n  setGenerator: setGenerator,\n  resetGenerator: resetGenerator\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/**\n * Data.\n *\n * This isn't an immutable record, it's just a thin wrapper around `Map` so that\n * we can allow for more convenient creation.\n *\n * @type {Object}\n */\n\nvar Data = function () {\n  function Data() {\n    classCallCheck(this, Data);\n  }\n\n  createClass(Data, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Data` with `attrs`.\n     *\n     * @param {Object|Data|Map} attrs\n     * @return {Data} data\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Map.isMap(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Data.fromJSON(attrs);\n      }\n\n      throw new Error('`Data.create` only accepts objects or maps, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Data` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Data}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      return new Map(object);\n    }\n\n    /**\n     * Alias `fromJS`.\n     */\n\n  }]);\n  return Data;\n}();\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nData.fromJS = Data.fromJSON;\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined\n\n  /**\n   * Document.\n   *\n   * @type {Document}\n   */\n\n};\nvar Document = function (_Record) {\n  inherits(Document, _Record);\n\n  function Document() {\n    classCallCheck(this, Document);\n    return possibleConstructorReturn(this, (Document.__proto__ || Object.getPrototypeOf(Document)).apply(this, arguments));\n  }\n\n  createClass(Document, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the document.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Document` with `attrs`.\n     *\n     * @param {Object|Array|List|Text} attrs\n     * @return {Document}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Document.isDocument(attrs)) {\n        return attrs;\n      }\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        attrs = { nodes: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Document.fromJSON(attrs);\n      }\n\n      throw new Error('`Document.create` only accepts objects, arrays, lists or documents, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Document` from a JSON `object`.\n     *\n     * @param {Object|Document} object\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Document.isDocument(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes;\n\n\n      var document = new Document({\n        key: key,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n\n      return document;\n    }\n  }]);\n  return Document;\n}(Record(DEFAULTS));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$1 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n\n  /**\n   * Inline.\n   *\n   * @type {Inline}\n   */\n\n};\nvar Inline = function (_Record) {\n  inherits(Inline, _Record);\n\n  function Inline() {\n    classCallCheck(this, Inline);\n    return possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  createClass(Inline, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the inline.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Inline` with `attrs`.\n     *\n     * @param {Object|String|Inline} attrs\n     * @return {Inline}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Inline.isInline(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Inline.fromJSON(attrs);\n      }\n\n      throw new Error('`Inline.create` only accepts objects, strings or inlines, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Inlines` from an array.\n     *\n     * @param {Array<Inline|Object>|List<Inline|Object>} elements\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Inline.create));\n        return list;\n      }\n\n      throw new Error('`Inline.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a `Inline` from a JSON `object`.\n     *\n     * @param {Object|Inline} object\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Inline.isInline(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n\n      if (typeof type !== 'string') {\n        throw new Error('`Inline.fromJS` requires a `type` string.');\n      }\n\n      var inline = new Inline({\n        key: key,\n        type: type,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n\n      return inline;\n    }\n\n    /**\n     * Check if `any` is a list of inlines.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInlineList',\n    value: function isInlineList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Inline.isInline(item);\n      });\n    }\n  }]);\n  return Inline;\n}(Record(DEFAULTS$1));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$2 = {\n  data: undefined,\n  type: undefined\n\n  /**\n   * Mark.\n   *\n   * @type {Mark}\n   */\n\n};\nvar Mark = function (_Record) {\n  inherits(Mark, _Record);\n\n  function Mark() {\n    classCallCheck(this, Mark);\n    return possibleConstructorReturn(this, (Mark.__proto__ || Object.getPrototypeOf(Mark)).apply(this, arguments));\n  }\n\n  createClass(Mark, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the mark.\n     *\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON()\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Mark` with `attrs`.\n     *\n     * @param {Object|Mark} attrs\n     * @return {Mark}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Mark.fromJSON(attrs);\n      }\n\n      throw new Error('`Mark.create` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a set of marks.\n     *\n     * @param {Array<Object|Mark>} elements\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'createSet',\n    value: function createSet(elements) {\n      if (Set.isSet(elements) || Array.isArray(elements)) {\n        var marks = new Set(elements.map(Mark.create));\n        return marks;\n      }\n\n      if (elements == null) {\n        return Set();\n      }\n\n      throw new Error('`Mark.createSet` only accepts sets, arrays or null, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable mark properties from `attrs`.\n     *\n     * @param {Object|String|Mark} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Mark.createProperties` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Mark` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Mark}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          type = object.type;\n\n\n      if (typeof type !== 'string') {\n        throw new Error('`Mark.fromJS` requires a `type` string.');\n      }\n\n      var mark = new Mark({\n        type: type,\n        data: new Map(data)\n      });\n\n      return mark;\n    }\n\n    /**\n     * Check if `any` is a set of marks.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isMarkSet',\n    value: function isMarkSet(any) {\n      return Set.isSet(any) && any.every(function (item) {\n        return Mark.isMark(item);\n      });\n    }\n  }]);\n  return Mark;\n}(Record(DEFAULTS$2));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$3 = {\n  marks: undefined,\n  text: undefined\n\n  /**\n   * Leaf.\n   *\n   * @type {Leaf}\n   */\n\n};\nvar Leaf = function (_Record) {\n  inherits(Leaf, _Record);\n\n  function Leaf() {\n    classCallCheck(this, Leaf);\n    return possibleConstructorReturn(this, (Leaf.__proto__ || Object.getPrototypeOf(Leaf)).apply(this, arguments));\n  }\n\n  createClass(Leaf, [{\n    key: 'updateMark',\n\n\n    /**\n     * Update a `mark` at leaf, replace with newMark\n     *\n     * @param {Mark} mark\n     * @param {Mark} newMark\n     * @returns {Leaf}\n     */\n\n    value: function updateMark(mark, newMark) {\n      var marks = this.marks;\n\n      if (newMark.equals(mark)) return this;\n      if (!marks.has(mark)) return this;\n      var newMarks = marks.withMutations(function (collection) {\n        collection.remove(mark).add(newMark);\n      });\n      return this.set('marks', newMarks);\n    }\n\n    /**\n     * Add a `mark` to the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(mark) {\n      var marks = this.marks;\n\n      return this.set('marks', marks.add(mark));\n    }\n\n    /**\n     * Add a `set` of marks to the leaf.\n     *\n     * @param {Set<Mark>} set\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(set$$1) {\n      var marks = this.marks;\n\n      return this.set('marks', marks.union(set$$1));\n    }\n\n    /**\n     * Insert a text `string` into the leaf at `offset`.\n     *\n     * @param {Number} offset\n     * @param {String} string\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(offset, string) {\n      var text = this.text;\n\n      var next = text.slice(0, offset) + string + text.slice(offset);\n      return this.set('text', next);\n    }\n\n    /**\n     * Remove a `mark` from the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(mark) {\n      var marks = this.marks;\n\n      return this.set('marks', marks.remove(mark));\n    }\n\n    /**\n     * Return a JSON representation of the leaf.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        text: this.text,\n        marks: this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Leaf` with `attrs`.\n     *\n     * @param {Object|Leaf} attrs\n     * @return {Leaf}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Leaf.isLeaf(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { text: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Leaf.fromJSON(attrs);\n      }\n\n      throw new Error('`Leaf.create` only accepts objects, strings or leaves, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a valid List of `Leaf` from `leaves`\n     *\n     * @param {List<Leaf>} leaves\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createLeaves',\n    value: function createLeaves(leaves) {\n      if (leaves.size <= 1) return leaves;\n\n      var invalid = false;\n\n      // TODO: we can make this faster with [List] and then flatten\n      var result = List().withMutations(function (cache) {\n        // Search from the leaves left end to find invalid node;\n        leaves.findLast(function (leaf, index) {\n          var firstLeaf = cache.first();\n\n          // If the first leaf of cache exist, check whether the first leaf is connectable with the current leaf\n          if (firstLeaf) {\n            // If marks equals, then the two leaves can be connected\n            if (firstLeaf.marks.equals(leaf.marks)) {\n              invalid = true;\n              cache.set(0, firstLeaf.set('text', '' + leaf.text + firstLeaf.text));\n              return;\n            }\n\n            // If the cached leaf is empty, drop the empty leaf with the upcoming leaf\n            if (firstLeaf.text === '') {\n              invalid = true;\n              cache.set(0, leaf);\n              return;\n            }\n\n            // If the current leaf is empty, drop the leaf\n            if (leaf.text === '') {\n              invalid = true;\n              return;\n            }\n          }\n\n          cache.unshift(leaf);\n        });\n      });\n\n      if (!invalid) return leaves;\n      return result;\n    }\n\n    /**\n     * Split a list of leaves to two lists; if the leaves are valid leaves, the returned leaves are also valid\n     * Corner Cases:\n     *   1. if offset is smaller than 0, then return [List(), leaves]\n     *   2. if offset is bigger than the text length, then return [leaves, List()]\n     *\n     * @param {List<Leaf> leaves\n     * @return {Array<List<Leaf>>}\n     */\n\n  }, {\n    key: 'splitLeaves',\n    value: function splitLeaves(leaves, offset) {\n      if (offset < 0) return [List(), leaves];\n\n      if (leaves.size === 0) {\n        return [List(), List()];\n      }\n\n      var endOffset = 0;\n      var index = -1;\n      var left = void 0,\n          right = void 0;\n\n      leaves.find(function (leaf) {\n        index++;\n        var startOffset = endOffset;\n        var text = leaf.text;\n\n        endOffset += text.length;\n\n        if (endOffset < offset) return false;\n        if (startOffset > offset) return false;\n\n        var length = offset - startOffset;\n        left = leaf.set('text', text.slice(0, length));\n        right = leaf.set('text', text.slice(length));\n        return true;\n      });\n\n      if (!left) return [leaves, List()];\n\n      if (left.text === '') {\n        if (index === 0) {\n          return [List.of(left), leaves];\n        }\n\n        return [leaves.take(index), leaves.skip(index)];\n      }\n\n      if (right.text === '') {\n        if (index === leaves.size - 1) {\n          return [leaves, List.of(right)];\n        }\n\n        return [leaves.take(index + 1), leaves.skip(index + 1)];\n      }\n\n      return [leaves.take(index).push(left), leaves.skip(index + 1).unshift(right)];\n    }\n\n    /**\n     * Create a `Leaf` list from `attrs`.\n     *\n     * @param {Array<Leaf|Object>|List<Leaf|Object>} attrs\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Leaf.create));\n        return list;\n      }\n\n      throw new Error('`Leaf.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Leaf` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$text = object.text,\n          text = _object$text === undefined ? '' : _object$text,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? [] : _object$marks;\n\n\n      var leaf = new Leaf({\n        text: text,\n        marks: Set(marks.map(Mark.fromJSON))\n      });\n\n      return leaf;\n    }\n\n    /**\n     * Check if `any` is a list of leaves.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafList',\n    value: function isLeafList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Leaf.isLeaf(item);\n      });\n    }\n  }]);\n  return Leaf;\n}(Record(DEFAULTS$3));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$4 = {\n  key: undefined,\n  marks: undefined,\n  text: undefined\n\n  /**\n   * Text.\n   *\n   * @type {Text}\n   */\n\n};\nvar Text = function (_Record) {\n  inherits(Text, _Record);\n\n  function Text() {\n    classCallCheck(this, Text);\n    return possibleConstructorReturn(this, (Text.__proto__ || Object.getPrototypeOf(Text)).apply(this, arguments));\n  }\n\n  createClass(Text, [{\n    key: 'addMark',\n\n\n    /**\n     * Add a `mark`.\n     *\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n    value: function addMark(mark) {\n      mark = Mark.create(mark);\n      var marks = this.marks;\n\n      var next = marks.add(mark);\n      var node = this.set('marks', next);\n      return node;\n    }\n\n    /**\n     * Add a set of `marks`.\n     *\n     * @param {Set<Mark>} marks\n     * @return {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(marks) {\n      marks = Mark.createSet(marks);\n      var node = this.set('marks', this.marks.union(marks));\n      return node;\n    }\n\n    /**\n     * Get the leaves for the text node, with `decorations`.\n     *\n     * @param {List<Decoration>} decorations\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'getLeaves',\n    value: function getLeaves(decorations) {\n      var key = this.key,\n          text = this.text,\n          marks = this.marks;\n\n      var leaf = Leaf.create({ text: text, marks: marks });\n      var leaves = Leaf.createList([leaf]);\n\n      // PERF: We can exit early without decorations.\n      if (!decorations || decorations.size === 0) {\n        return leaves;\n      }\n\n      // HACK: this shouldn't be necessary, because the loop below should handle\n      // the `0` case without failures. It may already even, not sure.\n      if (text === '') {\n        var decMarks = decorations.map(function (d) {\n          return d.mark;\n        });\n        var l = Leaf.create({ marks: decMarks });\n        return List([l]);\n      }\n\n      decorations.forEach(function (dec) {\n        var start = dec.start,\n            end = dec.end,\n            mark = dec.mark;\n\n        var hasStart = start.key === key;\n        var hasEnd = end.key === key;\n\n        if (hasStart && hasEnd) {\n          var index = hasStart ? start.offset : 0;\n          var length = hasEnd ? end.offset - index : text.length - index;\n\n          if (length < 1) return;\n          if (index >= text.length) return;\n\n          if (index !== 0 || length < text.length) {\n            var _Leaf$splitLeaves = Leaf.splitLeaves(leaves, index),\n                _Leaf$splitLeaves2 = slicedToArray(_Leaf$splitLeaves, 2),\n                before = _Leaf$splitLeaves2[0],\n                bundle = _Leaf$splitLeaves2[1];\n\n            var _Leaf$splitLeaves3 = Leaf.splitLeaves(bundle, length),\n                _Leaf$splitLeaves4 = slicedToArray(_Leaf$splitLeaves3, 2),\n                middle = _Leaf$splitLeaves4[0],\n                after = _Leaf$splitLeaves4[1];\n\n            leaves = before.concat(middle.map(function (x) {\n              return x.addMark(mark);\n            }), after);\n            return;\n          }\n        }\n\n        leaves = leaves.map(function (x) {\n          return x.addMark(mark);\n        });\n      });\n\n      if (leaves === this.leaves) return leaves;\n      return Leaf.createLeaves(leaves);\n    }\n\n    /**\n     * Insert `text` at `index`.\n     *\n     * @param {Number} index\n     * @param {String} string\n     * @return {Text}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(index, string) {\n      var text = this.text;\n\n      var next = text.slice(0, index) + string + text.slice(index);\n      var node = this.set('text', next);\n      return node;\n    }\n\n    /**\n     * Remove a `mark`.\n     *\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(mark) {\n      mark = Mark.create(mark);\n      var marks = this.marks;\n\n      var next = marks.remove(mark);\n      var node = this.set('marks', next);\n      return node;\n    }\n\n    /**\n     * Remove text from the text node at `index` for `length`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(index, length) {\n      var text = this.text;\n\n      var next = text.slice(0, index) + text.slice(index + length);\n      var node = this.set('text', next);\n      return node;\n    }\n\n    /**\n     * Return a JSON representation of the text.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        text: this.text,\n        marks: this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n\n    /**\n     * Set a `newProperties` on an existing `mark`.\n     *\n     * @param {Object} mark\n     * @param {Object} newProperties\n     * @return {Text}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(properties, newProperties) {\n      var marks = this.marks;\n\n      var mark = Mark.create(properties);\n      var newMark = mark.merge(newProperties);\n      var next = marks.remove(mark).add(newMark);\n      var node = this.set('marks', next);\n      return node;\n    }\n\n    /**\n     * Split the node into two at `index`.\n     *\n     * @param {Number} index\n     * @returns {Array<Text>}\n     */\n\n  }, {\n    key: 'splitText',\n    value: function splitText(index) {\n      var text = this.text;\n\n      var one = this.set('text', text.slice(0, index));\n      var two = this.set('text', text.slice(index)).regenerateKey();\n      return [one, two];\n    }\n\n    /**\n     * Merge the node with an `other` text node.\n     *\n     * @param {Text} other\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'mergeText',\n    value: function mergeText(other) {\n      var next = this.text + other.text;\n      var node = this.set('text', next);\n      return node;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Text` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Text} attrs\n     * @return {Text}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (Text.isText(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { text: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Text.fromJSON(attrs);\n      }\n\n      throw new Error('`Text.create` only accepts objects, arrays, strings or texts, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Texts` from `elements`.\n     *\n     * @param {Array<Text|Object>|List<Text|Object>} elements\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Text.create));\n        return list;\n      }\n\n      throw new Error('`Text.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a `Text` from a JSON `object`.\n     *\n     * @param {Object|Text} object\n     * @return {Text}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Text.isText(object)) {\n        return object;\n      }\n\n      invariant(object.leaves == null, 'As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.');\n\n      var _object$text = object.text,\n          text = _object$text === undefined ? '' : _object$text,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? [] : _object$marks,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key;\n\n      var node = new Text({\n        key: key,\n        text: text,\n        marks: Mark.createSet(marks)\n      });\n\n      return node;\n    }\n\n    /**\n     * Check if `any` is a list of texts.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isTextList',\n    value: function isTextList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Text.isText(item);\n      });\n    }\n  }]);\n  return Text;\n}(Record(DEFAULTS$4));\n\n/**\n * A pseudo-model that is used for its static methods only.\n *\n * @type {Node}\n */\n\nvar Node = function () {\n  function Node() {\n    classCallCheck(this, Node);\n  }\n\n  createClass(Node, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Node` with `attrs`.\n     *\n     * @param {Object|Node} attrs\n     * @return {Node}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Node.isNode(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        var object = attrs.object;\n\n\n        if (!object && attrs.kind) {\n          warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n\n          object = attrs.kind;\n        }\n\n        switch (object) {\n          case 'block':\n            return Block.create(attrs);\n          case 'document':\n            return Document.create(attrs);\n          case 'inline':\n            return Inline.create(attrs);\n          case 'text':\n            return Text.create(attrs);\n\n          default:\n            {\n              throw new Error('`Node.create` requires a `object` string.');\n            }\n        }\n      }\n\n      throw new Error('`Node.create` only accepts objects or nodes but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Nodes` from an array.\n     *\n     * @param {Array<Object|Node>} elements\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var array = [];\n\n        elements.forEach(function (el) {\n          if (el && el.object === 'text' && el.leaves && Array.isArray(el.leaves)) {\n            warning(false, 'As of slate@0.46, the `leaves` property of Text nodes has been removed. Instead, each text node contains a string of text and a unique set of marks and leaves are unnecessary.');\n\n            var texts = Text.createList(el.leaves).toArray();\n            array = array.concat(texts);\n            return;\n          }\n\n          var node = Node.create(el);\n          array.push(node);\n        });\n\n        var list = List(array);\n        return list;\n      }\n\n      throw new Error('`Node.createList` only accepts lists or arrays, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable node properties from `attrs`.\n     *\n     * @param {Object|String|Node} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs) || Inline.isInline(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Node` from a JSON `value`.\n     *\n     * @param {Object} value\n     * @return {Node}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(value) {\n      var object = value.object;\n\n\n      if (!object && value.kind) {\n        warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n\n        object = value.kind;\n      }\n\n      switch (object) {\n        case 'block':\n          return Block.fromJSON(value);\n        case 'document':\n          return Document.fromJSON(value);\n        case 'inline':\n          return Inline.fromJSON(value);\n        case 'text':\n          return Text.fromJSON(value);\n\n        default:\n          {\n            throw new Error('`Node.fromJSON` requires an `object` of either \\'block\\', \\'document\\', \\'inline\\' or \\'text\\', but you passed: ' + value);\n          }\n      }\n    }\n\n    /**\n     * Check if `any` is a `Node`.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNode',\n    value: function isNode(any) {\n      return Block.isBlock(any) || Document.isDocument(any) || Inline.isInline(any) || Text.isText(any);\n    }\n\n    /**\n     * Check if `any` is a list of nodes.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNodeList',\n    value: function isNodeList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Node.isNode(item);\n      });\n    }\n  }]);\n  return Node;\n}();\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$5 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n\n  /**\n   * Block.\n   *\n   * @type {Block}\n   */\n\n};\nvar Block = function (_Record) {\n  inherits(Block, _Record);\n\n  function Block() {\n    classCallCheck(this, Block);\n    return possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).apply(this, arguments));\n  }\n\n  createClass(Block, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the block.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Block` from `attrs`.\n     *\n     * @param {Object|String|Block} attrs\n     * @return {Block}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = { type: attrs };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Block.fromJSON(attrs);\n      }\n\n      throw new Error('`Block.create` only accepts objects, strings or blocks, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Blocks` from `attrs`.\n     *\n     * @param {Array<Block|Object>|List<Block|Object>} attrs\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Block.create));\n        return list;\n      }\n\n      throw new Error('`Block.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Block` from a JSON `object`.\n     *\n     * @param {Object|Block} object\n     * @return {Block}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Block.isBlock(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n\n      if (typeof type !== 'string') {\n        throw new Error('`Block.fromJSON` requires a `type` string.');\n      }\n\n      var block = new Block({\n        key: key,\n        type: type,\n        data: Map(data),\n        nodes: Node.createList(nodes)\n      });\n\n      return block;\n    }\n\n    /**\n     * Check if `any` is a block list.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBlockList',\n    value: function isBlockList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Block.isBlock(item);\n      });\n    }\n  }]);\n  return Block;\n}(Record(DEFAULTS$5));\n\n/**\n * Compare paths `path` and `target` to see which is before or after.\n *\n * @param {List} path\n * @param {List} target\n * @return {Number|Null}\n */\n\nfunction compare(path, target) {\n  var m = min(path, target);\n\n  for (var i = 0; i < m; i++) {\n    var pv = path.get(i);\n    var tv = target.get(i);\n\n    // If the path's value is ever less than the target's, it's before.\n    if (pv < tv) return -1;\n\n    // If the target's value is ever less than the path's, it's after.\n    if (pv > tv) return 1;\n  }\n\n  // Paths should now be equal, otherwise something is wrong\n  return path.size === target.size ? 0 : null;\n}\n\n/**\n * Create a path from `attrs`.\n *\n * @param {Array|List} attrs\n * @return {List}\n */\n\nfunction create$1(attrs) {\n  if (attrs == null) {\n    return null;\n  }\n\n  if (List.isList(attrs)) {\n    return attrs;\n  }\n\n  if (Array.isArray(attrs)) {\n    return List(attrs);\n  }\n\n  throw new Error('Paths can only be created from arrays or lists, but you passed: ' + attrs);\n}\n\n/**\n * Crop paths `a` and `b` to an equal size, defaulting to the shortest.\n *\n * @param {List} a\n * @param {List} b\n */\n\nfunction crop(a, b) {\n  var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : min(a, b);\n\n  var ca = a.slice(0, size);\n  var cb = b.slice(0, size);\n  return [ca, cb];\n}\n\n/**\n * Decrement a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\nfunction decrement(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n\n  return increment(path, 0 - n, index);\n}\n\n/**\n * Get all ancestor paths of th given path.\n *\n * @param {List} path\n * @returns {List}\n */\n\nfunction getAncestors(path) {\n  var ancestors = List().withMutations(function (list) {\n    for (var i = 0; i < path.size; i++) {\n      list.push(path.slice(0, i));\n    }\n  });\n\n  return ancestors;\n}\n\n/**\n * Increment a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\nfunction increment(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n\n  var value = path.get(index);\n  var newValue = value + n;\n  var newPath = path.set(index, newValue);\n  return newPath;\n}\n\n/**\n * Is a `path` above another `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isAbove(path, target) {\n  var _crop = crop(path, target),\n      _crop2 = slicedToArray(_crop, 2),\n      p = _crop2[0],\n      t = _crop2[1];\n\n  return path.size < target.size && compare(p, t) === 0;\n}\n\n/**\n * Is a `path` after another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isAfter(path, target) {\n  var _crop3 = crop(path, target),\n      _crop4 = slicedToArray(_crop3, 2),\n      p = _crop4[0],\n      t = _crop4[1];\n\n  return compare(p, t) === 1;\n}\n\n/**\n * Is a `path` before another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isBefore(path, target) {\n  var _crop5 = crop(path, target),\n      _crop6 = slicedToArray(_crop5, 2),\n      p = _crop6[0],\n      t = _crop6[1];\n\n  return compare(p, t) === -1;\n}\n\n/**\n * Is a `path` equal to another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isEqual(path, target) {\n  return path.equals(target);\n}\n\n/**\n * Is a `path` older than a `target` path? Meaning that it ends as an older\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isOlder(path, target) {\n  var index = path.size - 1;\n\n  var _crop7 = crop(path, target, index),\n      _crop8 = slicedToArray(_crop7, 2),\n      p = _crop8[0],\n      t = _crop8[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl > tl;\n}\n\n/**\n * Is a `path` a sibling of a `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isSibling(path, target) {\n  if (path.size !== target.size) return false;\n  var p = path.butLast();\n  var t = target.butLast();\n  return p.equals(t);\n}\n\n/**\n * Is a `path` younger than a `target` path? Meaning that it ends as a younger\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\nfunction isYounger(path, target) {\n  var index = path.size - 1;\n\n  var _crop9 = crop(path, target, index),\n      _crop10 = slicedToArray(_crop9, 2),\n      p = _crop10[0],\n      t = _crop10[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl < tl;\n}\n\n/**\n * Lift a `path` to refer to its parent.\n *\n * @param {List} path\n * @return {List}\n */\n\nfunction lift(path) {\n  var parent = path.slice(0, -1);\n  return parent;\n}\n\n/**\n * Drop a `path`, returning the path from the first child.\n *\n * @param {List} path\n * @return {List}\n */\n\nfunction drop(path) {\n  var relative = path.slice(1);\n  return relative;\n}\n\n/**\n * Get the maximum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\nfunction max(a, b) {\n  var n = Math.max(a.size, b.size);\n  return n;\n}\n\n/**\n * Get the minimum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\nfunction min(a, b) {\n  var n = Math.min(a.size, b.size);\n  return n;\n}\n\n/**\n * Get the common ancestor path of path `a` and path `b`.\n *\n * @param {List} a\n * @param {List} b\n * @return {List}\n */\n\nfunction relate(a, b) {\n  var array = [];\n\n  for (var i = 0; i < a.size && i < b.size; i++) {\n    var av = a.get(i);\n    var bv = b.get(i);\n\n    // If the values aren't equal, they've diverged and don't share an ancestor.\n    if (av !== bv) break;\n\n    // Otherwise, the current value is still a common ancestor.\n    array.push(av);\n  }\n\n  var path = create$1(array);\n  return path;\n}\n\n/**\n * Transform a `path` by an `operation`, adjusting it to stay current.\n *\n * @param {List} path\n * @param {Operation} operation\n * @return {List<List>}\n */\n\nfunction transform(path, operation) {\n  var type = operation.type,\n      position = operation.position,\n      p = operation.path;\n\n\n  if (type === 'add_mark' || type === 'insert_text' || type === 'remove_mark' || type === 'remove_text' || type === 'set_mark' || type === 'set_node' || type === 'set_selection' || type === 'set_value' || path.size === 0) {\n    return List([path]);\n  }\n\n  var pIndex = p.size - 1;\n  var pEqual = isEqual(p, path);\n  var pYounger = isYounger(p, path);\n  var pAbove = isAbove(p, path);\n\n  if (type === 'insert_node') {\n    if (pEqual || pYounger || pAbove) {\n      path = increment(path, 1, pIndex);\n    }\n  }\n\n  if (type === 'remove_node') {\n    if (pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pEqual || pAbove) {\n      path = [];\n    }\n  }\n\n  if (type === 'merge_node') {\n    if (pEqual || pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pAbove) {\n      path = decrement(path, 1, pIndex);\n      path = increment(path, position, pIndex + 1);\n    }\n  }\n\n  if (type === 'split_node') {\n    if (pEqual) {\n      path = [path, increment(path)];\n    } else if (pYounger) {\n      path = increment(path, 1, pIndex);\n    } else if (pAbove) {\n      if (path.get(pIndex + 1) >= position) {\n        path = increment(path, 1, pIndex);\n        path = decrement(path, position, pIndex + 1);\n      }\n    }\n  }\n\n  if (type === 'move_node') {\n    var np = operation.newPath;\n\n\n    if (isEqual(p, np)) {\n      return List([path]);\n    }\n\n    if (pAbove || pEqual) {\n      // We are comparing something that was moved\n      // The new path is unaffected unless the old path was the left-sibling of an ancestor\n      if (isYounger(p, np) && p.size < np.size) {\n        path = decrement(np, 1, min(np, p) - 1).concat(path.slice(p.size));\n      } else {\n        path = np.concat(path.slice(p.size));\n      }\n    } else {\n      // This is equivalent logic to remove_node for path\n      if (pYounger) {\n        path = decrement(path, 1, pIndex);\n      }\n\n      // This is the equivalent logic to insert_node for newPath\n      if (isYounger(np, path) || isEqual(np, path) || isAbove(np, path)) {\n        path = increment(path, 1, np.size - 1);\n      }\n    }\n  }\n\n  var paths = Array.isArray(path) ? path : [path];\n  return List(paths);\n}\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar PathUtils = {\n  compare: compare,\n  create: create$1,\n  crop: crop,\n  decrement: decrement,\n  getAncestors: getAncestors,\n  increment: increment,\n  isAbove: isAbove,\n  isAfter: isAfter,\n  isBefore: isBefore,\n  isEqual: isEqual,\n  isOlder: isOlder,\n  isSibling: isSibling,\n  isYounger: isYounger,\n  lift: lift,\n  drop: drop,\n  max: max,\n  min: min,\n  relate: relate,\n  transform: transform\n};\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$6 = {\n  key: undefined,\n  offset: undefined,\n  path: undefined\n\n  /**\n   * Point.\n   *\n   * @type {Point}\n   */\n\n};\nvar Point = function (_Record) {\n  inherits(Point, _Record);\n\n  function Point() {\n    classCallCheck(this, Point);\n    return possibleConstructorReturn(this, (Point.__proto__ || Object.getPrototypeOf(Point)).apply(this, arguments));\n  }\n\n  createClass(Point, [{\n    key: 'isAfterPoint',\n\n\n    /**\n     * Check whether the point is after another `point`.\n     *\n     * @return {Boolean}\n     */\n\n    value: function isAfterPoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset > point.offset || PathUtils.compare(this.path, point.path) === 1;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is after a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAfterRange',\n    value: function isAfterRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isAfterPoint(range.end);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the end of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfRange',\n    value: function isAtEndOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.end);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the start of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfRange',\n    value: function isAtStartOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is before another `point`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforePoint',\n    value: function isBeforePoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset < point.offset || PathUtils.compare(this.path, point.path) === -1;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is before a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforeRange',\n    value: function isBeforeRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isBeforePoint(range.start);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is inside a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInRange',\n    value: function isInRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start) || this.equals(range.end) || this.isAfterPoint(range.start) && this.isBeforePoint(range.end);\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfNode',\n    value: function isAtEndOfNode(node) {\n      if (this.isUnset) return false;\n      var last = node.getLastText();\n      var is$$1 = this.key === last.key && this.offset === last.text.length;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is at the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfNode',\n    value: function isAtStartOfNode(node) {\n      if (this.isUnset) return false;\n\n      // PERF: Do a check for a `0` offset first since it's quickest.\n      if (this.offset !== 0) return false;\n\n      var first = node.getFirstText();\n      var is$$1 = this.key === first.key;\n      return is$$1;\n    }\n\n    /**\n     * Check whether the point is in a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInNode',\n    value: function isInNode(node) {\n      if (this.isUnset) return false;\n      if (node.object === 'text' && node.key === this.key) return true;\n      if (node.hasNode(this.key)) return true;\n      return false;\n    }\n\n    /**\n     * Move the point's offset backward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (n === 0) return this;\n      if (n < 0) return this.moveForward(-n);\n      var point = this.setOffset(this.offset - n);\n      return point;\n    }\n\n    /**\n     * Move the point's offset forward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n      if (n === 0) return this;\n      if (n < 0) return this.moveBackward(-n);\n      var point = this.setOffset(this.offset + n);\n      return point;\n    }\n\n    /**\n     * Move the point's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String|Number} path\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var key = this.key;\n\n      if (typeof path === 'number') {\n        offset = path;\n        path = this.path;\n      } else if (typeof path === 'string') {\n        key = path;\n        path = key === this.key ? this.path : null;\n      } else {\n        key = path.equals(this.path) ? this.key : null;\n      }\n\n      var point = this.merge({ key: key, path: path, offset: offset });\n      return point;\n    }\n\n    /**\n     * Move the point's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      var first = node.getFirstText();\n      var point = this.moveTo(first.key, 0);\n      return point;\n    }\n\n    /**\n     * Move the point's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      var last = node.getLastText();\n      var point = this.moveTo(last.key, last.text.length);\n      return point;\n    }\n\n    /**\n     * Normalize the point relative to a `node`, ensuring that its key and path\n     * reference a text node, or that it gets unset.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      // If both the key and path are null, there's no reference to a node, so\n      // make sure it is entirely unset.\n      if (this.key == null && this.path == null) {\n        return this.setOffset(null);\n      }\n\n      var key = this.key,\n          offset = this.offset,\n          path = this.path;\n\n      // PERF: this function gets called a lot.\n      // to avoid creating the key -> path lookup table, we attempt to look up by path first.\n\n      var target = path && node.getNode(path);\n\n      if (!target) {\n        target = node.getNode(key);\n\n        if (target) {\n          // There is a misalignment of path and key\n          var _point = this.merge({\n            path: node.getPath(key)\n          });\n\n          return _point;\n        }\n      }\n\n      if (!target) {\n        warning(false, \"A point's `path` or `key` invalid and was reset!\");\n\n        var text = node.getFirstText();\n        if (!text) return Point.create();\n\n        var _point2 = this.merge({\n          key: text.key,\n          offset: 0,\n          path: node.getPath(text.key)\n        });\n\n        return _point2;\n      }\n\n      if (target.object !== 'text') {\n        warning(false, 'A point should not reference a non-text node!');\n\n        var _text = target.getTextAtOffset(offset);\n        var before = target.getOffset(_text.key);\n        var _point3 = this.merge({\n          offset: offset - before,\n          key: _text.key,\n          path: node.getPath(_text.key)\n        });\n\n        return _point3;\n      }\n\n      if (target && path && key && key !== target.key) {\n        warning(false, \"A point's `key` did not match its `path`!\");\n\n        // TODO: if we look up by path above and it differs by key, do we want to reset it to looking up by key?\n      }\n\n      var point = this.merge({\n        key: target.key,\n        path: path == null ? node.getPath(target.key) : path,\n        offset: offset == null ? 0 : Math.min(offset, target.text.length)\n      });\n\n      // COMPAT: There is an ambiguity, since a point can exist at the end of a\n      // text node, or at the start of the following one. To eliminate it we\n      // enforce that if there is a following text node, we always move it there.\n      if (point.offset === target.text.length) {\n        var block = node.getClosestBlock(point.path);\n        var next = block.getNextText();\n\n        if (next) {\n          point = point.merge({\n            key: next.key,\n            path: node.getPath(next.key),\n            offset: 0\n          });\n        }\n      }\n\n      return point;\n    }\n\n    /**\n     * Set the point's key to a new `key`.\n     *\n     * @param {String} key\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setKey',\n    value: function setKey(key) {\n      if (key != null) {\n        key = KeyUtils.create(key);\n      }\n\n      var point = this.set('key', key);\n      return point;\n    }\n\n    /**\n     * Set the point's offset to a new `offset`.\n     *\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      var point = this.set('offset', offset);\n      return point;\n    }\n\n    /**\n     * Set the point's path to a new `path`.\n     *\n     * @param {List|Array} path\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setPath',\n    value: function setPath(path) {\n      if (path != null) {\n        path = PathUtils.create(path);\n      }\n\n      var point = this.set('path', path);\n      return point;\n    }\n\n    /**\n     * Return a JSON representation of the point.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        key: this.key,\n        offset: this.offset,\n        path: this.path && this.path.toArray()\n      };\n\n      if (!options.preserveKeys) {\n        delete object.key;\n      }\n\n      return object;\n    }\n\n    /**\n     * Unset the point.\n     *\n     * @return {Point}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      return this.merge({\n        key: null,\n        offset: null,\n        path: null\n      });\n    }\n  }, {\n    key: 'isSet',\n\n\n    /**\n     * Check whether all properties of the point are set.\n     *\n     * @return {Boolean}\n     */\n\n    get: function get$$1() {\n      return this.key != null && this.offset != null && this.path != null;\n    }\n\n    /**\n     * Check whether any property of the point is not set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      return !this.isSet;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Point` with `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Point}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Point.fromJSON(attrs);\n      }\n\n      throw new Error('`Point.create` only accepts objects or points, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a dictionary of settable point properties from `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(a)) {\n        return {\n          key: a.key,\n          offset: a.offset,\n          path: a.path\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('key' in a) p.key = a.key;\n        if ('offset' in a) p.offset = a.offset;\n        if ('path' in a) p.path = PathUtils.create(a.path);\n\n        // If only a path is set, or only a key is set, ensure that the other is\n        // set to null so that it can be normalized back to the right value.\n        // Otherwise we won't realize that the path and key don't match anymore.\n        if ('path' in a && !('key' in a)) p.key = null;\n        if ('key' in a && !('path' in a)) p.path = null;\n\n        return p;\n      }\n\n      throw new Error('`Point.createProperties` only accepts objects or points, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Point` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Point}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$key = object.key,\n          key = _object$key === undefined ? null : _object$key,\n          _object$offset = object.offset,\n          offset = _object$offset === undefined ? null : _object$offset,\n          _object$path = object.path,\n          path = _object$path === undefined ? null : _object$path;\n\n\n      var point = new Point({\n        key: key,\n        offset: offset,\n        path: PathUtils.create(path)\n      });\n\n      return point;\n    }\n  }]);\n  return Point;\n}(Record(DEFAULTS$6));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$7 = {\n  anchor: undefined,\n  focus: undefined,\n  mark: undefined\n\n  /**\n   * Decoration.\n   *\n   * @type {Decoration}\n   */\n\n};\nvar Decoration = function (_Record) {\n  inherits(Decoration, _Record);\n\n  function Decoration() {\n    classCallCheck(this, Decoration);\n    return possibleConstructorReturn(this, (Decoration.__proto__ || Object.getPrototypeOf(Decoration)).apply(this, arguments));\n  }\n\n  createClass(Decoration, [{\n    key: 'setProperties',\n\n\n    /**\n     * Set new `properties` on the decoration.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n    value: function setProperties(properties) {\n      properties = Decoration.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          mark = _properties.mark;\n\n      var props = {};\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      if (mark) {\n        props.mark = Mark.create(mark);\n      }\n\n      var decoration = this.merge(props);\n      return decoration;\n    }\n\n    /**\n     * Return a JSON representation of the decoration.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        mark: this.mark.toJSON(options)\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Decoration` with `attrs`.\n     *\n     * @param {Object|Decoration} attrs\n     * @return {Decoration}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Decoration.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Decoration.fromJSON(attrs);\n      }\n\n      throw new Error('`Decoration.create` only accepts objects or decorations, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Decoration|Object>|List<Decoration|Object>} elements\n     * @return {List<Decoration>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Decoration.create));\n        return list;\n      }\n\n      throw new Error('`Decoration.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable decoration properties from `attrs`.\n     *\n     * @param {Object|String|Decoration} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          mark: Mark.create(a.mark)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('mark' in a) p.mark = Mark.create(a.mark);\n        return p;\n      }\n\n      throw new Error('`Decoration.createProperties` only accepts objects or decorations, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Decoration` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          mark = object.mark;\n\n\n      if (!mark) {\n        throw new Error('Decorations must be created with a `mark`, but you passed: ' + JSON.stringify(object));\n      }\n\n      var decoration = new Decoration({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        mark: Mark.fromJSON(mark)\n      });\n\n      return decoration;\n    }\n  }]);\n  return Decoration;\n}(Record(DEFAULTS$7));\n\n/**\n * Slate-specific object types.\n *\n * @type {Object}\n */\n\nvar TYPES = {\n  block: '@@__SLATE_BLOCK__@@',\n  change: '@@__SLATE_CHANGE__@@',\n  decoration: '@@__SLATE_DECORATION__@@',\n  document: '@@__SLATE_DOCUMENT__@@',\n  editor: '@@__SLATE_EDITOR__@@',\n  inline: '@@__SLATE_INLINE__@@',\n  leaf: '@@__SLATE_LEAF__@@',\n  mark: '@@__SLATE_MARK__@@',\n  operation: '@@__SLATE_OPERATION__@@',\n  point: '@@__SLATE_POINT__@@',\n  range: '@@__SLATE_RANGE__@@',\n  selection: '@@__SLATE_SELECTION__@@',\n  text: '@@__SLATE_TEXT__@@',\n  value: '@@__SLATE_VALUE__@@'\n\n  /**\n   * Determine whether a `value` is of `type`.\n   *\n   * @param {string} type\n   * @param {any} value\n   * @return {boolean}\n   */\n\n};function isObject(type, value) {\n  return !!(value && value[TYPES[type]]);\n}\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$8 = {\n  anchor: undefined,\n  focus: undefined\n\n  /**\n   * Range.\n   *\n   * @type {Range}\n   */\n\n};\nvar Range = function (_Record) {\n  inherits(Range, _Record);\n\n  function Range() {\n    classCallCheck(this, Range);\n    return possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).apply(this, arguments));\n  }\n\n  createClass(Range, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Range` with `attrs`.\n     *\n     * @param {Object|Range} attrs\n     * @return {Range}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(attrs)) {\n        if (attrs.object === 'range') {\n          return attrs;\n        } else {\n          return Range.fromJSON(Range.createProperties(attrs));\n        }\n      }\n\n      if (isPlainObject(attrs)) {\n        return Range.fromJSON(attrs);\n      }\n\n      throw new Error('`Range.create` only accepts objects or ranges, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Range|Object>|List<Range|Object>} elements\n     * @return {List<Range>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Range.create));\n        return list;\n      }\n\n      throw new Error('`Range.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a dictionary of settable range properties from `attrs`.\n     *\n     * @param {Object|String|Range} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        return p;\n      }\n\n      throw new Error('`Range.createProperties` only accepts objects, decorations, ranges or selections, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Range` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Range}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus;\n\n      var range = new Range({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {})\n      });\n\n      return range;\n    }\n\n    /**\n     * Check if a `value` is a `Range`, or is range-like.\n     *\n     * @param {Any} value\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isRange',\n    value: function isRange(value) {\n      return isObject('range', value) || Decoration.isDecoration(value) || Selection.isSelection(value);\n    }\n  }]);\n  return Range;\n}(Record(DEFAULTS$8));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$9 = {\n  anchor: undefined,\n  focus: undefined,\n  isFocused: undefined,\n  marks: undefined\n\n  /**\n   * Selection.\n   *\n   * @type {Selection}\n   */\n\n};\nvar Selection = function (_Record) {\n  inherits(Selection, _Record);\n\n  function Selection() {\n    classCallCheck(this, Selection);\n    return possibleConstructorReturn(this, (Selection.__proto__ || Object.getPrototypeOf(Selection)).apply(this, arguments));\n  }\n\n  createClass(Selection, [{\n    key: 'setIsFocused',\n\n\n    /**\n     * Set the `isFocused` property to a new `value`.\n     *\n     * @param {Boolean} value\n     * @return {Selection}\n     */\n\n    value: function setIsFocused(value) {\n      var selection = this.set('isFocused', value);\n      return selection;\n    }\n\n    /**\n     * Set the `marks` property to a new set of `marks`.\n     *\n     * @param {Set} marks\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'setMarks',\n    value: function setMarks(marks) {\n      var selection = this.set('marks', marks);\n      return selection;\n    }\n\n    /**\n     * Set new `properties` on the selection.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Selection.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var selection = this.merge(props);\n      return selection;\n    }\n\n    /**\n     * Return a JSON representation of the selection.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        isFocused: this.isFocused,\n        marks: this.marks == null ? null : this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n\n      return object;\n    }\n  }, {\n    key: 'isBlurred',\n\n\n    /**\n     * Check whether the selection is blurred.\n     *\n     * @return {Boolean}\n     */\n\n    get: function get$$1() {\n      return !this.isFocused;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Selection` with `attrs`.\n     *\n     * @param {Object|Selection} attrs\n     * @return {Selection}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Selection.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Selection.fromJSON(attrs);\n      }\n\n      throw new Error('`Selection.create` only accepts objects, ranges or selections, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a dictionary of settable selection properties from `attrs`.\n     *\n     * @param {Object|String|Selection} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          isFocused: a.isFocused,\n          marks: a.marks\n        };\n      }\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('isFocused' in a) p.isFocused = a.isFocused;\n        if ('marks' in a) p.marks = a.marks == null ? null : Mark.createSet(a.marks);\n        return p;\n      }\n\n      throw new Error('`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Selection` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          _object$isFocused = object.isFocused,\n          isFocused = _object$isFocused === undefined ? false : _object$isFocused,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? null : _object$marks;\n\n      var selection = new Selection({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        isFocused: isFocused,\n        marks: marks == null ? null : new Set(marks.map(Mark.fromJSON))\n      });\n\n      return selection;\n    }\n  }]);\n  return Selection;\n}(Record(DEFAULTS$9));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$10 = {\n  data: undefined,\n  decorations: undefined,\n  document: undefined,\n  selection: undefined\n\n  /**\n   * Value.\n   *\n   * @type {Value}\n   */\n\n};\nvar Value = function (_Record) {\n  inherits(Value, _Record);\n\n  function Value() {\n    classCallCheck(this, Value);\n    return possibleConstructorReturn(this, (Value.__proto__ || Object.getPrototypeOf(Value)).apply(this, arguments));\n  }\n\n  createClass(Value, [{\n    key: 'addMark',\n\n\n    /**\n     * Add `mark` to text at `path`.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n    value: function addMark(path, mark) {\n      mark = Mark.create(mark);\n      var value = this;\n      var _value = value,\n          document = _value.document;\n\n      document = document.addMark(path, mark);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      var value = this;\n      var _value2 = value,\n          document = _value2.document;\n\n      document = document.insertNode(path, node);\n      value = value.set('document', document);\n\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n      });\n\n      return value;\n    }\n\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text) {\n      var value = this;\n      var _value3 = value,\n          document = _value3.document;\n\n      var node = document.assertNode(path);\n      document = document.insertText(path, offset, text);\n      node = document.assertNode(path);\n      value = value.set('document', document);\n\n      value = value.mapPoints(function (point) {\n        if (point.key === node.key && point.offset >= offset) {\n          return point.setOffset(point.offset + text.length);\n        } else {\n          return point;\n        }\n      });\n\n      return value;\n    }\n\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var value = this;\n      var _value4 = value,\n          document = _value4.document;\n\n      var newDocument = document.mergeNode(path);\n      path = document.resolvePath(path);\n      var withPath = PathUtils.decrement(path);\n      var one = document.getNode(withPath);\n      var two = document.getNode(path);\n      value = value.set('document', newDocument);\n\n      value = value.mapRanges(function (range) {\n        if (two.object === 'text') {\n          var max = one.text.length;\n\n          if (range.anchor.key === two.key) {\n            range = range.moveAnchorTo(one.key, max + range.anchor.offset);\n          }\n\n          if (range.focus.key === two.key) {\n            range = range.moveFocusTo(one.key, max + range.focus.offset);\n          }\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n\n        return range;\n      });\n\n      return value;\n    }\n\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Value}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      var value = this;\n      var _value5 = value,\n          document = _value5.document;\n\n\n      if (PathUtils.isEqual(path, newPath)) {\n        return value;\n      }\n\n      document = document.moveNode(path, newPath, newIndex);\n      value = value.set('document', document);\n      value = value.mapPoints(function (point) {\n        return point.setPath(null);\n      });\n      return value;\n    }\n\n    /**\n     * Remove `mark` at `path`.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, mark) {\n      mark = Mark.create(mark);\n      var value = this;\n      var _value6 = value,\n          document = _value6.document;\n\n      document = document.removeMark(path, mark);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Remove a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      var value = this;\n      var _value7 = value,\n          document = _value7.document;\n\n      var node = document.assertNode(path);\n      var first = node.object === 'text' ? node : node.getFirstText() || node;\n      var last = node.object === 'text' ? node : node.getLastText() || node;\n      var prev = document.getPreviousText(first.key);\n      var next = document.getNextText(last.key);\n\n      document = document.removeNode(path);\n      value = value.set('document', document);\n\n      value = value.mapRanges(function (range) {\n        var _range = range,\n            start = _range.start,\n            end = _range.end;\n\n\n        if (node.hasNode(start.key)) {\n          range = prev ? range.moveStartTo(prev.key, prev.text.length) : next ? range.moveStartTo(next.key, 0) : range.unset();\n        }\n\n        if (node.hasNode(end.key)) {\n          range = prev ? range.moveEndTo(prev.key, prev.text.length) : next ? range.moveEndTo(next.key, 0) : range.unset();\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n\n        return range;\n      });\n\n      return value;\n    }\n\n    /**\n     * Remove `text` at `offset` in node by `path`.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var value = this;\n      var _value8 = value,\n          document = _value8.document;\n\n      var node = document.assertNode(path);\n      document = document.removeText(path, offset, text);\n      value = value.set('document', document);\n\n      var length = text.length;\n\n      var start = offset;\n      var end = offset + length;\n\n      value = value.mapPoints(function (point) {\n        if (point.key !== node.key) {\n          return point;\n        }\n\n        if (point.offset >= end) {\n          return point.setOffset(point.offset - length);\n        }\n\n        if (point.offset > start) {\n          return point.setOffset(start);\n        }\n\n        return point;\n      });\n\n      return value;\n    }\n\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var value = this;\n      var _value9 = value,\n          document = _value9.document;\n\n      document = document.setNode(path, properties);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, mark, properties) {\n      var value = this;\n      var _value10 = value,\n          document = _value10.document;\n\n      document = document.setMark(path, mark, properties);\n      value = value.set('document', document);\n      return value;\n    }\n\n    /**\n     * Set `properties` on the value.\n     *\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      var value = this;\n      var _value11 = value,\n          document = _value11.document;\n      var data = properties.data,\n          decorations = properties.decorations;\n\n      var props = {};\n\n      if (data) {\n        props.data = data;\n      }\n\n      if (decorations) {\n        props.decorations = decorations.map(function (d) {\n          return d.isSet ? d : document.resolveDecoration(d);\n        });\n      }\n\n      value = value.merge(props);\n      return value;\n    }\n\n    /**\n     * Set `properties` on the selection.\n     *\n     * @param {Value} value\n     * @param {Operation} operation\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setSelection',\n    value: function setSelection(properties) {\n      var value = this;\n      var _value12 = value,\n          document = _value12.document,\n          selection = _value12.selection;\n\n      var next = selection.setProperties(properties);\n      selection = document.resolveSelection(next);\n      value = value.set('selection', selection);\n      return value;\n    }\n\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var value = this;\n      var _value13 = value,\n          document = _value13.document;\n\n      var newDocument = document.splitNode(path, position, properties);\n      var node = document.assertNode(path);\n      value = value.set('document', newDocument);\n\n      value = value.mapRanges(function (range) {\n        var next = newDocument.getNextText(node.key);\n        var _range2 = range,\n            start = _range2.start,\n            end = _range2.end;\n\n        // If the start was after the split, move it to the next node.\n\n        if (node.key === start.key && position <= start.offset) {\n          range = range.moveStartTo(next.key, start.offset - position);\n        }\n\n        // If the end was after the split, move it to the next node.\n        if (node.key === end.key && position <= end.offset) {\n          range = range.moveEndTo(next.key, end.offset - position);\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n\n        return range;\n      });\n\n      return value;\n    }\n\n    /**\n     * Map all range objects to apply adjustments with an `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mapRanges',\n    value: function mapRanges(iterator) {\n      var value = this;\n      var _value14 = value,\n          document = _value14.document,\n          selection = _value14.selection,\n          decorations = _value14.decorations;\n\n\n      var sel = selection.isSet ? iterator(selection) : selection;\n      if (!sel) sel = selection.unset();\n      if (sel !== selection) sel = document.createSelection(sel);\n      value = value.set('selection', sel);\n\n      var decs = decorations.map(function (decoration) {\n        var n = decoration.isSet ? iterator(decoration) : decoration;\n        if (n && n !== decoration) n = document.createDecoration(n);\n        return n;\n      });\n\n      decs = decs.filter(function (decoration) {\n        return !!decoration;\n      });\n      value = value.set('decorations', decs);\n      return value;\n    }\n  }, {\n    key: 'mapPoints',\n    value: function mapPoints(iterator) {\n      return this.mapRanges(function (range) {\n        return range.updatePoints(iterator);\n      });\n    }\n\n    /**\n     * Return a JSON representation of the value.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        document: this.document.toJSON(options)\n      };\n\n      if (options.preserveData) {\n        object.data = this.data.toJSON(options);\n      }\n\n      if (options.preserveDecorations) {\n        object.decorations = this.decorations.toArray().map(function (d) {\n          return d.toJSON(options);\n        });\n      }\n\n      if (options.preserveSelection) {\n        object.selection = this.selection.toJSON(options);\n      }\n\n      return object;\n    }\n\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change() {\n      invariant(false, 'As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.');\n    }\n  }, {\n    key: 'startBlock',\n\n\n    /**\n     * Get the current start text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestBlock(this.selection.start.key);\n    }\n\n    /**\n     * Get the current end text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'endBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestBlock(this.selection.end.key);\n    }\n\n    /**\n     * Get the current anchor text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'anchorBlock',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestBlock(this.selection.anchor.key);\n    }\n\n    /**\n     * Get the current focus text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'focusBlock',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestBlock(this.selection.focus.key);\n    }\n\n    /**\n     * Get the current start text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'startInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestInline(this.selection.start.key);\n    }\n\n    /**\n     * Get the current end text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'endInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestInline(this.selection.end.key);\n    }\n\n    /**\n     * Get the current anchor text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'anchorInline',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestInline(this.selection.anchor.key);\n    }\n\n    /**\n     * Get the current focus text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'focusInline',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestInline(this.selection.focus.key);\n    }\n\n    /**\n     * Get the current start text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'startText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getDescendant(this.selection.start.key);\n    }\n\n    /**\n     * Get the current end node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'endText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getDescendant(this.selection.end.key);\n    }\n\n    /**\n     * Get the current anchor node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'anchorText',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getDescendant(this.selection.anchor.key);\n    }\n\n    /**\n     * Get the current focus node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'focusText',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getDescendant(this.selection.focus.key);\n    }\n\n    /**\n     * Get the next block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'nextBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextBlock(this.selection.end.key);\n    }\n\n    /**\n     * Get the previous block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'previousBlock',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousBlock(this.selection.start.key);\n    }\n\n    /**\n     * Get the next inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'nextInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextInline(this.selection.end.key);\n    }\n\n    /**\n     * Get the previous inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'previousInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousInline(this.selection.start.key);\n    }\n\n    /**\n     * Get the next text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'nextText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextText(this.selection.end.key);\n    }\n\n    /**\n     * Get the previous text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'previousText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousText(this.selection.start.key);\n    }\n\n    /**\n     * Get the marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'marks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getMarksAtRange(this.selection);\n    }\n\n    /**\n     * Get the active marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'activeMarks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getActiveMarksAtRange(this.selection);\n    }\n\n    /**\n     * Get the block nodes in the current selection.\n     *\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'blocks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafBlocksAtRange(this.selection);\n    }\n\n    /**\n     * Get the fragment of the current selection.\n     *\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fragment',\n    get: function get$$1() {\n      return this.selection.isUnset ? Document.create() : this.document.getFragmentAtRange(this.selection);\n    }\n\n    /**\n     * Get the bottom-most inline nodes in the current selection.\n     *\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'inlines',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafInlinesAtRange(this.selection);\n    }\n\n    /**\n     * Get the text nodes in the current selection.\n     *\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'texts',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getTextsAtRange(this.selection);\n    }\n  }, {\n    key: 'history',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.');\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Value` with `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @param {Object} options\n     * @return {Value}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (Value.isValue(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Value.fromJSON(attrs, options);\n      }\n\n      throw new Error('`Value.create` only accepts objects or values, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a dictionary of settable value properties from `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Value.isValue(a)) {\n        return {\n          data: a.data,\n          decorations: a.decorations\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('data' in a) p.data = Data.create(a.data);\n        if ('decorations' in a) p.decorations = Decoration.createList(a.decorations);\n        return p;\n      }\n\n      throw new Error('`Value.createProperties` only accepts objects or values, but you passed it: ' + a);\n    }\n\n    /**\n     * Create a `Value` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @param {Object} options\n     *   @property {Boolean} normalize\n     *   @property {Array} plugins\n     * @return {Value}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$decorations = object.decorations,\n          decorations = _object$decorations === undefined ? [] : _object$decorations,\n          _object$document = object.document,\n          document = _object$document === undefined ? {} : _object$document,\n          _object$selection = object.selection,\n          selection = _object$selection === undefined ? {} : _object$selection;\n\n      data = Data.fromJSON(data);\n      document = Document.fromJSON(document);\n      selection = document.createSelection(selection);\n      decorations = List(decorations.map(function (d) {\n        return Decoration.fromJSON(d);\n      }));\n\n      if (selection.isUnset) {\n        var text = document.getFirstText();\n        if (text) selection = selection.moveToStartOfNode(text);\n        selection = document.createSelection(selection);\n      }\n\n      var value = new Value({\n        data: data,\n        decorations: decorations,\n        document: document,\n        selection: selection\n      });\n\n      return value;\n    }\n  }]);\n  return Value;\n}(Record(DEFAULTS$10));\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug = Debug('slate:operation:apply');\n\n/**\n * Apply an `op` to a `value`.\n *\n * @param {Value} value\n * @param {Object|Operation} op\n * @return {Value} value\n */\n\nfunction applyOperation(value, op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n\n  debug(type, op);\n\n  switch (type) {\n    case 'add_mark':\n      {\n        var _op2 = op,\n            path = _op2.path,\n            mark = _op2.mark;\n\n        var next = value.addMark(path, mark);\n        return next;\n      }\n\n    case 'insert_node':\n      {\n        var _op3 = op,\n            _path = _op3.path,\n            node = _op3.node;\n\n        var _next = value.insertNode(_path, node);\n        return _next;\n      }\n\n    case 'insert_text':\n      {\n        var _op4 = op,\n            _path2 = _op4.path,\n            offset = _op4.offset,\n            text = _op4.text,\n            marks = _op4.marks;\n\n        var _next2 = value.insertText(_path2, offset, text, marks);\n        return _next2;\n      }\n\n    case 'merge_node':\n      {\n        var _op5 = op,\n            _path3 = _op5.path;\n\n        var _next3 = value.mergeNode(_path3);\n        return _next3;\n      }\n\n    case 'move_node':\n      {\n        var _op6 = op,\n            _path4 = _op6.path,\n            newPath = _op6.newPath;\n\n        var _next4 = value.moveNode(_path4, newPath);\n        return _next4;\n      }\n\n    case 'remove_mark':\n      {\n        var _op7 = op,\n            _path5 = _op7.path,\n            _mark = _op7.mark;\n\n        var _next5 = value.removeMark(_path5, _mark);\n        return _next5;\n      }\n\n    case 'remove_node':\n      {\n        var _op8 = op,\n            _path6 = _op8.path;\n\n        var _next6 = value.removeNode(_path6);\n        return _next6;\n      }\n\n    case 'remove_text':\n      {\n        var _op9 = op,\n            _path7 = _op9.path,\n            _offset = _op9.offset,\n            _text = _op9.text;\n\n        var _next7 = value.removeText(_path7, _offset, _text);\n        return _next7;\n      }\n\n    case 'set_mark':\n      {\n        var _op10 = op,\n            _path8 = _op10.path,\n            properties = _op10.properties,\n            newProperties = _op10.newProperties;\n\n        var _next8 = value.setMark(_path8, properties, newProperties);\n        return _next8;\n      }\n\n    case 'set_node':\n      {\n        var _op11 = op,\n            _path9 = _op11.path,\n            _newProperties = _op11.newProperties;\n\n        var _next9 = value.setNode(_path9, _newProperties);\n        return _next9;\n      }\n\n    case 'set_selection':\n      {\n        var _op12 = op,\n            _newProperties2 = _op12.newProperties;\n\n        var _next10 = value.setSelection(_newProperties2);\n        return _next10;\n      }\n\n    case 'set_value':\n      {\n        var _op13 = op,\n            _newProperties3 = _op13.newProperties;\n\n        var _next11 = value.setProperties(_newProperties3);\n        return _next11;\n      }\n\n    case 'split_node':\n      {\n        var _op14 = op,\n            _path10 = _op14.path,\n            position = _op14.position,\n            _properties = _op14.properties;\n\n        var _next12 = value.splitNode(_path10, position, _properties);\n        return _next12;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug$1 = Debug('slate:operation:invert');\n\n/**\n * Invert an `op`.\n *\n * @param {Object} op\n * @return {Object}\n */\n\nfunction invertOperation(op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n\n  debug$1(type, op);\n\n  switch (type) {\n    case 'insert_node':\n      {\n        var inverse = op.set('type', 'remove_node');\n        return inverse;\n      }\n\n    case 'remove_node':\n      {\n        var _inverse = op.set('type', 'insert_node');\n        return _inverse;\n      }\n\n    case 'move_node':\n      {\n        var _op2 = op,\n            newPath = _op2.newPath,\n            path = _op2.path;\n\n\n        if (PathUtils.isEqual(newPath, path)) {\n          return op;\n        }\n\n        // Get the true path that the moved node ended up at\n        var inversePath = PathUtils.transform(path, op).first();\n\n        // Get the true path we are trying to move back to\n        // We transform the right-sibling of the path\n        // This will end up at the operation.path most of the time\n        // But if the newPath is a left-sibling or left-ancestor-sibling, this will account for it\n        var transformedSibling = PathUtils.transform(PathUtils.increment(path), op).first();\n\n        var _inverse2 = op.set('path', inversePath).set('newPath', transformedSibling);\n        return _inverse2;\n      }\n\n    case 'merge_node':\n      {\n        var _op3 = op,\n            _path = _op3.path;\n\n        var _inversePath = PathUtils.decrement(_path);\n        var _inverse3 = op.set('type', 'split_node').set('path', _inversePath);\n        return _inverse3;\n      }\n\n    case 'split_node':\n      {\n        var _op4 = op,\n            _path2 = _op4.path;\n\n        var _inversePath2 = PathUtils.increment(_path2);\n        var _inverse4 = op.set('type', 'merge_node').set('path', _inversePath2);\n        return _inverse4;\n      }\n\n    case 'set_node':\n    case 'set_value':\n    case 'set_selection':\n    case 'set_mark':\n      {\n        var _op5 = op,\n            properties = _op5.properties,\n            newProperties = _op5.newProperties;\n\n        var _inverse5 = op.set('properties', newProperties).set('newProperties', properties);\n        return _inverse5;\n      }\n\n    case 'insert_text':\n      {\n        var _inverse6 = op.set('type', 'remove_text');\n        return _inverse6;\n      }\n\n    case 'remove_text':\n      {\n        var _inverse7 = op.set('type', 'insert_text');\n        return _inverse7;\n      }\n\n    case 'add_mark':\n      {\n        var _inverse8 = op.set('type', 'remove_mark');\n        return _inverse8;\n      }\n\n    case 'remove_mark':\n      {\n        var _inverse9 = op.set('type', 'add_mark');\n        return _inverse9;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n\n/**\n * Operation attributes.\n *\n * @type {Array}\n */\n\nvar OPERATION_ATTRIBUTES = {\n  add_mark: ['path', 'mark', 'data'],\n  insert_node: ['path', 'node', 'data'],\n  insert_text: ['path', 'offset', 'text', 'data'],\n  merge_node: ['path', 'position', 'properties', 'target', 'data'],\n  move_node: ['path', 'newPath', 'data'],\n  remove_mark: ['path', 'mark', 'data'],\n  remove_node: ['path', 'node', 'data'],\n  remove_text: ['path', 'offset', 'text', 'data'],\n  set_mark: ['path', 'properties', 'newProperties', 'data'],\n  set_node: ['path', 'properties', 'newProperties', 'data'],\n  set_selection: ['properties', 'newProperties', 'data'],\n  set_value: ['properties', 'newProperties', 'data'],\n  split_node: ['path', 'position', 'properties', 'target', 'data']\n\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n};var DEFAULTS$11 = {\n  length: undefined,\n  mark: undefined,\n  marks: undefined,\n  newPath: undefined,\n  node: undefined,\n  offset: undefined,\n  path: undefined,\n  position: undefined,\n  properties: undefined,\n  newProperties: undefined,\n  target: undefined,\n  text: undefined,\n  type: undefined,\n  data: undefined\n\n  /**\n   * Operation.\n   *\n   * @type {Operation}\n   */\n\n};\nvar Operation = function (_Record) {\n  inherits(Operation, _Record);\n\n  function Operation() {\n    classCallCheck(this, Operation);\n    return possibleConstructorReturn(this, (Operation.__proto__ || Object.getPrototypeOf(Operation)).apply(this, arguments));\n  }\n\n  createClass(Operation, [{\n    key: 'apply',\n\n\n    /**\n     * Apply the operation to a `value`.\n     *\n     * @param {Value} value\n     * @return {Value}\n     */\n\n    value: function apply(value) {\n      var next = applyOperation(value, this);\n      return next;\n    }\n\n    /**\n     * Invert the operation.\n     *\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'invert',\n    value: function invert() {\n      var inverted = invertOperation(this);\n      return inverted;\n    }\n\n    /**\n     * Return a JSON representation of the operation.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = this.object,\n          type = this.type;\n\n      var json = { object: object, type: type };\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = ATTRIBUTES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          var value = this[key];\n\n          if (key === 'mark' || key === 'marks' || key === 'node' || key === 'path' || key === 'newPath') {\n            value = value.toJSON();\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            var v = {};\n            if ('data' in value) v.data = value.data.toJS();\n            if ('type' in value) v.type = value.type;\n            value = v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            var _v = {};\n            if ('data' in value) _v.data = value.data.toJS();\n            if ('type' in value) _v.type = value.type;\n            value = _v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            var _v2 = {};\n            if ('data' in value) _v2.data = value.data.toJS();\n            if ('type' in value) _v2.type = value.type;\n            value = _v2;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            var _v3 = {};\n            if ('anchor' in value) _v3.anchor = value.anchor.toJSON();\n            if ('focus' in value) _v3.focus = value.focus.toJSON();\n            if ('isFocused' in value) _v3.isFocused = value.isFocused;\n            if ('marks' in value) _v3.marks = value.marks && value.marks.toJSON();\n            value = _v3;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            var _v4 = {};\n            if ('data' in value) _v4.data = value.data.toJS();\n            if ('decorations' in value) _v4.decorations = value.decorations.toJS();\n            value = _v4;\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            var _v5 = {};\n            if ('data' in value) _v5.data = value.data.toJS();\n            if ('type' in value) _v5.type = value.type;\n            value = _v5;\n          }\n\n          if (key === 'data') {\n            value = value.toJSON();\n          }\n\n          json[key] = value;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return json;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Operation` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Operation} attrs\n     * @return {Operation}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Operation.isOperation(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Operation.fromJSON(attrs);\n      }\n\n      throw new Error('`Operation.create` only accepts objects or operations, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a list of `Operations` from `elements`.\n     *\n     * @param {Array<Operation|Object>|List<Operation|Object>} elements\n     * @return {List<Operation>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Operation.create));\n        return list;\n      }\n\n      throw new Error('`Operation.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n\n    /**\n     * Create a `Operation` from a JSON `object`.\n     *\n     * @param {Object|Operation} object\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Operation.isOperation(object)) {\n        return object;\n      }\n\n      var type = object.type;\n\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n      var attrs = { type: type };\n\n      if (!ATTRIBUTES) {\n        throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: \"' + type + '\"');\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = ATTRIBUTES[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n\n          var v = object[key];\n\n          // Default `data` to an empty object.\n          if (key === 'data' && v === undefined) {\n            v = {};\n          }\n\n          if (v === undefined) {\n            throw new Error('`Operation.fromJSON` was passed a \"' + type + '\" operation without the required \"' + key + '\" attribute.');\n          }\n\n          if (key === 'path' || key === 'newPath') {\n            v = PathUtils.create(v);\n          }\n\n          if (key === 'mark') {\n            v = Mark.create(v);\n          }\n\n          if (key === 'marks' && v != null) {\n            v = Mark.createSet(v);\n          }\n\n          if (key === 'node') {\n            v = Node.create(v);\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            v = Mark.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            v = Selection.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            v = Value.createProperties(v);\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            v = Node.createProperties(v);\n          }\n\n          if (key === 'data') {\n            v = Map(v);\n          }\n\n          attrs[key] = v;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var node = new Operation(attrs);\n      return node;\n    }\n\n    /**\n     * Check if `any` is a list of operations.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isOperationList',\n    value: function isOperationList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Operation.isOperation(item);\n      });\n    }\n  }]);\n  return Operation;\n}(Record(DEFAULTS$11));\n\n/**\n * Default properties.\n *\n * @type {Object}\n */\n\nvar DEFAULTS$12 = {\n  operations: undefined,\n  value: undefined\n\n  /**\n   * Change.\n   *\n   * @type {Change}\n   */\n\n};\nvar Change = function (_Record) {\n  inherits(Change, _Record);\n\n  function Change() {\n    classCallCheck(this, Change);\n    return possibleConstructorReturn(this, (Change.__proto__ || Object.getPrototypeOf(Change)).apply(this, arguments));\n  }\n\n  createClass(Change, [{\n    key: 'toJSON',\n\n\n    /**\n     * Return a JSON representation of the change.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        value: this.value.toJSON(options),\n        operations: this.operations.toArray().map(function (o) {\n          return o.toJSON(options);\n        })\n      };\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Change` with `attrs`.\n     *\n     * @param {Object|Change} attrs\n     * @return {Change}\n     */\n\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Change.isChange(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Change.fromJSON(attrs);\n      }\n\n      throw new Error('`Change.create` only accepts objects or changes, but you passed it: ' + attrs);\n    }\n\n    /**\n     * Create a `Change` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Change}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var value = object.value,\n          _object$operations = object.operations,\n          operations = _object$operations === undefined ? [] : _object$operations;\n\n\n      var change = new Change({\n        value: Value.create(value),\n        operations: Operation.createList(operations)\n      });\n\n      return change;\n    }\n  }]);\n  return Change;\n}(Record(DEFAULTS$12));\n\n/**\n * A plugin that adds a set of commands to the editor.\n *\n * @param {Object} commands\n * @return {Object}\n */\n\nfunction CommandsPlugin() {\n  var commands = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  /**\n   * On command, if it exists in our list of commands, call it.\n   *\n   * @param {Object} command\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onCommand(command, editor, next) {\n    var type = command.type,\n        args = command.args;\n\n    var fn = commands[type];\n    if (!fn) return next();\n    editor.command.apply(editor, [fn].concat(toConsumableArray(args)));\n  }\n\n  /**\n   * On construct, register all the commands.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onConstruct(editor, next) {\n    for (var command in commands) {\n      editor.registerCommand(command);\n    }\n\n    return next();\n  }\n\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n  return {\n    onCommand: onCommand,\n    onConstruct: onConstruct\n  };\n}\n\n/**\n * Surrogate pair start and end points.\n *\n * @type {Number}\n */\n\nvar SURROGATE_START = 0xd800;\nvar SURROGATE_END = 0xdfff;\n\n/**\n * A regex to match space characters.\n *\n * @type {RegExp}\n */\n\nvar SPACE = /\\s/;\n\n/**\n * A regex to match chameleon characters, that count as word characters as long\n * as they are inside of a word.\n *\n * @type {RegExp}\n */\n\nvar CHAMELEON = /['\\u2018\\u2019]/;\n\n/**\n * A regex that matches punctuation.\n *\n * @type {RegExp}\n */\n\nvar PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\n\n/**\n * Is a character `code` in a surrogate character.\n *\n * @param {Number} code\n * @return {Boolean}\n */\n\nfunction isSurrogate(code) {\n  return SURROGATE_START <= code && code <= SURROGATE_END;\n}\n\n/**\n * Is a character a word character? Needs the `remaining` characters too.\n *\n * @param {String} char\n * @param {String|Void} remaining\n * @return {Boolean}\n */\n\nfunction isWord(char, remaining) {\n  if (SPACE.test(char)) return false;\n\n  // If it's a chameleon character, recurse to see if the next one is or not.\n  if (CHAMELEON.test(char)) {\n    var next = remaining.charAt(0);\n    var length = getCharLength(next);\n    next = remaining.slice(0, length);\n    var rest = remaining.slice(length);\n    if (isWord(next, rest)) return true;\n  }\n\n  if (PUNCTUATION.test(char)) return false;\n  return true;\n}\n\n/**\n * Get the length of a `character`.\n *\n * @param {String} char\n * @return {Number}\n */\n\nfunction getCharLength(char) {\n  return isSurrogate(char.charCodeAt(0)) ? 2 : 1;\n}\n\n/**\n * Get the offset to the end of the first character in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\nfunction getCharOffset(text) {\n  var char = text.charAt(0);\n  return getCharLength(char);\n}\n\n/**\n * Get the offset to the end of the character before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\nfunction getCharOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  return getCharOffset(text);\n}\n\n/**\n * Get the offset to the end of the character after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\nfunction getCharOffsetForward(text, offset) {\n  text = text.slice(offset);\n  return getCharOffset(text);\n}\n\n/**\n * Get the offset to the end of the first word in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\nfunction getWordOffset(text) {\n  var length = 0;\n  var i = 0;\n  var started = false;\n  var char = void 0;\n\n  while (char = text.charAt(i)) {\n    var l = getCharLength(char);\n    char = text.slice(i, i + l);\n    var rest = text.slice(i + l);\n\n    if (isWord(char, rest)) {\n      started = true;\n      length += l;\n    } else if (!started) {\n      length += l;\n    } else {\n      break;\n    }\n\n    i += l;\n  }\n\n  return length;\n}\n\n/**\n * Get the offset to the end of the word before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\nfunction getWordOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  var o = getWordOffset(text);\n  return o;\n}\n\n/**\n * Get the offset to the end of the word after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\nfunction getWordOffsetForward(text, offset) {\n  text = text.slice(offset);\n  var o = getWordOffset(text);\n  return o;\n}\n\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar TextUtils = {\n  getCharLength: getCharLength,\n  getCharOffset: getCharOffset,\n  getCharOffsetBackward: getCharOffsetBackward,\n  getCharOffsetForward: getCharOffsetForward,\n  getWordOffset: getWordOffset,\n  getWordOffsetBackward: getWordOffsetBackward,\n  getWordOffsetForward: getWordOffsetForward,\n  isSurrogate: isSurrogate,\n  isWord: isWord\n};\n\n/**\n * Ensure that an expanded selection is deleted first, and return the updated\n * range to account for the deleted part.\n *\n * @param {Editor}\n */\n\nfunction deleteExpandedAtRange(editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var _range = range,\n      start = _range.start,\n      end = _range.end;\n\n\n  if (document.hasDescendant(start.key)) {\n    range = range.moveToStart();\n  } else {\n    range = range.moveTo(end.key, 0).normalize(document);\n  }\n\n  return range;\n}\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$1 = {};\n\n/**\n * Add a new `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\nCommands$1.addMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n\n  var texts = document.getTextsAtRange(range);\n\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n\n      var index = 0;\n      var length = node.text.length;\n\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n\n      editor.addMarkByKey(key, index, length, mark);\n    });\n  });\n};\n\n/**\n * Add a list of `marks` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Array<Mixed>} mark\n */\n\nCommands$1.addMarksAtRange = function (editor, range, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMarkAtRange(range, mark);\n  });\n};\n\n/**\n * Delete everything in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteAtRange = function (editor, range) {\n  // Snapshot the selection, which creates an extra undo save point, so that\n  // when you undo a delete, the expanded selection will be retained.\n  editor.snapshotSelection();\n\n  var value = editor.value;\n  var start = range.start,\n      end = range.end;\n\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var endKey = end.key;\n  var endOffset = end.offset;\n  var document = value.document;\n\n  var isStartVoid = document.hasVoidParent(startKey, editor);\n  var isEndVoid = document.hasVoidParent(endKey, editor);\n  var startBlock = document.getClosestBlock(startKey);\n  var endBlock = document.getClosestBlock(endKey);\n\n  // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n  var isHanging = startOffset === 0 && endOffset === 0 && isStartVoid === false && startKey === startBlock.getFirstText().key && endKey === endBlock.getFirstText().key;\n\n  // If it's a hanging selection, nudge it back to end in the previous text.\n  if (isHanging && isEndVoid) {\n    var prevText = document.getPreviousText(endKey);\n    endKey = prevText.key;\n    endOffset = prevText.text.length;\n    isEndVoid = document.hasVoidParent(endKey, editor);\n  }\n\n  editor.withoutNormalizing(function () {\n    // If the start node is inside a void node, remove the void node and update\n    // the starting point to be right after it, continuously until the start point\n    // is not a void, or until the entire range is handled.\n    while (isStartVoid) {\n      var startVoid = document.getClosestVoid(startKey, editor);\n      var nextText = document.getNextText(startKey);\n      editor.removeNodeByKey(startVoid.key);\n\n      // If the start and end keys are the same, we're done.\n      if (startKey === endKey) return;\n\n      // If there is no next text node, we're done.\n      if (!nextText) return;\n\n      // Continue...\n      document = editor.value.document;\n      startKey = nextText.key;\n      startOffset = 0;\n      isStartVoid = document.hasVoidParent(startKey, editor);\n    }\n\n    // If the end node is inside a void node, do the same thing but backwards. But\n    // we don't need any aborting checks because if we've gotten this far there\n    // must be a non-void node that will exit the loop.\n    while (isEndVoid) {\n      var endVoid = document.getClosestVoid(endKey, editor);\n      var _prevText = document.getPreviousText(endKey);\n      editor.removeNodeByKey(endVoid.key);\n\n      // Continue...\n      document = editor.value.document;\n      endKey = _prevText.key;\n      endOffset = _prevText.text.length;\n      isEndVoid = document.hasVoidParent(endKey, editor);\n    }\n\n    // If the start and end key are the same, and it was a hanging selection, we\n    // can just remove the entire block.\n    if (startKey === endKey && isHanging) {\n      editor.removeNodeByKey(startBlock.key);\n      return;\n    } else if (startKey === endKey) {\n      // Otherwise, if it wasn't hanging, we're inside a single text node, so we can\n      // simply remove the text in the range.\n      var index = startOffset;\n      var length = endOffset - startOffset;\n      editor.removeTextByKey(startKey, index, length);\n      return;\n    } else {\n      // Otherwise, we need to recursively remove text and nodes inside the start\n      // block after the start offset and inside the end block before the end\n      // offset. Then remove any blocks that are in between the start and end\n      // blocks. Then finally merge the start and end nodes.\n      startBlock = document.getClosestBlock(startKey);\n      endBlock = document.getClosestBlock(endKey);\n      var startText = document.getNode(startKey);\n      var endText = document.getNode(endKey);\n      var startLength = startText.text.length - startOffset;\n      var endLength = endOffset;\n\n      var ancestor = document.getCommonAncestor(startKey, endKey);\n      var startChild = ancestor.getFurthestAncestor(startKey);\n      var endChild = ancestor.getFurthestAncestor(endKey);\n\n      var startParent = document.getParent(startBlock.key);\n      var startParentIndex = startParent.nodes.indexOf(startBlock);\n      var endParentIndex = startParent.nodes.indexOf(endBlock);\n\n      var child = void 0;\n\n      // Iterate through all of the nodes in the tree after the start text node\n      // but inside the end child, and remove them.\n      child = startText;\n\n      while (child.key !== startChild.key) {\n        var parent = document.getParent(child.key);\n        var _index = parent.nodes.indexOf(child);\n        var afters = parent.nodes.slice(_index + 1);\n\n        afters.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n\n        child = parent;\n      }\n\n      // Remove all of the middle children.\n      var startChildIndex = ancestor.nodes.indexOf(startChild);\n      var endChildIndex = ancestor.nodes.indexOf(endChild);\n      var middles = ancestor.nodes.slice(startChildIndex + 1, endChildIndex);\n\n      middles.reverse().forEach(function (node) {\n        editor.removeNodeByKey(node.key);\n      });\n\n      // Remove the nodes before the end text node in the tree.\n      child = endText;\n\n      while (child.key !== endChild.key) {\n        var _parent = document.getParent(child.key);\n        var _index2 = _parent.nodes.indexOf(child);\n        var befores = _parent.nodes.slice(0, _index2);\n\n        befores.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n\n        child = _parent;\n      }\n\n      // Remove any overlapping text content from the leaf text nodes.\n      if (startLength !== 0) {\n        editor.removeTextByKey(startKey, startOffset, startLength);\n      }\n\n      if (endLength !== 0) {\n        editor.removeTextByKey(endKey, 0, endOffset);\n      }\n\n      // If the start and end blocks aren't the same, move and merge the end block\n      // into the start block.\n      if (startBlock.key !== endBlock.key) {\n        document = editor.value.document;\n        var lonely = document.getFurthestOnlyChildAncestor(endBlock.key);\n\n        // Move the end block to be right after the start block.\n        if (endParentIndex !== startParentIndex + 1) {\n          editor.moveNodeByKey(endBlock.key, startParent.key, startParentIndex + 1);\n        }\n\n        // If the selection is hanging, just remove the start block, otherwise\n        // merge the end block into it.\n        if (isHanging) {\n          editor.removeNodeByKey(startBlock.key);\n        } else {\n          editor.mergeNodeByKey(endBlock.key);\n        }\n\n        // If nested empty blocks are left over above the end block, remove them.\n        if (lonely) {\n          editor.removeNodeByKey(lonely.key);\n        }\n      }\n    }\n  });\n};\n\n/**\n * Delete backward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\nCommands$1.deleteBackwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range2 = range,\n      start = _range2.start,\n      focus = _range2.focus;\n\n  // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.key, editor);\n\n  // If there is a void parent, delete it.\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  }\n\n  // If the range is at the start of the document, abort.\n  if (start.isAtStartOfNode(document)) {\n    return;\n  }\n\n  var block = document.getClosestBlock(start.key);\n\n  // PERF: If the closest block is empty, remove it. This is just a shortcut,\n  // since merging it would result in the same outcome.\n  if (document.nodes.size !== 1 && block && block.text === '' && block.nodes.size === 1) {\n    editor.removeNodeByKey(block.key);\n    return;\n  }\n\n  // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n  var text = document.getDescendant(start.key);\n\n  if (start.isAtStartOfNode(text)) {\n    var prev = document.getPreviousText(text.key);\n    var inline = document.getClosestInline(text.key);\n\n    // If the range is at the start of the inline node, and previous text node\n    // is empty, take the text node before that, or \"prevBlock\" would be the\n    // same node as \"block\"\n    if (inline && prev.text === '') {\n      prev = document.getPreviousText(prev.key);\n    }\n\n    var prevBlock = document.getClosestBlock(prev.key);\n    var prevVoid = document.getClosestVoid(prev.key, editor);\n\n    // If the previous text node has a void parent, remove it.\n    if (prevVoid) {\n      editor.removeNodeByKey(prevVoid.key);\n      return;\n    }\n\n    // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n    if (n === 1 && prevBlock !== block) {\n      range = range.moveAnchorTo(prev.key, prev.text.length);\n      editor.deleteAtRange(range);\n      return;\n    }\n  }\n\n  // If the focus offset is farther than the number of characters to delete,\n  // just remove the characters backwards inside the current node.\n  if (n < focus.offset) {\n    range = range.moveFocusBackward(n);\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  // Otherwise, we need to see how many nodes backwards to go.\n  var node = text;\n  var offset = 0;\n  var traversed = focus.offset;\n\n  while (n > traversed) {\n    node = document.getPreviousText(node.key);\n    var next = traversed + node.text.length;\n\n    if (n <= next) {\n      offset = next - n;\n      break;\n    } else {\n      traversed = next;\n    }\n  }\n\n  range = range.moveAnchorTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n\n/**\n * Delete backward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteCharBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var n = TextUtils.getCharOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n\n/**\n * Delete forward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteCharForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var n = TextUtils.getCharOffsetForward(text, o);\n  editor.deleteForwardAtRange(range, n);\n};\n\n/**\n * Delete forward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\nCommands$1.deleteForwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range3 = range,\n      start = _range3.start,\n      focus = _range3.focus;\n\n  // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.key, editor);\n\n  // If the node has a void parent, delete it.\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  }\n\n  var block = document.getClosestBlock(start.key);\n\n  // If the closest is not void, but empty, remove it\n  if (block && !editor.isVoid(block) && block.text === '' && document.nodes.size !== 1) {\n    var nextBlock = document.getNextBlock(block.key);\n    editor.removeNodeByKey(block.key);\n\n    if (nextBlock && nextBlock.key) {\n      editor.moveToStartOfNode(nextBlock);\n    }\n\n    return;\n  }\n\n  // If the range is at the start of the document, abort.\n  if (start.isAtEndOfNode(document)) {\n    return;\n  }\n\n  // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n  var text = document.getDescendant(start.key);\n\n  if (start.isAtEndOfNode(text)) {\n    var next = document.getNextText(text.key);\n    var _nextBlock = document.getClosestBlock(next.key);\n    var nextVoid = document.getClosestVoid(next.key, editor);\n\n    // If the next text node has a void parent, remove it.\n    if (nextVoid) {\n      editor.removeNodeByKey(nextVoid.key);\n      return;\n    }\n\n    // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n    if (n === 1 && _nextBlock !== block) {\n      range = range.moveFocusTo(next.key, 0);\n      editor.deleteAtRange(range);\n      return;\n    }\n  }\n\n  // If the remaining characters to the end of the node is greater than or equal\n  // to the number of characters to delete, just remove the characters forwards\n  // inside the current node.\n  if (n <= text.text.length - focus.offset) {\n    range = range.moveFocusForward(n);\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  // Otherwise, we need to see how many nodes forwards to go.\n  var node = text;\n  var offset = focus.offset;\n  var traversed = text.text.length - focus.offset;\n\n  while (n > traversed) {\n    node = document.getNextText(node.key);\n    var _next = traversed + node.text.length;\n\n    if (n <= _next) {\n      offset = n - traversed;\n      break;\n    } else {\n      traversed = _next;\n    }\n  }\n\n  range = range.moveFocusTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n\n/**\n * Delete backward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteLineBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteBackwardAtRange(range, o);\n};\n\n/**\n * Delete forward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteLineForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteForwardAtRange(range, startBlock.text.length - o);\n};\n\n/**\n * Delete backward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteWordBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var n = o === 0 ? 1 : TextUtils.getWordOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n\n/**\n * Delete forward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\nCommands$1.deleteWordForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n\n  var wordOffset = TextUtils.getWordOffsetForward(text, o);\n  var n = wordOffset === 0 ? 1 : wordOffset;\n  editor.deleteForwardAtRange(range, n);\n};\n\n/**\n * Insert a `block` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|String|Object} block\n */\n\nCommands$1.insertBlockAtRange = function (editor, range, block) {\n  range = deleteExpandedAtRange(editor, range);\n  block = Block.create(block);\n\n  var value = editor.value;\n  var document = value.document;\n  var _range4 = range,\n      start = _range4.start;\n\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var startBlock = document.getClosestBlock(startKey);\n  var startInline = document.getClosestInline(startKey);\n  var parent = document.getParent(startBlock.key);\n  var index = parent.nodes.indexOf(startBlock);\n\n  if (editor.isVoid(startBlock)) {\n    var extra = start.isAtEndOfNode(startBlock) ? 1 : 0;\n    editor.insertNodeByKey(parent.key, index + extra, block);\n  } else if (!startInline && startBlock.text === '') {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else if (start.isAtStartOfNode(startBlock)) {\n    editor.insertNodeByKey(parent.key, index, block);\n  } else if (start.isAtEndOfNode(startBlock)) {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else {\n    if (startInline && editor.isVoid(startInline)) {\n      var atEnd = start.isAtEndOfNode(startInline);\n      var siblingText = atEnd ? document.getNextText(startKey) : document.getPreviousText(startKey);\n\n      var splitRange = atEnd ? range.moveToStartOfNode(siblingText) : range.moveToEndOfNode(siblingText);\n\n      startKey = splitRange.start.key;\n      startOffset = splitRange.start.offset;\n    }\n\n    editor.withoutNormalizing(function () {\n      editor.splitDescendantsByKey(startBlock.key, startKey, startOffset);\n      editor.insertNodeByKey(parent.key, index + 1, block);\n    });\n  }\n};\n\n/**\n * Insert a `fragment` at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Document} fragment\n */\n\nCommands$1.insertFragmentAtRange = function (editor, range, fragment) {\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n\n    // If the fragment is empty, there's nothing to do after deleting.\n    if (!fragment.nodes.size) return;\n\n    // Regenerate the keys for all of the fragments nodes, so that they're\n    // guaranteed not to collide with the existing keys in the document. Otherwise\n    // they will be rengerated automatically and we won't have an easy way to\n    // reference them.\n    fragment = fragment.mapDescendants(function (child) {\n      return child.regenerateKey();\n    });\n\n    // Calculate a few things...\n    var _range5 = range,\n        start = _range5.start;\n    var value = editor.value;\n    var document = value.document;\n\n    var startText = document.getDescendant(start.key);\n    var startBlock = document.getClosestBlock(startText.key);\n    var startChild = startBlock.getFurthestAncestor(startText.key);\n    var isAtStart = start.isAtStartOfNode(startBlock);\n    var parent = document.getParent(startBlock.key);\n    var index = parent.nodes.indexOf(startBlock);\n    var blocks = fragment.getBlocks();\n    var firstChild = fragment.nodes.first();\n    var lastChild = fragment.nodes.last();\n    var firstBlock = blocks.first();\n    var lastBlock = blocks.last();\n    var insertionNode = findInsertionNode(fragment, document, startBlock.key);\n\n    // If the fragment only contains a void block, use `insertBlock` instead.\n    if (firstBlock === lastBlock && editor.isVoid(firstBlock)) {\n      editor.insertBlockAtRange(range, firstBlock);\n      return;\n    }\n\n    // If inserting the entire fragment and it starts or ends with a single\n    // nested block, e.g. a table, we do not merge it with existing blocks.\n    if (insertionNode === fragment && (firstChild.hasBlockChildren() || lastChild.hasBlockChildren())) {\n      fragment.nodes.reverse().forEach(function (node) {\n        editor.insertBlockAtRange(range, node);\n      });\n      return;\n    }\n\n    // If the first and last block aren't the same, we need to insert all of the\n    // nodes after the insertion node's first block at the index.\n    if (firstBlock !== lastBlock) {\n      var lonelyParent = insertionNode.getFurthest(firstBlock.key, function (p) {\n        return p.nodes.size === 1;\n      });\n      var lonelyChild = lonelyParent || firstBlock;\n\n      var startIndex = parent.nodes.indexOf(startBlock);\n      var excludingLonelyChild = insertionNode.removeNode(lonelyChild.key);\n\n      excludingLonelyChild.nodes.forEach(function (node, i) {\n        var newIndex = startIndex + i + 1;\n        editor.insertNodeByKey(parent.key, newIndex, node);\n      });\n    }\n\n    // Check if we need to split the node.\n    if (start.offset !== 0) {\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    }\n\n    // Update our variables with the new value.\n    document = editor.value.document;\n    startText = document.getDescendant(start.key);\n    startBlock = document.getClosestBlock(start.key);\n    startChild = startBlock.getFurthestAncestor(startText.key);\n\n    // If the first and last block aren't the same, we need to move any of the\n    // starting block's children after the split into the last block of the\n    // fragment, which has already been inserted.\n    if (firstBlock !== lastBlock) {\n      var nextChild = isAtStart ? startChild : startBlock.getNextSibling(startChild.key);\n      var nextNodes = nextChild ? startBlock.nodes.skipUntil(function (n) {\n        return n.key === nextChild.key;\n      }) : List();\n      var lastIndex = lastBlock.nodes.size;\n\n      nextNodes.forEach(function (node, i) {\n        var newIndex = lastIndex + i;\n        editor.moveNodeByKey(node.key, lastBlock.key, newIndex);\n      });\n    }\n\n    // If the starting block is empty, we replace it entirely with the first block\n    // of the fragment, since this leads to a more expected behavior for the user.\n    if (!editor.isVoid(startBlock) && startBlock.text === '' && !startBlock.findDescendant(function (n) {\n      return editor.isVoid(n);\n    })) {\n      editor.removeNodeByKey(startBlock.key);\n      editor.insertNodeByKey(parent.key, index, firstBlock);\n    } else {\n      // Otherwise, we maintain the starting block, and insert all of the first\n      // block's inline nodes into it at the split point.\n      var inlineChild = startBlock.getFurthestAncestor(startText.key);\n      var inlineIndex = startBlock.nodes.indexOf(inlineChild);\n\n      firstBlock.nodes.forEach(function (inline, i) {\n        var o = start.offset === 0 ? 0 : 1;\n        var newIndex = inlineIndex + i + o;\n        editor.insertNodeByKey(startBlock.key, newIndex, inline);\n      });\n    }\n  });\n};\n\nvar findInsertionNode = function findInsertionNode(fragment, document, startKey) {\n  var hasSingleNode = function hasSingleNode(object) {\n    if (!object || object.object === 'text') return;\n    return object.nodes.size === 1;\n  };\n\n  var firstNode = function firstNode(object) {\n    return object && object.nodes.first();\n  };\n  var node = fragment;\n\n  if (hasSingleNode(fragment)) {\n    var fragmentInner = firstNode(fragment);\n\n    var matches = function matches(documentNode) {\n      return documentNode.type === fragmentInner.type;\n    };\n    var documentInner = document.getFurthest(startKey, matches);\n\n    if (documentInner === document.getParent(startKey)) node = fragmentInner;\n\n    while (hasSingleNode(fragmentInner) && hasSingleNode(documentInner)) {\n      fragmentInner = firstNode(fragmentInner);\n      documentInner = firstNode(documentInner);\n\n      if (fragmentInner.type === documentInner.type) {\n        node = fragmentInner;\n      } else {\n        break;\n      }\n    }\n  }\n\n  return node;\n};\n\n/**\n * Insert an `inline` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|String|Object} inline\n */\n\nCommands$1.insertInlineAtRange = function (editor, range, inline) {\n  inline = Inline.create(inline);\n\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n\n    var value = editor.value;\n    var document = value.document;\n    var _range6 = range,\n        start = _range6.start;\n\n    var parent = document.getParent(start.key);\n    var startText = document.assertDescendant(start.key);\n    var index = parent.nodes.indexOf(startText);\n\n    if (editor.isVoid(parent)) {\n      return;\n    }\n\n    editor.splitNodeByKey(start.key, start.offset);\n    editor.insertNodeByKey(parent.key, index + 1, inline);\n  });\n};\n\n/**\n * Insert `text` at a `range`, with optional `marks`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$1.insertTextAtRange = function (editor, range, text, marks) {\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n\n    var value = editor.value;\n    var document = value.document;\n    var _range7 = range,\n        start = _range7.start;\n\n    var offset = start.offset;\n    var parent = document.getParent(start.key);\n\n    if (editor.isVoid(parent)) {\n      return;\n    }\n\n    editor.insertTextByKey(start.key, offset, text, marks);\n  });\n};\n\n/**\n * Remove an existing `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mark|String} mark (optional)\n */\n\nCommands$1.removeMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n\n  var value = editor.value;\n  var document = value.document;\n\n  var texts = document.getTextsAtRange(range);\n  var start = range.start,\n      end = range.end;\n\n\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n\n      var index = 0;\n      var length = node.text.length;\n\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n\n      editor.removeMarkByKey(key, index, length, mark);\n    });\n  });\n};\n\n/**\n * Set the `properties` of block nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\nCommands$1.setBlocksAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n\n  var blocks = document.getLeafBlocksAtRange(range);\n\n  var start = range.start,\n      end = range.end,\n      isCollapsed = range.isCollapsed;\n\n  var isStartVoid = document.hasVoidParent(start.key, editor);\n  var startBlock = document.getClosestBlock(start.key);\n  var endBlock = document.getClosestBlock(end.key);\n\n  // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n  var isHanging = isCollapsed === false && start.offset === 0 && end.offset === 0 && isStartVoid === false && start.key === startBlock.getFirstText().key && end.key === endBlock.getFirstText().key;\n\n  // If it's a hanging selection, ignore the last block.\n  var sets = isHanging ? blocks.slice(0, -1) : blocks;\n\n  editor.withoutNormalizing(function () {\n    sets.forEach(function (block) {\n      editor.setNodeByKey(block.key, properties);\n    });\n  });\n};\n\n/**\n * Set the `properties` of inline nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\nCommands$1.setInlinesAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n\n  var inlines = document.getLeafInlinesAtRange(range);\n\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      editor.setNodeByKey(inline.key, properties);\n    });\n  });\n};\n\n/**\n * Split the block nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\nCommands$1.splitBlockAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  range = deleteExpandedAtRange(editor, range);\n\n  var _range8 = range,\n      start = _range8.start,\n      end = _range8.end;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n\n  var node = document.assertDescendant(start.key);\n  var parent = document.getClosestBlock(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'block' && h < height) {\n    node = parent;\n    parent = document.getClosestBlock(parent.key);\n    h++;\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.splitDescendantsByKey(node.key, start.key, start.offset);\n\n    value = editor.value;\n    document = value.document;\n\n    if (range.isExpanded) {\n      if (range.isBackward) range = range.flip();\n      var nextBlock = document.getNextBlock(node.key);\n      range = range.moveAnchorToStartOfNode(nextBlock);\n      range = range.setFocus(range.focus.setPath(null));\n\n      if (start.key === end.key) {\n        range = range.moveFocusTo(range.anchor.key, end.offset - start.offset);\n      }\n\n      range = document.resolveRange(range);\n      editor.deleteAtRange(range);\n    }\n  });\n};\n\n/**\n * Split the inline nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\nCommands$1.splitInlineAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n\n  range = deleteExpandedAtRange(editor, range);\n\n  var _range9 = range,\n      start = _range9.start;\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertDescendant(start.key);\n  var parent = document.getClosestInline(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'inline' && h < height) {\n    node = parent;\n    parent = document.getClosestInline(parent.key);\n    h++;\n  }\n\n  editor.splitDescendantsByKey(node.key, start.key, start.offset);\n};\n\n/**\n * Add or remove a `mark` from the characters at `range`, depending on whether\n * it's already there.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\nCommands$1.toggleMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n\n  mark = Mark.create(mark);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var marks = document.getActiveMarksAtRange(range);\n  var exists = marks.some(function (m) {\n    return m.equals(mark);\n  });\n\n  if (exists) {\n    editor.removeMarkAtRange(range, mark);\n  } else {\n    editor.addMarkAtRange(range, mark);\n  }\n};\n\n/**\n * Unwrap all of the block nodes in a `range` from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\nCommands$1.unwrapBlockAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var blocks = document.getLeafBlocksAtRange(range);\n  var wrappers = blocks.map(function (block) {\n    return document.getClosest(block.key, function (parent) {\n      if (parent.object !== 'block') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n\n  editor.withoutNormalizing(function () {\n    wrappers.forEach(function (block) {\n      var first = block.nodes.first();\n      var last = block.nodes.last();\n      var parent = editor.value.document.getParent(block.key);\n      var index = parent.nodes.indexOf(block);\n\n      var children = block.nodes.filter(function (child) {\n        return blocks.some(function (b) {\n          return child === b || child.hasDescendant(b.key);\n        });\n      });\n\n      var firstMatch = children.first();\n      var lastMatch = children.last();\n\n      if (first === firstMatch && last === lastMatch) {\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n\n        editor.removeNodeByKey(block.key);\n      } else if (last === lastMatch) {\n        block.nodes.skipUntil(function (n) {\n          return n === firstMatch;\n        }).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      } else if (first === firstMatch) {\n        block.nodes.takeUntil(function (n) {\n          return n === lastMatch;\n        }).push(lastMatch).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n      } else {\n        var firstText = firstMatch.getFirstText();\n\n        editor.splitDescendantsByKey(block.key, firstText.key, 0);\n\n        document = editor.value.document;\n\n        children.forEach(function (child, i) {\n          if (i === 0) {\n            var extra = child;\n            child = document.getNextBlock(child.key);\n            editor.removeNodeByKey(extra.key);\n          }\n\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      }\n    });\n  });\n};\n\n/**\n * Unwrap the inline nodes in a `range` from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\nCommands$1.unwrapInlineAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var texts = document.getTextsAtRange(range);\n  var inlines = texts.map(function (text) {\n    return document.getClosest(text.key, function (parent) {\n      if (parent.object !== 'inline') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      var parent = editor.value.document.getParent(inline.key);\n      var index = parent.nodes.indexOf(inline);\n\n      inline.nodes.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, parent.key, index + i);\n      });\n\n      editor.removeNodeByKey(inline.key);\n    });\n  });\n};\n\n/**\n * Wrap all of the blocks in a `range` in a new `block`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|Object|String} block\n */\n\nCommands$1.wrapBlockAtRange = function (editor, range, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n\n  var value = editor.value;\n  var document = value.document;\n\n\n  var blocks = document.getLeafBlocksAtRange(range);\n  var firstblock = blocks.first();\n  var lastblock = blocks.last();\n  var parent = void 0,\n      siblings = void 0,\n      index = void 0;\n\n  // If there is only one block in the selection then we know the parent and\n  // siblings.\n  if (blocks.length === 1) {\n    parent = document.getParent(firstblock.key);\n    siblings = blocks;\n  } else {\n    // Determine closest shared parent to all blocks in selection.\n    parent = document.getClosest(firstblock.key, function (p1) {\n      return !!document.getClosest(lastblock.key, function (p2) {\n        return p1 === p2;\n      });\n    });\n  }\n\n  // If no shared parent could be found then the parent is the document.\n  if (parent == null) parent = document;\n\n  // Create a list of direct children siblings of parent that fall in the\n  // selection.\n  if (siblings == null) {\n    var indexes = parent.nodes.reduce(function (ind, node, i) {\n      if (node === firstblock || node.hasDescendant(firstblock.key)) ind[0] = i;\n      if (node === lastblock || node.hasDescendant(lastblock.key)) ind[1] = i;\n      return ind;\n    }, []);\n\n    index = indexes[0];\n    siblings = parent.nodes.slice(indexes[0], indexes[1] + 1);\n  }\n\n  // Get the index to place the new wrapped node at.\n  if (index == null) {\n    index = parent.nodes.indexOf(siblings.first());\n  }\n\n  editor.withoutNormalizing(function () {\n    // Inject the new block node into the parent.\n    editor.insertNodeByKey(parent.key, index, block);\n\n    // Move the sibling nodes into the new block node.\n    siblings.forEach(function (node, i) {\n      editor.moveNodeByKey(node.key, block.key, i);\n    });\n  });\n};\n\n/**\n * Wrap the text and inlines in a `range` in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|Object|String} inline\n */\n\nCommands$1.wrapInlineAtRange = function (editor, range, inline) {\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n\n\n  if (range.isCollapsed) {\n    // Wrapping an inline void\n    var inlineParent = document.getClosestInline(start.key);\n\n    if (!inlineParent) {\n      return;\n    }\n\n    if (!editor.isVoid(inlineParent)) {\n      return;\n    }\n\n    return editor.wrapInlineByKey(inlineParent.key, inline);\n  }\n\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n\n  var blocks = document.getLeafBlocksAtRange(range);\n  var startBlock = document.getClosestBlock(start.key);\n  var endBlock = document.getClosestBlock(end.key);\n  var startInline = document.getClosestInline(start.key);\n  var endInline = document.getClosestInline(end.key);\n  var startChild = startBlock.getFurthestAncestor(start.key);\n  var endChild = endBlock.getFurthestAncestor(end.key);\n\n  editor.withoutNormalizing(function () {\n    if (!startInline || startInline !== endInline) {\n      editor.splitDescendantsByKey(endChild.key, end.key, end.offset);\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    }\n\n    document = editor.value.document;\n    startBlock = document.getDescendant(startBlock.key);\n    endBlock = document.getDescendant(endBlock.key);\n    startChild = startBlock.getFurthestAncestor(start.key);\n    endChild = endBlock.getFurthestAncestor(end.key);\n    var startIndex = startBlock.nodes.indexOf(startChild);\n    var endIndex = endBlock.nodes.indexOf(endChild);\n\n    if (startInline && startInline === endInline) {\n      var texts = startBlock.getTextsAtRange(range).map(function (text) {\n        if (start.key === text.key && end.key === text.key) {\n          return text.splitText(start.offset)[1].splitText(end.offset - start.offset)[0].regenerateKey();\n        } else if (start.key === text.key) {\n          return text.splitText(start.offset)[1].regenerateKey();\n        } else if (end.key === text.key) {\n          return text.splitText(end.offset)[0].regenerateKey();\n        } else {\n          return text.regenerateKey();\n        }\n      });\n\n      inline = inline.set('nodes', texts);\n      editor.insertInlineAtRange(range, inline);\n    } else if (startBlock === endBlock) {\n      document = editor.value.document;\n      startBlock = document.getClosestBlock(start.key);\n      startChild = startBlock.getFurthestAncestor(start.key);\n\n      var startInner = document.getNextSibling(startChild.key);\n      var startInnerIndex = startBlock.nodes.indexOf(startInner);\n      var endInner = start.key === end.key ? startInner : startBlock.getFurthestAncestor(end.key);\n      var inlines = startBlock.nodes.skipUntil(function (n) {\n        return n === startInner;\n      }).takeUntil(function (n) {\n        return n === endInner;\n      }).push(endInner);\n\n      var node = inline.regenerateKey();\n\n      editor.insertNodeByKey(startBlock.key, startInnerIndex, node);\n\n      inlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, node.key, i);\n      });\n    } else {\n      var startInlines = startBlock.nodes.slice(startIndex + 1);\n      var endInlines = endBlock.nodes.slice(0, endIndex + 1);\n      var startNode = inline.regenerateKey();\n      var endNode = inline.regenerateKey();\n\n      editor.insertNodeByKey(startBlock.key, startIndex + 1, startNode);\n      editor.insertNodeByKey(endBlock.key, endIndex, endNode);\n\n      startInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, startNode.key, i);\n      });\n\n      endInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, endNode.key, i);\n      });\n\n      blocks.slice(1, -1).forEach(function (block) {\n        var node = inline.regenerateKey();\n        editor.insertNodeByKey(block.key, 0, node);\n\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, node.key, i);\n        });\n      });\n    }\n  });\n};\n\n/**\n * Wrap the text in a `range` in a prefix/suffix.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} prefix\n * @param {String} suffix (optional)\n */\n\nCommands$1.wrapTextAtRange = function (editor, range, prefix) {\n  var suffix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : prefix;\n  var start = range.start,\n      end = range.end;\n\n  var startRange = range.moveToStart();\n  var endRange = range.moveToEnd();\n\n  if (start.key === end.key) {\n    endRange = endRange.moveForward(prefix.length);\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.insertTextAtRange(startRange, prefix);\n    editor.insertTextAtRange(endRange, suffix);\n  });\n};\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$2 = {};\n\n/**\n * Add mark to text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mixed} mark\n */\n\nCommands$2.addMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  editor.addMarksByPath(path, offset, length, [mark]);\n};\n\nCommands$2.addMarksByPath = function (editor, path, offset, length, marks) {\n  marks = Mark.createSet(marks);\n\n  if (!marks.size) {\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    marks.forEach(function (mark) {\n      editor.applyOperation({\n        type: 'add_mark',\n        path: path,\n        mark: Mark.create(mark)\n      });\n    });\n  });\n};\n\n/**\n * Insert a `fragment` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Fragment} fragment\n */\n\nCommands$2.insertFragmentByPath = function (editor, path, index, fragment) {\n  fragment.nodes.forEach(function (node, i) {\n    editor.insertNodeByPath(path, index + i, node);\n  });\n};\n\n/**\n * Insert a `node` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Node} node\n */\n\nCommands$2.insertNodeByPath = function (editor, path, index, node) {\n  editor.applyOperation({\n    type: 'insert_node',\n    path: path.concat(index),\n    node: node\n  });\n};\n\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$2.insertTextByPath = function (editor, path, offset, text, marks) {\n  marks = Mark.createSet(marks);\n  var value = editor.value;\n  var decorations = value.decorations,\n      document = value.document;\n\n  var node = document.assertNode(path);\n  var key = node.key;\n\n  var updated = false;\n\n  var decs = decorations.filter(function (dec) {\n    var start = dec.start,\n        end = dec.end,\n        mark = dec.mark;\n\n    var isAtomic = editor.isAtomic(mark);\n    if (!isAtomic) return true;\n    if (start.key !== key) return true;\n\n    if (start.offset < offset && (end.key !== key || end.offset > offset)) {\n      updated = true;\n      return false;\n    }\n\n    return true;\n  });\n\n  editor.withoutNormalizing(function () {\n    if (updated) {\n      editor.setDecorations(decs);\n    }\n\n    editor.applyOperation({\n      type: 'insert_text',\n      path: path,\n      offset: offset,\n      text: text\n    });\n\n    if (marks.size) {\n      editor.addMarksByPath(path, offset, text.length, marks);\n    }\n  });\n};\n\n/**\n * Merge a node by `path` with the previous node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.mergeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n\n  var original = document.getDescendant(path);\n  var previous = document.getPreviousSibling(path);\n\n  if (!previous) {\n    throw new Error('Unable to merge node with path \"' + path + '\", because it has no previous sibling.');\n  }\n\n  var position = previous.object === 'text' ? previous.text.length : previous.nodes.size;\n\n  editor.applyOperation({\n    type: 'merge_node',\n    path: path,\n    position: position,\n    // for undos to succeed we only need the type and data because\n    // these are the only properties that get changed in the merge operation\n    properties: {\n      type: original.type,\n      data: original.data\n    },\n    target: null\n  });\n};\n\n/**\n * Move a node by `path` to a new parent by `newParentPath` and `newIndex`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} newParentPath\n * @param {Number} newIndex\n */\n\nCommands$2.moveNodeByPath = function (editor, path, newParentPath, newIndex) {\n  // If the operation path and newParentPath are the same,\n  // this should be considered a NOOP\n  if (PathUtils.isEqual(path, newParentPath)) {\n    return editor;\n  }\n\n  var newPath = newParentPath.concat(newIndex);\n\n  if (PathUtils.isEqual(path, newPath)) {\n    return editor;\n  }\n\n  editor.applyOperation({\n    type: 'move_node',\n    path: path,\n    newPath: newPath\n  });\n};\n\n/**\n * Remove mark from text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mark} mark\n */\n\nCommands$2.removeMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  editor.removeMarksByPath(path, offset, length, [mark]);\n};\n\nCommands$2.removeMarksByPath = function (editor, path, offset, length, marks) {\n  marks = Mark.createSet(marks);\n\n  if (!marks.size) {\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    marks.forEach(function (mark) {\n      editor.applyOperation({\n        type: 'remove_mark',\n        path: path,\n        offset: offset,\n        length: length,\n        mark: mark\n      });\n    });\n  });\n};\n\n/**\n * Remove all `marks` from node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.removeAllMarksByPath = function (editor, path) {\n  var state = editor.state;\n  var document = state.document;\n\n  var node = document.assertNode(path);\n  var texts = node.object === 'text' ? [node] : node.getTextsAsArray();\n\n  texts.forEach(function (text) {\n    text.marks.forEach(function (mark) {\n      editor.removeMarkByKey(text.key, 0, text.text.length, mark);\n    });\n  });\n};\n\n/**\n * Remove a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.removeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.applyOperation({\n    type: 'remove_node',\n    path: path,\n    node: node\n  });\n};\n\n/**\n * Remove text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n */\n\nCommands$2.removeTextByPath = function (editor, path, offset, length) {\n  var value = editor.value;\n  var document = value.document,\n      decorations = value.decorations;\n\n  var node = document.assertNode(path);\n\n  var text = node.text;\n\n  var string = text.slice(offset, offset + length);\n\n  var key = node.key;\n\n  var updated = false;\n\n  var decs = decorations.filter(function (dec) {\n    var start = dec.start,\n        end = dec.end,\n        mark = dec.mark;\n\n    var isAtomic = editor.isAtomic(mark);\n\n    if (!isAtomic) {\n      return true;\n    }\n\n    if (start.key !== key) {\n      return true;\n    }\n\n    if (start.offset < offset && (end.key !== key || end.offset > offset)) {\n      updated = true;\n      return false;\n    }\n\n    return true;\n  });\n\n  editor.withoutNormalizing(function () {\n    if (updated) {\n      editor.setDecorations(decs);\n    }\n\n    editor.applyOperation({\n      type: 'remove_text',\n      path: path,\n      offset: offset,\n      text: string\n    });\n  });\n};\n\n/**\n`* Replace a `node` with another `node`\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|Node} node\n */\n\nCommands$2.replaceNodeByPath = function (editor, path, newNode) {\n  newNode = Node.create(newNode);\n  var index = path.last();\n  var parentPath = PathUtils.lift(path);\n\n  editor.withoutNormalizing(function () {\n    editor.removeNodeByPath(path);\n    editor.insertNodeByPath(parentPath, index, newNode);\n  });\n};\n\n/**\n * Replace a `length` of text at `offset` with new `text` and optional `marks`.\n *\n * @param {Editor} editor\n * @param {String} key\n * @param {Number} offset\n * @param {Number} length\n * @param {string} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$2.replaceTextByPath = function (editor, path, offset, length, text, marks) {\n  editor.withoutNormalizing(function () {\n    editor.removeTextByPath(path, offset, length);\n    editor.insertTextByPath(path, offset, text, marks);\n  });\n};\n\n/**\n * Set `newProperties` on mark on text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Object|Mark} properties\n * @param {Object} newProperties\n */\n\nCommands$2.setMarkByPath = function (editor, path, offset, length, properties, newProperties) {\n  properties = Mark.create(properties);\n  newProperties = Mark.createProperties(newProperties);\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n\n  editor.withoutNormalizing(function () {\n    // If it ends before the end of the node, we'll need to split to create a new\n    // text with different marks.\n    if (offset + length < node.text.length) {\n      editor.splitNodeByPath(path, offset + length);\n    }\n\n    // Same thing if it starts after the start. But in that case, we need to\n    // update our path and offset to point to the new start.\n    if (offset > 0) {\n      editor.splitNodeByPath(path, offset);\n      path = PathUtils.increment(path);\n      offset = 0;\n    }\n\n    editor.applyOperation({\n      type: 'set_mark',\n      path: path,\n      properties: properties,\n      newProperties: newProperties\n    });\n  });\n};\n\n/**\n * Set `properties` on a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} newProperties\n */\n\nCommands$2.setNodeByPath = function (editor, path, newProperties) {\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  newProperties = Node.createProperties(newProperties);\n  var prevProperties = pick(node, Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_node',\n    path: path,\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$2.setTextByPath = function (editor, path, text, marks) {\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  var end = node.text.length;\n  editor.replaceTextByPath(path, 0, end, text, marks);\n};\n\n/**\n * Split a node by `path` at `position`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} position\n * @param {Object} options\n */\n\nCommands$2.splitNodeByPath = function (editor, path, position) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$target = options.target,\n      target = _options$target === undefined ? null : _options$target;\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.getDescendant(path);\n\n  editor.applyOperation({\n    type: 'split_node',\n    path: path,\n    position: position,\n    target: target,\n    properties: {\n      type: node.type,\n      data: node.data\n    }\n  });\n};\n\n/**\n * Split a node deeply down the tree by `path`, `textPath` and `textOffset`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Array} textPath\n * @param {Number} textOffset\n */\n\nCommands$2.splitDescendantsByPath = function (editor, path, textPath, textOffset) {\n  if (path.equals(textPath)) {\n    editor.splitNodeByPath(textPath, textOffset);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  var text = document.assertNode(textPath);\n  var ancestors = document.getAncestors(textPath);\n  var nodes = ancestors.skipUntil(function (a) {\n    return a.key === node.key;\n  }).reverse().unshift(text);\n\n  var previous = void 0;\n  var index = void 0;\n\n  editor.withoutNormalizing(function () {\n    nodes.forEach(function (n) {\n      var prevIndex = index == null ? null : index;\n      index = previous ? n.nodes.indexOf(previous) + 1 : textOffset;\n      previous = n;\n      editor.splitNodeByKey(n.key, index, { target: prevIndex });\n    });\n  });\n};\n\n/**\n * Unwrap content from an inline parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\nCommands$2.unwrapInlineByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapInlineAtRange(range, properties);\n};\n\n/**\n * Unwrap content from a block parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\nCommands$2.unwrapBlockByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapBlockAtRange(range, properties);\n};\n\n/**\n * Unwrap a single node from its parent.\n *\n * If the node is surrounded with siblings, its parent will be\n * split. If the node is the only child, the parent is removed, and\n * simply replaced by the node itself.  Cannot unwrap a root node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.unwrapNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n\n  document.assertNode(path);\n\n  var parentPath = PathUtils.lift(path);\n  var parent = document.assertNode(parentPath);\n  var index = path.last();\n  var parentIndex = parentPath.last();\n  var grandPath = PathUtils.lift(parentPath);\n  var isFirst = index === 0;\n  var isLast = index === parent.nodes.size - 1;\n\n  editor.withoutNormalizing(function () {\n    if (parent.nodes.size === 1) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n      editor.removeNodeByPath(parentPath);\n    } else if (isFirst) {\n      editor.moveNodeByPath(path, grandPath, parentIndex);\n    } else if (isLast) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n    } else {\n      var updatedPath = PathUtils.increment(path, 1, parentPath.size - 1);\n      updatedPath = updatedPath.set(updatedPath.size - 1, 0);\n      editor.splitNodeByPath(parentPath, index);\n      editor.moveNodeByPath(updatedPath, grandPath, parentIndex + 1);\n    }\n  });\n};\n\n/**\n * Unwrap all of the children of a node, by removing the node and replacing it\n * with the children in the tree.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nCommands$2.unwrapChildrenByPath = function (editor, path) {\n  path = PathUtils.create(path);\n  var value = editor.value;\n  var document = value.document;\n\n  var node = document.assertNode(path);\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var nodes = node.nodes;\n\n\n  editor.withoutNormalizing(function () {\n    nodes.reverse().forEach(function (child, i) {\n      var childIndex = nodes.size - i - 1;\n      var childPath = path.push(childIndex);\n      editor.moveNodeByPath(childPath, parentPath, index + 1);\n    });\n\n    editor.removeNodeByPath(path);\n  });\n};\n\n/**\n * Wrap a node in a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} block\n */\n\nCommands$2.wrapBlockByPath = function (editor, path, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, block);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n\n/**\n * Wrap a node in an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} inline\n */\n\nCommands$2.wrapInlineByPath = function (editor, path, inline) {\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, inline);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n\n/**\n * Wrap a node by `path` with `node`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Node|Object} node\n */\n\nCommands$2.wrapNodeByPath = function (editor, path, node) {\n  node = Node.create(node);\n\n  if (node.object === 'block') {\n    editor.wrapBlockByPath(path, node);\n  } else if (node.object === 'inline') {\n    editor.wrapInlineByPath(path, node);\n  }\n};\n\n/**\n * Mix in `*ByKey` variants.\n */\n\nvar COMMANDS = ['addMark', 'insertFragment', 'insertNode', 'insertText', 'mergeNode', 'removeAllMarks', 'removeMark', 'removeNode', 'removeText', 'replaceNode', 'replaceText', 'setMark', 'setNode', 'setText', 'splitNode', 'unwrapBlock', 'unwrapChildren', 'unwrapInline', 'unwrapNode', 'wrapBlock', 'wrapInline', 'wrapNode'];\n\nvar _loop = function _loop(method) {\n  Commands$2[method + 'ByKey'] = function (editor, key) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n      args[_key3 - 2] = arguments[_key3];\n    }\n\n    var value = editor.value;\n    var document = value.document;\n\n    var path = document.assertPath(key);\n    editor[method + 'ByPath'].apply(editor, [path].concat(args));\n  };\n};\n\nvar _iteratorNormalCompletion = true;\nvar _didIteratorError = false;\nvar _iteratorError = undefined;\n\ntry {\n  for (var _iterator = COMMANDS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n    var method = _step.value;\n\n    _loop(method);\n  }\n\n  // Moving nodes takes two keys, so it's slightly different.\n} catch (err) {\n  _didIteratorError = true;\n  _iteratorError = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion && _iterator.return) {\n      _iterator.return();\n    }\n  } finally {\n    if (_didIteratorError) {\n      throw _iteratorError;\n    }\n  }\n}\n\nCommands$2.moveNodeByKey = function (editor, key, newKey) {\n  for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var path = document.assertPath(key);\n  var newPath = document.assertPath(newKey);\n  editor.moveNodeByPath.apply(editor, [path, newPath].concat(args));\n};\n\n// Splitting descendants takes two keys, so it's slightly different.\nCommands$2.splitDescendantsByKey = function (editor, key, textKey) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    args[_key2 - 3] = arguments[_key2];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n\n  var path = document.assertPath(key);\n  var textPath = document.assertPath(textKey);\n  editor.splitDescendantsByPath.apply(editor, [path, textPath].concat(args));\n};\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$3 = {};\n\n/**\n * Save an `operation` into the history.\n *\n * @param {Editor} editor\n * @param {Object} operation\n */\n\nCommands$3.save = function (editor, operation) {\n  var operations = editor.operations,\n      value = editor.value;\n  var data = value.data;\n  var _editor$tmp = editor.tmp,\n      save = _editor$tmp.save,\n      merge = _editor$tmp.merge;\n\n  if (save === false) return;\n\n  var undos = data.get('undos') || List();\n  var lastBatch = undos.last();\n  var lastOperation = lastBatch && lastBatch.last();\n\n  // If `merge` is non-commital, and this is not the first operation in a new\n  // editor, then merge, otherwise merge based on the last operation.\n  if (merge == null) {\n    if (operations.size !== 0) {\n      merge = true;\n    } else {\n      merge = shouldMerge(operation, lastOperation);\n    }\n  }\n\n  // If the `merge` flag is true, add the operation to the last batch.\n  if (merge && lastBatch) {\n    var batch = lastBatch.push(operation);\n    undos = undos.pop();\n    undos = undos.push(batch);\n  } else {\n    // Otherwise, create a new batch with the operation.\n    var _batch = List([operation]);\n    undos = undos.push(_batch);\n  }\n\n  // Constrain the history to 100 entries for memory's sake.\n  if (undos.size > 100) {\n    undos = undos.takeLast(100);\n  }\n\n  // Clear the redos and update the history.\n  editor.withoutSaving(function () {\n    var redos = List();\n    var newData = data.set('undos', undos).set('redos', redos);\n    editor.setData(newData);\n  });\n};\n\n/**\n * Redo to the next value in the history.\n *\n * @param {Editor} editor\n */\n\nCommands$3.redo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = redos.last();\n  if (!batch) return;\n\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the batch of operations.\n      batch.forEach(function (op) {\n        var _op = op,\n            type = _op.type,\n            properties = _op.properties;\n\n        // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during redoing.\n\n        if (type === 'set_selection') {\n          op = op.set('properties', omit(properties, 'isFocused'));\n        }\n\n        editor.applyOperation(op);\n      });\n\n      // Shift the next value into the undo stack.\n      redos = redos.pop();\n      undos = undos.push(batch);\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n\n/**\n * Undo the previous operations in the history.\n *\n * @param {Editor} editor\n */\n\nCommands$3.undo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = undos.last();\n  if (!batch) return;\n\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the inverse of the previous operations.\n      batch.slice().reverse().map(function (op) {\n        return op.invert();\n      }).forEach(function (inverse) {\n        var _inverse = inverse,\n            type = _inverse.type,\n            properties = _inverse.properties;\n\n        // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during undoing.\n\n        if (type === 'set_selection') {\n          inverse = inverse.set('properties', omit(properties, 'isFocused'));\n        }\n\n        editor.applyOperation(inverse);\n      });\n\n      // Shift the previous operations into the redo stack.\n      redos = redos.push(batch);\n      undos = undos.pop();\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n\n/**\n * Apply a series of changes inside a synchronous `fn`, without merging any of\n * the new operations into previous save point in the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\nCommands$3.withoutMerging = function (editor, fn) {\n  var value = editor.tmp.merge;\n  editor.tmp.merge = false;\n  fn(editor);\n  editor.tmp.merge = value;\n};\n\n/**\n * Apply a series of changes inside a synchronous `fn`, without saving any of\n * their operations into the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\nCommands$3.withoutSaving = function (editor, fn) {\n  var value = editor.tmp.save;\n  editor.tmp.save = false;\n  fn(editor);\n  editor.tmp.save = value;\n};\n\n/**\n * Check whether to merge a new operation `o` into the previous operation `p`.\n *\n * @param {Object} o\n * @param {Object} p\n * @return {Boolean}\n */\n\nfunction shouldMerge(o, p) {\n  if (!p) return false;\n\n  var merge = o.type === 'set_selection' && p.type === 'set_selection' || o.type === 'insert_text' && p.type === 'insert_text' && o.offset === p.offset + p.text.length && o.path.equals(p.path) || o.type === 'remove_text' && p.type === 'remove_text' && o.offset + o.text.length === p.offset && o.path.equals(p.path);\n\n  return merge;\n}\n\nvar Commands$4 = {};\n\nCommands$4.blur = function (editor) {\n  editor.select({ isFocused: false });\n};\n\nCommands$4.deselect = function (editor) {\n  var range = Selection.create();\n  editor.select(range);\n};\n\nCommands$4.focus = function (editor) {\n  editor.select({ isFocused: true });\n};\n\nCommands$4.flip = function (editor) {\n  editor.command(proxy, 'flip');\n};\n\nCommands$4.moveAnchorBackward = function (editor) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordBackward = function (editor) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorForward = function (editor) {\n  for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  editor.command.apply(editor, [pointForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordForward = function (editor) {\n  for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorTo = function (editor) {\n  for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorTo'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'block');\n};\n\nCommands$4.moveAnchorToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfDocument = function (editor) {\n  editor.moveAnchorToEndOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'block');\n};\n\nCommands$4.moveAnchorToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'text');\n};\n\nCommands$4.moveAnchorToEndOfNode = function (editor) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n    args[_key6 - 1] = arguments[_key6];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToEndOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'text');\n};\n\nCommands$4.moveAnchorToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'block');\n};\n\nCommands$4.moveAnchorToStartOfDocument = function (editor) {\n  editor.moveAnchorToStartOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'block');\n};\n\nCommands$4.moveAnchorToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'text');\n};\n\nCommands$4.moveAnchorToStartOfNode = function (editor) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n    args[_key7 - 1] = arguments[_key7];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToStartOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'text');\n};\n\nCommands$4.moveBackward = function (editor) {\n  var _editor$moveAnchorBac;\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n    args[_key8 - 1] = arguments[_key8];\n  }\n\n  (_editor$moveAnchorBac = editor.moveAnchorBackward.apply(editor, args)).moveFocusBackward.apply(_editor$moveAnchorBac, args);\n};\n\nCommands$4.moveWordBackward = function (editor) {\n  for (var _len9 = arguments.length, args = Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {\n    args[_key9 - 1] = arguments[_key9];\n  }\n\n  editor.moveFocusWordBackward.apply(editor, args).moveToFocus();\n};\n\nCommands$4.moveEndBackward = function (editor) {\n  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {\n    args[_key10 - 1] = arguments[_key10];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordBackward = function (editor) {\n  for (var _len11 = arguments.length, args = Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {\n    args[_key11 - 1] = arguments[_key11];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndForward = function (editor) {\n  for (var _len12 = arguments.length, args = Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {\n    args[_key12 - 1] = arguments[_key12];\n  }\n\n  editor.command.apply(editor, [pointForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordForward = function (editor) {\n  for (var _len13 = arguments.length, args = Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {\n    args[_key13 - 1] = arguments[_key13];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndTo = function (editor) {\n  for (var _len14 = arguments.length, args = Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {\n    args[_key14 - 1] = arguments[_key14];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndTo'].concat(args));\n};\n\nCommands$4.moveEndToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'block');\n};\n\nCommands$4.moveEndToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'block');\n};\n\nCommands$4.moveEndToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'text');\n};\n\nCommands$4.moveEndToEndOfNode = function (editor) {\n  for (var _len15 = arguments.length, args = Array(_len15 > 1 ? _len15 - 1 : 0), _key15 = 1; _key15 < _len15; _key15++) {\n    args[_key15 - 1] = arguments[_key15];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToEndOfNode'].concat(args));\n};\n\nCommands$4.moveEndToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'block');\n};\n\nCommands$4.moveEndToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveEndToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'text');\n};\n\nCommands$4.moveEndToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'text');\n};\n\nCommands$4.moveEndToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'block');\n};\n\nCommands$4.moveEndToStartOfDocument = function (editor) {\n  editor.moveEndToStartOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'block');\n};\n\nCommands$4.moveEndToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'text');\n};\n\nCommands$4.moveEndToStartOfNode = function (editor) {\n  for (var _len16 = arguments.length, args = Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {\n    args[_key16 - 1] = arguments[_key16];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToStartOfNode'].concat(args));\n};\n\nCommands$4.moveEndToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'block');\n};\n\nCommands$4.moveEndToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveEndToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'text');\n};\n\nCommands$4.moveEndToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'text');\n};\n\nCommands$4.moveFocusBackward = function (editor) {\n  for (var _len17 = arguments.length, args = Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {\n    args[_key17 - 1] = arguments[_key17];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordBackward = function (editor) {\n  for (var _len18 = arguments.length, args = Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {\n    args[_key18 - 1] = arguments[_key18];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusForward = function (editor) {\n  for (var _len19 = arguments.length, args = Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {\n    args[_key19 - 1] = arguments[_key19];\n  }\n\n  editor.command.apply(editor, [pointForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordForward = function (editor) {\n  for (var _len20 = arguments.length, args = Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) {\n    args[_key20 - 1] = arguments[_key20];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusTo = function (editor) {\n  for (var _len21 = arguments.length, args = Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {\n    args[_key21 - 1] = arguments[_key21];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusTo'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'block');\n};\n\nCommands$4.moveFocusToEndOfDocument = function (editor) {\n  editor.moveFocusToEndOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'block');\n};\n\nCommands$4.moveFocusToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'text');\n};\n\nCommands$4.moveFocusToEndOfNode = function (editor) {\n  for (var _len22 = arguments.length, args = Array(_len22 > 1 ? _len22 - 1 : 0), _key22 = 1; _key22 < _len22; _key22++) {\n    args[_key22 - 1] = arguments[_key22];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToEndOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'block');\n};\n\nCommands$4.moveFocusToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'text');\n};\n\nCommands$4.moveFocusToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'text');\n};\n\nCommands$4.moveFocusToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'block');\n};\n\nCommands$4.moveFocusToStartOfDocument = function (editor) {\n  editor.moveFocusToStartOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'block');\n};\n\nCommands$4.moveFocusToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'text');\n};\n\nCommands$4.moveFocusToStartOfNode = function (editor) {\n  for (var _len23 = arguments.length, args = Array(_len23 > 1 ? _len23 - 1 : 0), _key23 = 1; _key23 < _len23; _key23++) {\n    args[_key23 - 1] = arguments[_key23];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToStartOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'block');\n};\n\nCommands$4.moveFocusToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'text');\n};\n\nCommands$4.moveFocusToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'text');\n};\n\nCommands$4.moveForward = function (editor) {\n  var _editor$moveAnchorFor;\n\n  for (var _len24 = arguments.length, args = Array(_len24 > 1 ? _len24 - 1 : 0), _key24 = 1; _key24 < _len24; _key24++) {\n    args[_key24 - 1] = arguments[_key24];\n  }\n\n  (_editor$moveAnchorFor = editor.moveAnchorForward.apply(editor, args)).moveFocusForward.apply(_editor$moveAnchorFor, args);\n};\n\nCommands$4.moveWordForward = function (editor) {\n  var _editor$moveFocusWord;\n\n  for (var _len25 = arguments.length, args = Array(_len25 > 1 ? _len25 - 1 : 0), _key25 = 1; _key25 < _len25; _key25++) {\n    args[_key25 - 1] = arguments[_key25];\n  }\n\n  (_editor$moveFocusWord = editor.moveFocusWordForward.apply(editor, args)).moveToFocus.apply(_editor$moveFocusWord, args);\n};\n\nCommands$4.moveStartBackward = function (editor) {\n  for (var _len26 = arguments.length, args = Array(_len26 > 1 ? _len26 - 1 : 0), _key26 = 1; _key26 < _len26; _key26++) {\n    args[_key26 - 1] = arguments[_key26];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordBackward = function (editor) {\n  for (var _len27 = arguments.length, args = Array(_len27 > 1 ? _len27 - 1 : 0), _key27 = 1; _key27 < _len27; _key27++) {\n    args[_key27 - 1] = arguments[_key27];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartForward = function (editor) {\n  for (var _len28 = arguments.length, args = Array(_len28 > 1 ? _len28 - 1 : 0), _key28 = 1; _key28 < _len28; _key28++) {\n    args[_key28 - 1] = arguments[_key28];\n  }\n\n  editor.command.apply(editor, [pointForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordForward = function (editor) {\n  for (var _len29 = arguments.length, args = Array(_len29 > 1 ? _len29 - 1 : 0), _key29 = 1; _key29 < _len29; _key29++) {\n    args[_key29 - 1] = arguments[_key29];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartTo = function (editor) {\n  for (var _len30 = arguments.length, args = Array(_len30 > 1 ? _len30 - 1 : 0), _key30 = 1; _key30 < _len30; _key30++) {\n    args[_key30 - 1] = arguments[_key30];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartTo'].concat(args));\n};\n\nCommands$4.moveStartToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'block');\n};\n\nCommands$4.moveStartToEndOfDocument = function (editor) {\n  editor.moveStartToEndOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'block');\n};\n\nCommands$4.moveStartToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'text');\n};\n\nCommands$4.moveStartToEndOfNode = function (editor) {\n  for (var _len31 = arguments.length, args = Array(_len31 > 1 ? _len31 - 1 : 0), _key31 = 1; _key31 < _len31; _key31++) {\n    args[_key31 - 1] = arguments[_key31];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToEndOfNode'].concat(args));\n};\n\nCommands$4.moveStartToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'block');\n};\n\nCommands$4.moveStartToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveStartToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'text');\n};\n\nCommands$4.moveStartToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'text');\n};\n\nCommands$4.moveStartToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'block');\n};\n\nCommands$4.moveStartToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'block');\n};\n\nCommands$4.moveStartToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'text');\n};\n\nCommands$4.moveStartToStartOfNode = function (editor) {\n  for (var _len32 = arguments.length, args = Array(_len32 > 1 ? _len32 - 1 : 0), _key32 = 1; _key32 < _len32; _key32++) {\n    args[_key32 - 1] = arguments[_key32];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToStartOfNode'].concat(args));\n};\n\nCommands$4.moveStartToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'block');\n};\n\nCommands$4.moveStartToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveStartToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'text');\n};\n\nCommands$4.moveStartToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'text');\n};\n\nCommands$4.moveTo = function (editor) {\n  for (var _len33 = arguments.length, args = Array(_len33 > 1 ? _len33 - 1 : 0), _key33 = 1; _key33 < _len33; _key33++) {\n    args[_key33 - 1] = arguments[_key33];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveTo'].concat(args));\n};\n\nCommands$4.moveToAnchor = function (editor) {\n  editor.command(proxy, 'moveToAnchor');\n};\n\nCommands$4.moveToEnd = function (editor) {\n  editor.command(proxy, 'moveToEnd');\n};\n\nCommands$4.moveToEndOfBlock = function (editor) {\n  editor.moveEndToEndOfBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveToEndOfInline = function (editor) {\n  editor.moveEndToEndOfInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextBlock = function (editor) {\n  editor.moveEndToEndOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextInline = function (editor) {\n  editor.moveEndToEndOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextText = function (editor) {\n  editor.moveEndToEndOfNextText().moveToEnd();\n};\n\nCommands$4.moveToEndOfNode = function (editor) {\n  for (var _len34 = arguments.length, args = Array(_len34 > 1 ? _len34 - 1 : 0), _key34 = 1; _key34 < _len34; _key34++) {\n    args[_key34 - 1] = arguments[_key34];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToEndOfNode'].concat(args));\n};\n\nCommands$4.moveToEndOfPreviousBlock = function (editor) {\n  editor.moveStartToEndOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousInline = function (editor) {\n  editor.moveStartToEndOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousText = function (editor) {\n  editor.moveStartToEndOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToEndOfText = function (editor) {\n  editor.moveEndToEndOfText().moveToEnd();\n};\n\nCommands$4.moveToFocus = function (editor) {\n  editor.command(proxy, 'moveToFocus');\n};\n\nCommands$4.moveToRangeOfDocument = function (editor) {\n  editor.moveToRangeOfNode(editor.value.document);\n};\n\nCommands$4.moveToRangeOfNode = function (editor) {\n  for (var _len35 = arguments.length, args = Array(_len35 > 1 ? _len35 - 1 : 0), _key35 = 1; _key35 < _len35; _key35++) {\n    args[_key35 - 1] = arguments[_key35];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToRangeOfNode'].concat(args));\n};\n\nCommands$4.moveToStart = function (editor) {\n  editor.command(proxy, 'moveToStart');\n};\n\nCommands$4.moveToStartOfBlock = function (editor) {\n  editor.moveStartToStartOfBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveToStartOfInline = function (editor) {\n  editor.moveStartToStartOfInline().moveToStart();\n};\n\nCommands$4.moveToStartOfNextBlock = function (editor) {\n  editor.moveEndToStartOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextInline = function (editor) {\n  editor.moveEndToStartOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextText = function (editor) {\n  editor.moveEndToStartOfNextText().moveToEnd();\n};\n\nCommands$4.moveToStartOfNode = function (editor) {\n  for (var _len36 = arguments.length, args = Array(_len36 > 1 ? _len36 - 1 : 0), _key36 = 1; _key36 < _len36; _key36++) {\n    args[_key36 - 1] = arguments[_key36];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToStartOfNode'].concat(args));\n};\n\nCommands$4.moveToStartOfPreviousBlock = function (editor) {\n  editor.moveStartToStartOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousInline = function (editor) {\n  editor.moveStartToStartOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousText = function (editor) {\n  editor.moveStartToStartOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToStartOfText = function (editor) {\n  editor.moveStartToStartOfText().moveToStart();\n};\n\nCommands$4.select = function (editor, properties) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  properties = Selection.createProperties(properties);\n  var _options$snapshot = options.snapshot,\n      snapshot = _options$snapshot === undefined ? false : _options$snapshot;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var newProperties = {};\n  var next = selection.setProperties(properties);\n  next = document.resolveSelection(next);\n\n  // Re-compute the properties, to ensure that we get their normalized values.\n  properties = pick(next, Object.keys(properties));\n\n  // Remove any properties that are already equal to the current selection. And\n  // create a dictionary of the previous values for all of the properties that\n  // are being changed, for the inverse operation.\n  for (var k in properties) {\n    if (snapshot === true || !is(properties[k], selection[k])) {\n      newProperties[k] = properties[k];\n    }\n  }\n\n  // If the selection moves, clear any marks, unless the new selection\n  // properties change the marks in some way.\n  if (selection.marks && !newProperties.marks && (newProperties.anchor || newProperties.focus)) {\n    newProperties.marks = null;\n  }\n\n  // If there are no new properties to set, abort to avoid extra operations.\n  if (Object.keys(newProperties).length === 0) {\n    return;\n  }\n\n  // TODO: for some reason toJSON() is required here (it breaks selections between blocks)? - 2018-10-10\n  var prevProperties = pick(selection.toJSON(), Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_selection',\n    value: value,\n    properties: prevProperties,\n    newProperties: newProperties\n  }, snapshot ? { skip: false, merge: false } : {});\n};\n\nCommands$4.setAnchor = function (editor) {\n  for (var _len37 = arguments.length, args = Array(_len37 > 1 ? _len37 - 1 : 0), _key37 = 1; _key37 < _len37; _key37++) {\n    args[_key37 - 1] = arguments[_key37];\n  }\n\n  editor.command.apply(editor, [proxy, 'setAnchor'].concat(args));\n};\n\nCommands$4.setEnd = function (editor) {\n  for (var _len38 = arguments.length, args = Array(_len38 > 1 ? _len38 - 1 : 0), _key38 = 1; _key38 < _len38; _key38++) {\n    args[_key38 - 1] = arguments[_key38];\n  }\n\n  editor.command.apply(editor, [proxy, 'setEnd'].concat(args));\n};\n\nCommands$4.setFocus = function (editor) {\n  for (var _len39 = arguments.length, args = Array(_len39 > 1 ? _len39 - 1 : 0), _key39 = 1; _key39 < _len39; _key39++) {\n    args[_key39 - 1] = arguments[_key39];\n  }\n\n  editor.command.apply(editor, [proxy, 'setFocus'].concat(args));\n};\n\nCommands$4.setStart = function (editor) {\n  for (var _len40 = arguments.length, args = Array(_len40 > 1 ? _len40 - 1 : 0), _key40 = 1; _key40 < _len40; _key40++) {\n    args[_key40 - 1] = arguments[_key40];\n  }\n\n  editor.command.apply(editor, [proxy, 'setStart'].concat(args));\n};\n\nCommands$4.snapshotSelection = function (editor) {\n  editor.withoutMerging(function () {\n    editor.select(editor.value.selection, { snapshot: true });\n  });\n};\n\n/**\n * Helpers.\n */\n\nfunction proxy(editor, method) {\n  var _editor$value$selecti;\n\n  for (var _len41 = arguments.length, args = Array(_len41 > 2 ? _len41 - 2 : 0), _key41 = 2; _key41 < _len41; _key41++) {\n    args[_key41 - 2] = arguments[_key41];\n  }\n\n  var range = (_editor$value$selecti = editor.value.selection)[method].apply(_editor$value$selecti, args);\n  editor.select(range);\n}\n\nfunction pointEdgeObject(editor, point, edge, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  editor[method](node);\n}\n\nfunction pointEdgeSideObject(editor, point, edge, side, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Side = side.slice(0, 1).toUpperCase() + side.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var getDirectionNode = 'get' + Side + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  var target = document[getDirectionNode](node.key);\n  if (!target) return;\n  editor[method](target);\n}\n\nfunction pointBackward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  if (n < 0) return pointForward(editor, point, -n);\n\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var hasVoidParent = document.hasVoidParent(p.path, editor);\n\n  // what is this?\n  if (!hasVoidParent && p.offset - n >= 0) {\n    var range = selection['move' + Point + 'Backward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var previous = document.getPreviousText(p.path);\n  if (!previous) return;\n\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(previous.key);\n  var isPreviousInVoid = previous && document.hasVoidParent(previous.key, editor);\n  editor['move' + Point + 'ToEndOfNode'](previous);\n\n  // when is this called?\n  if (!hasVoidParent && !isPreviousInVoid && isInBlock) {\n    var _range = editor.value.selection['move' + Point + 'Backward'](n);\n    editor.select(_range);\n  }\n}\n\nfunction pointForward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (n === 0) return;\n  if (n < 0) return pointBackward(editor, point, -n);\n\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var p = selection[point];\n  var text = document.getNode(p.path);\n  var hasVoidParent = document.hasVoidParent(p.path, editor);\n\n  // what is this?\n  if (!hasVoidParent && p.offset + n <= text.text.length) {\n    var range = selection['move' + Point + 'Forward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var next = document.getNextText(p.path);\n  if (!next) return;\n\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(next.key);\n  var isNextInVoid = document.hasVoidParent(next.key, editor);\n  editor['move' + Point + 'ToStartOfNode'](next);\n\n  // when is this called?\n  if (!hasVoidParent && !isNextInVoid && isInBlock) {\n    var _range2 = editor.value.selection['move' + Point + 'Forward'](n);\n    editor.select(_range2);\n  }\n}\n\nfunction pointWordBackward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n\n  var n = TextUtils.getWordOffsetBackward(text, o);\n  editor.command(pointBackward, pointName, n > 0 ? n : 1);\n}\n\nfunction pointWordForward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n\n  var n = TextUtils.getWordOffsetForward(text, o);\n  editor.command(pointForward, pointName, n > 0 ? n : 1);\n}\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$5 = {};\n\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\nCommands$5.setData = function (editor) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var value = editor.value;\n\n  var newProperties = Value.createProperties({ data: data });\n  var prevProperties = pick(value, Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\nCommands$5.setDecorations = function (editor) {\n  var decorations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var value = editor.value;\n\n  var newProperties = Value.createProperties({ decorations: decorations });\n  var prevProperties = pick(value, Object.keys(newProperties));\n\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n\n/**\n * A plugin that adds a set of queries to the editor.\n *\n * @param {Object} queries\n * @return {Object}\n */\n\nfunction QueriesPlugin() {\n  var queries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  /**\n   * On construct, register all the queries.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onConstruct(editor, next) {\n    for (var query in queries) {\n      editor.registerQuery(query);\n    }\n\n    return next();\n  }\n\n  /**\n   * On query, if it exists in our list of queries, call it.\n   *\n   * @param {Object} query\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onQuery(query, editor, next) {\n    var type = query.type,\n        args = query.args;\n\n    var fn = queries[type];\n    if (!fn) return next();\n    var ret = fn.apply(undefined, [editor].concat(toConsumableArray(args)));\n    return ret === undefined ? next() : ret;\n  }\n\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n  return {\n    onConstruct: onConstruct,\n    onQuery: onQuery\n  };\n}\n\n/**\n * Define a Slate error.\n *\n * @type {SlateError}\n */\n\nvar SlateError = function (_Error) {\n  inherits(SlateError, _Error);\n\n  function SlateError(code) {\n    var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, SlateError);\n\n    var _this = possibleConstructorReturn(this, (SlateError.__proto__ || Object.getPrototypeOf(SlateError)).call(this, code));\n\n    _this.code = code;\n\n    for (var key in attrs) {\n      _this[key] = attrs[key];\n    }\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_this, _this.constructor);\n    } else {\n      _this.stack = new Error().stack;\n    }\n    return _this;\n  }\n\n  return SlateError;\n}(Error);\n\n/**\n * Create a plugin from a `schema` definition.\n *\n * @param {Object} schema\n * @return {Object}\n */\n\nfunction SchemaPlugin(schema) {\n  var rules = schema.rules,\n      document = schema.document,\n      blocks = schema.blocks,\n      inlines = schema.inlines,\n      marks = schema.marks;\n\n  var schemaRules = [];\n\n  if (rules) {\n    schemaRules = schemaRules.concat(rules);\n  }\n\n  if (document) {\n    schemaRules.push(_extends({\n      match: [{ object: 'document' }]\n    }, document));\n  }\n\n  if (blocks) {\n    for (var key in blocks) {\n      schemaRules.push(_extends({\n        match: [{ object: 'block', type: key }]\n      }, blocks[key]));\n    }\n  }\n\n  if (inlines) {\n    for (var _key in inlines) {\n      schemaRules.push(_extends({\n        match: [{ object: 'inline', type: _key }]\n      }, inlines[_key]));\n    }\n  }\n\n  if (marks) {\n    for (var _key2 in marks) {\n      schemaRules.push(_extends({\n        match: [{ object: 'mark', type: _key2 }]\n      }, marks[_key2]));\n    }\n  }\n\n  /**\n   * Check if a `mark` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Mark} mark\n   * @return {Boolean}\n   */\n\n  function isAtomic(editor, mark) {\n    var rule = schemaRules.find(function (r) {\n      return 'isAtomic' in r && testRules(mark, r.match);\n    });\n\n    return rule && rule.isAtomic;\n  }\n\n  /**\n   * Check if a `node` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n  function isVoid(editor, node) {\n    var rule = schemaRules.find(function (r) {\n      return 'isVoid' in r && testRules(node, r.match);\n    });\n\n    return rule && rule.isVoid;\n  }\n\n  /**\n   * Normalize a `node` with the schema rules, returning a function that will\n   * fix the invalid node, or void if the node is valid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Function|Void}\n   */\n\n  function normalizeNode(node, editor, next) {\n    var error = validateNode(node, editor, function () {});\n    if (!error) return next();\n\n    return function () {\n      var rule = error.rule;\n      var size = editor.operations.size;\n\n      // First run the user-provided `normalize` function if one exists...\n\n      if (rule.normalize) {\n        rule.normalize(editor, error);\n      }\n\n      // If the `normalize` function did not add any operations to the editor\n      // object, it can't have normalized, so run the default one.\n      if (editor.operations.size === size) {\n        defaultNormalize(editor, error);\n      }\n    };\n  }\n\n  /**\n   * Validate a `node` with the schema rules, returning a `SlateError` if it's\n   * invalid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Error|Void}\n   */\n\n  function validateNode(node, editor, next) {\n    var matches = schemaRules.filter(function (r) {\n      return testRules(node, r.match);\n    });\n    var failure = validateRules(node, matches, schemaRules, { every: true });\n    if (!failure) return next();\n    var error = new SlateError(failure.code, failure);\n    return error;\n  }\n\n  /**\n   * On schema-related queries, respond if we can.\n   *\n   * @param {Object} query\n   * @param {Function} next\n   */\n\n  var queries = QueriesPlugin({ isAtomic: isAtomic, isVoid: isVoid });\n\n  /**\n   * Return the plugins.\n   *\n   * @type {Object}\n   */\n\n  return [{ normalizeNode: normalizeNode, validateNode: validateNode }, queries];\n}\n\n/**\n * Normalize an invalid value with `error` with default remedies.\n *\n * @param {Editor} editor\n * @param {SlateError} error\n */\n\nfunction defaultNormalize(editor, error) {\n  var code = error.code,\n      node = error.node,\n      child = error.child,\n      next = error.next,\n      previous = error.previous,\n      key = error.key,\n      mark = error.mark;\n\n\n  switch (code) {\n    case 'child_max_invalid':\n    case 'child_object_invalid':\n    case 'child_type_invalid':\n    case 'child_unknown':\n    case 'first_child_object_invalid':\n    case 'first_child_type_invalid':\n    case 'last_child_object_invalid':\n    case 'last_child_type_invalid':\n      {\n        return child.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(child.key);\n      }\n\n    case 'previous_sibling_object_invalid':\n    case 'previous_sibling_type_invalid':\n      {\n        return previous.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(previous.key);\n      }\n\n    case 'next_sibling_object_invalid':\n    case 'next_sibling_type_invalid':\n      {\n        return next.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(next.key);\n      }\n\n    case 'child_min_invalid':\n    case 'node_text_invalid':\n    case 'parent_object_invalid':\n    case 'parent_type_invalid':\n      {\n        return node.object === 'document' ? node.nodes.forEach(function (n) {\n          return editor.removeNodeByKey(n.key);\n        }) : editor.removeNodeByKey(node.key);\n      }\n\n    case 'node_data_invalid':\n      {\n        return node.data.get(key) === undefined && node.object !== 'document' ? editor.removeNodeByKey(node.key) : editor.setNodeByKey(node.key, { data: node.data.delete(key) });\n      }\n\n    case 'node_mark_invalid':\n      {\n        return node.getTexts().forEach(function (t) {\n          return editor.removeMarkByKey(t.key, 0, t.text.length, mark);\n        });\n      }\n\n    default:\n      {\n        return editor.removeNodeByKey(node.key);\n      }\n  }\n}\n\n/**\n * Check that an `object` matches one of a set of `rules`.\n *\n * @param {Mixed} object\n * @param {Object|Array} rules\n * @return {Boolean}\n */\n\nfunction testRules(object, rules) {\n  var error = validateRules(object, rules);\n  return !error;\n}\n\n/**\n * Validate that a `object` matches a `rule` object or array.\n *\n * @param {Mixed} object\n * @param {Object|Array} rule\n * @param {Array|Void} rules\n * @return {Error|Void}\n */\n\nfunction validateRules(object, rule, rules) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$every = options.every,\n      every = _options$every === undefined ? false : _options$every,\n      _options$match = options.match,\n      match = _options$match === undefined ? null : _options$match;\n\n\n  if (typeof rule === 'function') {\n    var valid = rule(object, match);\n    return valid ? null : fail('node_invalid', { rule: rule, node: object });\n  }\n\n  if (Array.isArray(rule)) {\n    var array = rule.length ? rule : [{}];\n    var first = void 0;\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = array[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var r = _step.value;\n\n        var _error = validateRules(object, r, rules);\n        first = first || _error;\n        if (every && _error) return _error;\n        if (!every && !_error) return;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return first;\n  }\n\n  var error = validateObject(object, rule) || validateType(object, rule) || validateData(object, rule) || validateMarks(object, rule) || validateText(object, rule) || validateFirst(object, rule) || validateLast(object, rule) || validateNodes(object, rule, rules);\n\n  return error;\n}\n\nfunction validateObject(node, rule) {\n  if (rule.object == null) return;\n  if (rule.object === node.object) return;\n  if (typeof rule.object === 'function' && rule.object(node.object)) return;\n  return fail('node_object_invalid', { rule: rule, node: node });\n}\n\nfunction validateType(node, rule) {\n  if (rule.type == null) return;\n  if (rule.type === node.type) return;\n  if (typeof rule.type === 'function' && rule.type(node.type)) return;\n  return fail('node_type_invalid', { rule: rule, node: node });\n}\n\nfunction validateData(node, rule) {\n  if (rule.data == null) return;\n  if (node.data == null) return;\n\n  if (typeof rule.data === 'function') {\n    if (rule.data(node.data)) return;\n    return fail('node_data_invalid', { rule: rule, node: node });\n  }\n\n  for (var key in rule.data) {\n    var fn = rule.data[key];\n    var value = node.data && node.data.get(key);\n    var valid = typeof fn === 'function' ? fn(value) : fn === value;\n    if (valid) continue;\n    return fail('node_data_invalid', { rule: rule, node: node, key: key, value: value });\n  }\n}\n\nfunction validateMarks(node, rule) {\n  if (rule.marks == null) return;\n\n  var marks = node.object === 'text' ? node.marks.toArray() : node.getMarks().toArray();\n\n  var _loop = function _loop(mark) {\n    var valid = rule.marks.some(function (def) {\n      return typeof def.type === 'function' ? def.type(mark.type) : def.type === mark.type;\n    });\n    if (valid) return 'continue';\n    return {\n      v: fail('node_mark_invalid', { rule: rule, node: node, mark: mark })\n    };\n  };\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = marks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var mark = _step2.value;\n\n      var _ret = _loop(mark);\n\n      switch (_ret) {\n        case 'continue':\n          continue;\n\n        default:\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction validateText(node, rule) {\n  if (rule.text == null) return;\n  var text = node.text;\n\n  var valid = typeof rule.text === 'function' ? rule.text(text) : rule.text.test(text);\n  if (valid) return;\n  return fail('node_text_invalid', { rule: rule, node: node, text: text });\n}\n\nfunction validateFirst(node, rule) {\n  if (rule.first == null) return;\n  var first = node.nodes.first();\n  if (!first) return;\n  var error = validateRules(first, rule.first);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = first;\n  error.code = error.code.replace('node_', 'first_child_');\n  return error;\n}\n\nfunction validateLast(node, rule) {\n  if (rule.last == null) return;\n  var last = node.nodes.last();\n  if (!last) return;\n  var error = validateRules(last, rule.last);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = last;\n  error.code = error.code.replace('node_', 'last_child_');\n  return error;\n}\n\nfunction validateNodes(node, rule) {\n  var rules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (node.nodes == null) return;\n\n  var children = node.nodes;\n  var defs = rule.nodes != null ? rule.nodes.slice() : [];\n  var count = 0;\n  var lastCount = 0;\n  var min = null;\n  var index = -1;\n  var def = null;\n  var max = null;\n  var child = null;\n  var previous = null;\n  var next = null;\n\n  function nextDef() {\n    if (defs.length === 0) return false;\n    def = defs.shift();\n    lastCount = count;\n    count = 0;\n    min = def.min || null;\n    max = def.max || null;\n    return true;\n  }\n\n  function nextChild() {\n    index += 1;\n    previous = index ? children.get(index - 1) : null;\n    child = children.get(index);\n    next = children.get(index + 1);\n    if (!child) return false;\n    lastCount = count;\n    count += 1;\n    return true;\n  }\n\n  function rewind() {\n    if (index > 0) {\n      index -= 1;\n      count = lastCount;\n    }\n  }\n\n  if (rule.nodes != null) {\n    nextDef();\n  }\n\n  while (nextChild()) {\n    var err = validateParent(node, child, rules) || validatePrevious(node, child, previous, index, rules) || validateNext(node, child, next, index, rules);\n\n    if (err) return err;\n\n    if (rule.nodes != null) {\n      if (!def) {\n        return fail('child_unknown', { rule: rule, node: node, child: child, index: index });\n      }\n\n      if (def.match) {\n        var error = validateRules(child, def.match);\n\n        if (error) {\n          // Since we want to report overflow on last matching child we don't\n          // immediately check for count > max, but instead do so once we find\n          // a child that doesn't match.\n          if (max != null && count - 1 > max) {\n            rewind();\n            return fail('child_max_invalid', {\n              rule: rule,\n              node: node,\n              index: index,\n              child: children.get(index),\n              count: count,\n              limit: max\n            });\n          }\n\n          var lastMin = min;\n\n          // If there are more groups after this one then child might actually\n          // be valid.\n          if (nextDef()) {\n            // If we've already satisfied the minimum for the current group,\n            // then we can rewind and proceed to the next group.\n            if (lastCount - 1 >= lastMin) {\n              index -= 1;\n              continue;\n            }\n\n            // Otherwise we know that current value is underflowing. There are\n            // three possible causes for this...\n\n            // 1. There might just not be enough elements for current group, and\n            // current child is in fact the first of the next group. If so, the\n            // next def will not report errors, in which case we can rewind and\n            // report an minimum error.\n            if (validateRules(child, def.match) == null) {\n              rewind();\n              return fail('child_min_invalid', {\n                rule: rule,\n                node: node,\n                index: index,\n                count: lastCount - 1,\n                limit: lastMin\n              });\n            }\n\n            // 2. The current group is underflowing, but there is also an\n            // invalid child before the next group.\n            // 3. Or the current group is not underflowing but it appears so\n            // because there's an invalid child between its members.\n            // It's either the second or third case. If it's the second then\n            // we could report an underflow, but presence of an invalid child\n            // is arguably more important, so we report it first. It also lets\n            // us avoid checking for which case exactly is it.\n            error.rule = rule;\n            error.node = node;\n            error.child = child;\n            error.index = index;\n            error.code = error.code.replace('node_', 'child_');\n            return error;\n          }\n\n          // Otherwise either we exhausted the last group, in which case it's\n          // an unknown child, ...\n          if (max != null && count > max) {\n            return fail('child_unknown', { rule: rule, node: node, child: child, index: index });\n          }\n\n          // ... or it's an invalid child for the last group.\n          error.rule = rule;\n          error.node = node;\n          error.child = child;\n          error.index = index;\n          error.code = error.code.replace('node_', 'child_');\n          return error;\n        }\n      }\n    }\n  }\n\n  // Since we want to report overflow on last matching child we don't\n  // immediately check for count > max, but do so after processing all nodes.\n  if (max != null && count > max) {\n    return fail('child_max_invalid', {\n      rule: rule,\n      node: node,\n      index: index - 1,\n      count: count,\n      child: children.get(index - 1),\n      limit: max\n    });\n  }\n\n  if (rule.nodes != null) {\n    do {\n      if (count < min) {\n        return fail('child_min_invalid', {\n          rule: rule,\n          node: node,\n          index: index,\n          count: count,\n          limit: min\n        });\n      }\n    } while (nextDef());\n  }\n}\n\nfunction validateParent(node, child, rules) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = rules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var rule = _step3.value;\n\n      if (rule.parent == null) continue;\n      if (!testRules(child, rule.match)) continue;\n\n      var error = validateRules(node, rule.parent);\n      if (!error) continue;\n\n      error.rule = rule;\n      error.parent = node;\n      error.node = child;\n      error.code = error.code.replace('node_', 'parent_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n}\n\nfunction validatePrevious(node, child, previous, index, rules) {\n  if (!previous) return;\n\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = rules[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var rule = _step4.value;\n\n      if (rule.previous == null) continue;\n      if (!testRules(child, rule.match)) continue;\n\n      var error = validateRules(previous, rule.previous);\n      if (!error) continue;\n\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.previous = previous;\n      error.code = error.code.replace('node_', 'previous_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n}\n\nfunction validateNext(node, child, next, index, rules) {\n  if (!next) return;\n\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = rules[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var rule = _step5.value;\n\n      if (rule.next == null) continue;\n      if (!testRules(child, rule.match)) continue;\n\n      var error = validateRules(next, rule.next, [], { match: child });\n      if (!error) continue;\n\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.next = next;\n      error.code = error.code.replace('node_', 'next_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5.return) {\n        _iterator5.return();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n}\n\n/**\n * Create an interim failure object with `code` and `attrs`.\n *\n * @param {String} code\n * @param {Object} attrs\n * @return {Object}\n */\n\nfunction fail(code, attrs) {\n  return _extends({ code: code }, attrs);\n}\n\n/**\n * Ensure that an expanded selection is deleted first using the `editor.delete`\n * command. This guarantees that it uses the proper semantic \"intent\" instead of\n * using `deleteAtRange` under the covers and skipping `delete`.\n *\n * @param {Editor}\n */\n\nfunction deleteExpanded(editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  }\n}\n\n/**\n * Commands.\n *\n * @type {Object}\n */\n\nvar Commands$6 = {};\n\n/**\n * Add a `mark` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.addMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.addMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.add(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks = document.getActiveMarksAtRange(selection).add(mark);\n    var _sel = selection.set('marks', _marks);\n    editor.select(_sel);\n  }\n};\n\n/**\n * Add a list of `marks` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Set<Mark>|Array<Object>} marks\n */\n\nCommands$6.addMarks = function (editor, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMark(mark);\n  });\n};\n\n/**\n * Delete at the current selection.\n *\n * @param {Editor} editor\n */\n\nCommands$6.delete = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.deleteAtRange(selection);\n\n  // COMPAT: Ensure that the selection is collapsed, because in certain cases\n  // when deleting across inline nodes, when splitting the inline node the end\n  // point of the selection will end up after the split point.\n  editor.moveToFocus();\n};\n\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\nCommands$6.deleteBackward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteBackwardAtRange(selection, n);\n  }\n};\n\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteCharBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharBackwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteLineBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineBackwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteWordBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordBackwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\nCommands$6.deleteForward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteForwardAtRange(selection, n);\n  }\n};\n\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteCharForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharForwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteLineForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineForwardAtRange(selection);\n  }\n};\n\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\nCommands$6.deleteWordForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordForwardAtRange(selection);\n  }\n};\n\n/**\n * Insert a `block` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Block} block\n */\n\nCommands$6.insertBlock = function (editor, block) {\n  deleteExpanded(editor);\n\n  block = Block.create(block);\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.insertBlockAtRange(selection, block);\n\n  // If the node was successfully inserted, update the selection.\n  var node = editor.value.document.getNode(block.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n\n/**\n * Insert a `fragment` at the current selection.\n *\n * @param {Editor} editor\n * @param {Document} fragment\n */\n\nCommands$6.insertFragment = function (editor, fragment) {\n  if (!fragment.nodes.size) return;\n\n  deleteExpanded(editor);\n\n  var value = editor.value;\n  var _value = value,\n      document = _value.document,\n      selection = _value.selection;\n  var start = selection.start,\n      end = selection.end;\n  var _value2 = value,\n      startText = _value2.startText,\n      endText = _value2.endText,\n      startInline = _value2.startInline;\n\n  var lastText = fragment.getLastText();\n  var lastInline = fragment.getClosestInline(lastText.key);\n  var lastBlock = fragment.getClosestBlock(lastText.key);\n  var firstChild = fragment.nodes.first();\n  var lastChild = fragment.nodes.last();\n  var keys = document.getTexts().map(function (text) {\n    return text.key;\n  });\n  var isAppending = !startInline || start.isAtStartOfNode(startText) || end.isAtStartOfNode(startText) || start.isAtEndOfNode(endText) || end.isAtEndOfNode(endText);\n\n  var isInserting = firstChild.hasBlockChildren() || lastChild.hasBlockChildren();\n\n  editor.insertFragmentAtRange(selection, fragment);\n  value = editor.value;\n  document = value.document;\n\n  var newTexts = document.getTexts().filter(function (n) {\n    return !keys.includes(n.key);\n  });\n  var newText = isAppending ? newTexts.last() : newTexts.takeLast(2).first();\n\n  if (newText && (lastInline || isInserting)) {\n    editor.moveToEndOfNode(newText);\n  } else if (newText) {\n    editor.moveToStartOfNode(newText).moveForward(lastBlock.text.length);\n  }\n};\n\n/**\n * Insert an `inline` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Inline} inline\n */\n\nCommands$6.insertInline = function (editor, inline) {\n  deleteExpanded(editor);\n\n  inline = Inline.create(inline);\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.insertInlineAtRange(selection, inline);\n\n  // If the node was successfully inserted, update the selection.\n  var node = editor.value.document.getNode(inline.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n\n/**\n * Insert a string of `text` with optional `marks` at the current selection.\n *\n * @param {Editor} editor\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\nCommands$6.insertText = function (editor, text, marks) {\n  deleteExpanded(editor);\n\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  marks = marks || selection.marks || document.getInsertMarksAtRange(selection);\n\n  editor.withoutNormalizing(function () {\n    editor.insertTextAtRange(selection, text, marks);\n\n    // If the text was successfully inserted, and the selection had marks on it,\n    // unset the selection's marks.\n    if (selection.marks && document !== editor.value.document) {\n      editor.select({ marks: null });\n    }\n  });\n};\n\n/**\n * Remove a `mark` from the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.removeMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n\n  if (selection.isExpanded) {\n    editor.removeMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.remove(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks2 = document.getActiveMarksAtRange(selection).remove(mark);\n    var _sel2 = selection.set('marks', _marks2);\n    editor.select(_sel2);\n  }\n};\n\n/**\n * Replace an `oldMark` with a `newMark` in the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} oldMark\n * @param {Mark} newMark\n */\n\nCommands$6.replaceMark = function (editor, oldMark, newMark) {\n  editor.removeMark(oldMark);\n  editor.addMark(newMark);\n};\n\n/**\n * Set the `properties` of block nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\nCommands$6.setBlocks = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.setBlocksAtRange(selection, properties);\n};\n\n/**\n * Set the `properties` of inline nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\nCommands$6.setInlines = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.setInlinesAtRange(selection, properties);\n};\n\n/**\n * Split the block node at the current selection, to optional `depth`.\n *\n * @param {Editor} editor\n * @param {Number} depth (optional)\n */\n\nCommands$6.splitBlock = function (editor) {\n  var depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  deleteExpanded(editor);\n\n  var value = editor.value;\n  var selection = value.selection,\n      document = value.document;\n\n  var marks = selection.marks || document.getInsertMarksAtRange(selection);\n  editor.splitBlockAtRange(selection, depth).moveToEnd();\n\n  if (marks && marks.size !== 0) {\n    editor.select({ marks: marks });\n  }\n};\n\n/**\n * Split the inline nodes to optional `height`.\n *\n * @param {Editor} editor\n * @param {Number} height (optional)\n */\n\nCommands$6.splitInline = function (editor, height) {\n  deleteExpanded(editor);\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.splitInlineAtRange(selection, height);\n};\n\n/**\n * Add or remove a `mark` from the characters in the current selection,\n * depending on whether it's already there.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.toggleMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n\n  var exists = value.activeMarks.has(mark);\n\n  if (exists) {\n    editor.removeMark(mark);\n  } else {\n    editor.addMark(mark);\n  }\n};\n\n/**\n * Unwrap nodes from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\nCommands$6.unwrapBlock = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.unwrapBlockAtRange(selection, properties);\n};\n\n/**\n * Unwrap nodes from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\nCommands$6.unwrapInline = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.unwrapInlineAtRange(selection, properties);\n};\n\n/**\n * Wrap nodes in a new `block`.\n *\n * @param {Editor} editor\n * @param {Block|Object|String} block\n */\n\nCommands$6.wrapBlock = function (editor, block) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.wrapBlockAtRange(selection, block);\n};\n\n/**\n * Wrap nodes in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Inline|Object|String} inline\n */\n\nCommands$6.wrapInline = function (editor, inline) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.wrapInlineAtRange(selection, inline);\n};\n\n/**\n * Wrap the current selection with prefix/suffix.\n *\n * @param {Editor} editor\n * @param {String} prefix\n * @param {String} suffix\n */\n\nCommands$6.wrapText = function (editor, prefix) {\n  var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : prefix;\n  var value = editor.value;\n  var selection = value.selection;\n\n  editor.wrapTextAtRange(selection, prefix, suffix);\n\n  // If the selection was collapsed, it will have moved the start offset too.\n  if (selection.isCollapsed) {\n    editor.moveStartBackward(prefix.length);\n  }\n\n  // Adding the suffix will have pushed the end of the selection further on, so\n  // we need to move it back to account for this.\n  editor.moveEndBackward(suffix.length);\n\n  // There's a chance that the selection points moved \"through\" each other,\n  // resulting in a now-incorrect selection direction.\n  if (selection.isForward !== editor.value.selection.isForward) {\n    editor.flip();\n  }\n};\n\n/**\n * A plugin that defines the core Slate logic.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction CorePlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins;\n\n  /**\n   * The core Slate commands.\n   *\n   * @type {Object}\n   */\n\n  var commands = CommandsPlugin(_extends({}, Commands$1, Commands$2, Commands$3, Commands$4, Commands$5, Commands$6));\n\n  /**\n   * The core Slate queries.\n   *\n   * @type {Object}\n   */\n\n  var queries = QueriesPlugin({\n    isAtomic: function isAtomic() {\n      return false;\n    },\n    isVoid: function isVoid() {\n      return false;\n    }\n  });\n\n  /**\n   * The core Slate schema.\n   *\n   * @type {Object}\n   */\n\n  var schema = SchemaPlugin({\n    rules: [\n    // Only allow block nodes in documents.\n    {\n      match: { object: 'document' },\n      nodes: [{\n        match: { object: 'block' }\n      }]\n    },\n\n    // Only allow block nodes or inline and text nodes in blocks.\n    {\n      match: {\n        object: 'block',\n        first: { object: 'block' }\n      },\n      nodes: [{\n        match: { object: 'block' }\n      }]\n    }, {\n      match: {\n        object: 'block',\n        first: [{ object: 'inline' }, { object: 'text' }]\n      },\n      nodes: [{\n        match: [{ object: 'inline' }, { object: 'text' }]\n      }]\n    },\n\n    // Only allow inline and text nodes in inlines.\n    {\n      match: { object: 'inline' },\n      nodes: [{ match: [{ object: 'inline' }, { object: 'text' }] }]\n    },\n\n    // Ensure that block and inline nodes have at least one text child.\n    {\n      match: [{ object: 'block' }, { object: 'inline' }],\n      nodes: [{ min: 1 }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n\n\n        if (code === 'child_min_invalid' && node.nodes.isEmpty()) {\n          editor.insertNodeByKey(node.key, 0, Text.create());\n        }\n      }\n    },\n\n    // Ensure that inline nodes are surrounded by text nodes.\n    {\n      match: { object: 'block' },\n      first: [{ object: 'block' }, { object: 'text' }],\n      last: [{ object: 'block' }, { object: 'text' }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    }, {\n      match: { object: 'inline' },\n      first: [{ object: 'block' }, { object: 'text' }],\n      last: [{ object: 'block' }, { object: 'text' }],\n      previous: [{ object: 'block' }, { object: 'text' }],\n      next: [{ object: 'block' }, { object: 'text' }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node,\n            index = error.index;\n\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else if (code === 'previous_sibling_object_invalid') {\n          i = index;\n        } else if (code === 'next_sibling_object_invalid') {\n          i = index + 1;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    },\n\n    // Merge adjacent text nodes with the same marks.\n    {\n      match: { object: 'text' },\n      next: function next(_next, match) {\n        return _next.object !== 'text' || !match.marks.equals(_next.marks);\n      },\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            next = error.next;\n\n\n        if (code === 'next_sibling_invalid') {\n          editor.mergeNodeByKey(next.key);\n        }\n      }\n    },\n\n    // Remove extra adjacent empty text nodes.\n    {\n      match: { object: 'text' },\n      previous: function previous(prev) {\n        return prev.object !== 'text' || prev.text !== '';\n      },\n      next: function next(_next2) {\n        return _next2.object !== 'text' || _next2.text !== '';\n      },\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            next = error.next,\n            previous = error.previous;\n\n\n        if (code === 'next_sibling_invalid') {\n          editor.removeNodeByKey(next.key);\n        } else if (code === 'previous_sibling_invalid') {\n          editor.removeNodeByKey(previous.key);\n        }\n      }\n    }]\n  });\n\n  /**\n   * Return the plugins.\n   *\n   * @type {Array}\n   */\n\n  return [schema].concat(toConsumableArray(plugins), [commands, queries]);\n}\n\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug$2 = Debug('slate:editor');\n\n/**\n * Editor.\n *\n * @type {Editor}\n */\n\nvar Editor = function () {\n  /**\n   * Create a new `Editor` with `attrs`.\n   *\n   * @param {Object} attrs\n   * @param {Object} options\n   */\n\n  function Editor() {\n    var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Editor);\n    var _options$controller = options.controller,\n        controller = _options$controller === undefined ? this : _options$controller,\n        _options$construct = options.construct,\n        construct = _options$construct === undefined ? true : _options$construct;\n    var _attrs$onChange = attrs.onChange,\n        onChange = _attrs$onChange === undefined ? function () {} : _attrs$onChange,\n        _attrs$plugins = attrs.plugins,\n        plugins = _attrs$plugins === undefined ? [] : _attrs$plugins,\n        _attrs$readOnly = attrs.readOnly,\n        readOnly = _attrs$readOnly === undefined ? false : _attrs$readOnly,\n        _attrs$value = attrs.value,\n        value = _attrs$value === undefined ? Value.create() : _attrs$value;\n\n\n    this.controller = controller;\n    this.middleware = {};\n    this.onChange = onChange;\n    this.operations = List();\n    this.readOnly = null;\n    this.value = null;\n\n    this.tmp = {\n      dirty: [],\n      flushing: false,\n      merge: null,\n      normalize: true,\n      save: true\n    };\n\n    var core = CorePlugin({ plugins: plugins });\n    registerPlugin(this, core);\n\n    if (construct) {\n      this.run('onConstruct');\n      this.setReadOnly(readOnly);\n      this.setValue(value, options);\n    }\n  }\n\n  /**\n   * Apply an `operation` to the editor, updating its value.\n   *\n   * @param {Operation|Object} operation\n   * @return {Editor}\n   */\n\n  createClass(Editor, [{\n    key: 'applyOperation',\n    value: function applyOperation(operation) {\n      var _this = this;\n\n      var operations = this.operations,\n          controller = this.controller;\n\n      var value = this.value;\n\n      // Add in the current `value` in case the operation was serialized.\n      if (isPlainObject(operation)) {\n        operation = _extends({}, operation, { value: value });\n      }\n\n      operation = Operation.create(operation);\n\n      // Save the operation into the history. Since `save` is a command, we need\n      // to do it without normalizing, since it would have side effects.\n      this.withoutNormalizing(function () {\n        controller.save(operation);\n        value = _this.value;\n      });\n\n      // Apply the operation to the value.\n      debug$2('apply', { operation: operation });\n      this.value = operation.apply(value);\n      this.operations = operations.push(operation);\n\n      // Get the paths of the affected nodes, and mark them as dirty.\n      var newDirtyPaths = getDirtyPaths(operation);\n      var dirty = this.tmp.dirty.reduce(function (memo, path) {\n        path = PathUtils.create(path);\n        var transformed = PathUtils.transform(path, operation);\n        memo = memo.concat(transformed.toArray());\n        return memo;\n      }, newDirtyPaths);\n\n      this.tmp.dirty = dirty;\n\n      // If we're not already, queue the flushing process on the next tick.\n      if (!this.tmp.flushing) {\n        this.tmp.flushing = true;\n        Promise.resolve().then(function () {\n          return _this.flush();\n        });\n      }\n\n      return controller;\n    }\n\n    /**\n     * Flush the editor's current change.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'flush',\n    value: function flush() {\n      this.run('onChange');\n      var value = this.value,\n          operations = this.operations,\n          controller = this.controller;\n\n      var change = { value: value, operations: operations };\n      this.operations = List();\n      this.tmp.flushing = false;\n      this.onChange(change);\n      return controller;\n    }\n\n    /**\n     * Trigger a command by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'command',\n    value: function command(type) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var controller = this.controller;\n\n\n      if (typeof type === 'function') {\n        type.apply(undefined, [controller].concat(args));\n        normalizeDirtyPaths(this);\n        return controller;\n      }\n\n      debug$2('command', { type: type, args: args });\n      var obj = { type: type, args: args };\n      this.run('onCommand', obj);\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n\n    /**\n     * Checks if a command by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand(type) {\n      var controller = this.controller;\n\n      var has = type in controller && controller[type].__command;\n\n      return has;\n    }\n\n    /**\n     * Checks if a query by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasQuery',\n    value: function hasQuery(type) {\n      var controller = this.controller;\n\n      var has = type in controller && controller[type].__query;\n\n      return has;\n    }\n\n    /**\n     * Normalize all of the nodes in the document from scratch.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize() {\n      var value = this.value,\n          controller = this.controller;\n      var document = value.document;\n\n      var table = document.getKeysToPathsTable();\n      var paths = Object.values(table).map(PathUtils.create);\n      this.tmp.dirty = this.tmp.dirty.concat(paths);\n      normalizeDirtyPaths(this);\n\n      var selection = value.selection;\n\n      document = value.document;\n\n      if (selection.isUnset && document.nodes.size) {\n        controller.moveToStartOfDocument();\n      }\n\n      return controller;\n    }\n\n    /**\n     * Ask a query by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'query',\n    value: function query(type) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      var controller = this.controller;\n\n\n      if (typeof type === 'function') {\n        return type.apply(undefined, [controller].concat(args));\n      }\n\n      debug$2('query', { type: type, args: args });\n      var obj = { type: type, args: args };\n      return this.run('onQuery', obj);\n    }\n\n    /**\n     * Register a command `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerCommand',\n    value: function registerCommand(type) {\n      var _this2 = this;\n\n      var controller = this.controller;\n\n\n      if (type in controller && controller[type].__command) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` command because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        return _this2.command.apply(_this2, [type].concat(args));\n      };\n      controller[type] = method;\n      method.__command = true;\n      return controller;\n    }\n\n    /**\n     * Register a query `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerQuery',\n    value: function registerQuery(type) {\n      var _this3 = this;\n\n      var controller = this.controller;\n\n\n      if (type in controller && controller[type].__query) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` query because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this3.query.apply(_this3, [type].concat(args));\n      };\n      controller[type] = method;\n      method.__query = true;\n      return controller;\n    }\n\n    /**\n     * Run through the middleware stack by `key` with `args`.\n     *\n     * @param {String} key\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(key) {\n      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      var controller = this.controller,\n          middleware = this.middleware;\n\n      var fns = middleware[key] || [];\n      var i = 0;\n\n      function next() {\n        var fn = fns[i++];\n        if (!fn) return;\n\n        for (var _len6 = arguments.length, overrides = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          overrides[_key6] = arguments[_key6];\n        }\n\n        if (overrides.length) {\n          args = overrides;\n        }\n\n        var ret = fn.apply(undefined, toConsumableArray(args).concat([controller, next]));\n        return ret;\n      }\n\n      Object.defineProperty(next, 'change', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'onChange', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'props', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'schema', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      Object.defineProperty(next, 'stack', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n\n      return next();\n    }\n\n    /**\n     * Set the `readOnly` flag.\n     *\n     * @param {Boolean} readOnly\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setReadOnly',\n    value: function setReadOnly(readOnly) {\n      this.readOnly = readOnly;\n      return this;\n    }\n\n    /**\n     * Set the editor's `value`.\n     *\n     * @param {Value} value\n     * @param {Options} options\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _options$normalize = options.normalize,\n          normalize = _options$normalize === undefined ? value !== this.value : _options$normalize;\n\n      this.value = value;\n\n      if (normalize) {\n        this.normalize();\n      }\n\n      return this;\n    }\n\n    /**\n     * Apply a series of changes inside a synchronous `fn`, deferring\n     * normalization until after the function has finished executing.\n     *\n     * @param {Function} fn\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'withoutNormalizing',\n    value: function withoutNormalizing(fn) {\n      var controller = this.controller;\n\n      var value = this.tmp.normalize;\n      this.tmp.normalize = false;\n      fn(controller);\n      this.tmp.normalize = value;\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change(fn) {\n      warning(false, 'As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`');\n\n      for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n        args[_key7 - 1] = arguments[_key7];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n    }\n  }, {\n    key: 'call',\n    value: function call(fn) {\n      warning(false, 'As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.');\n\n      for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        args[_key8 - 1] = arguments[_key8];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n      return this.controller;\n    }\n  }, {\n    key: 'applyOperations',\n    value: function applyOperations(operations) {\n      var _this4 = this;\n\n      warning(false, 'As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead.');\n\n      operations.forEach(function (op) {\n        return _this4.applyOperation(op);\n      });\n      return this.controller;\n    }\n  }, {\n    key: 'setOperationFlag',\n    value: function setOperationFlag(key, value) {\n      warning(false, 'As of slate@0.41 the `change.setOperationFlag` method has been deprecated.');\n\n      this.tmp[key] = value;\n      return this;\n    }\n  }, {\n    key: 'getFlag',\n    value: function getFlag(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      warning(false, 'As of slate@0.41 the `change.getFlag` method has been deprecated.');\n\n      return options[key] !== undefined ? options[key] : this.tmp[key];\n    }\n  }, {\n    key: 'unsetOperationFlag',\n    value: function unsetOperationFlag(key) {\n      warning(false, 'As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated.');\n\n      delete this.tmp[key];\n      return this;\n    }\n  }, {\n    key: 'withoutNormalization',\n    value: function withoutNormalization(fn) {\n      warning(false, 'As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`.');\n\n      return this.withoutNormalizing(fn);\n    }\n  }, {\n    key: 'editor',\n    get: function get$$1() {\n      warning(false, \"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`.\");\n\n      return this.controller;\n    }\n  }]);\n  return Editor;\n}();\n\n/**\n * Get the \"dirty\" paths for a given `operation`.\n *\n * @param {Operation} operation\n * @return {Array}\n */\n\nfunction getDirtyPaths(operation) {\n  var type = operation.type,\n      node = operation.node,\n      path = operation.path,\n      newPath = operation.newPath;\n\n\n  switch (type) {\n    case 'add_mark':\n    case 'insert_text':\n    case 'remove_mark':\n    case 'remove_text':\n    case 'set_mark':\n    case 'set_node':\n      {\n        var ancestors = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(ancestors), [path]);\n      }\n\n    case 'insert_node':\n      {\n        var table = node.getKeysToPathsTable();\n        var paths = Object.values(table).map(function (p) {\n          return path.concat(p);\n        });\n        var _ancestors = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(_ancestors), [path], toConsumableArray(paths));\n      }\n\n    case 'split_node':\n      {\n        var _ancestors2 = PathUtils.getAncestors(path).toArray();\n        var nextPath = PathUtils.increment(path);\n        return [].concat(toConsumableArray(_ancestors2), [path, nextPath]);\n      }\n\n    case 'merge_node':\n      {\n        var _ancestors3 = PathUtils.getAncestors(path).toArray();\n        var previousPath = PathUtils.decrement(path);\n        return [].concat(toConsumableArray(_ancestors3), [previousPath]);\n      }\n\n    case 'move_node':\n      {\n        if (PathUtils.isEqual(path, newPath)) {\n          return [];\n        }\n\n        var oldAncestors = PathUtils.getAncestors(path).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n\n        var newAncestors = PathUtils.getAncestors(newPath).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n\n        return [].concat(toConsumableArray(oldAncestors), toConsumableArray(newAncestors));\n      }\n\n    case 'remove_node':\n      {\n        var _ancestors4 = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(_ancestors4));\n      }\n\n    default:\n      {\n        return [];\n      }\n  }\n}\n\n/**\n * Normalize any new \"dirty\" paths that have been added to the change.\n *\n * @param {Editor}\n */\n\nfunction normalizeDirtyPaths(editor) {\n  if (!editor.tmp.normalize) {\n    return;\n  }\n\n  if (!editor.tmp.dirty.length) {\n    return;\n  }\n\n  editor.withoutNormalizing(function () {\n    while (editor.tmp.dirty.length) {\n      var path = editor.tmp.dirty.pop();\n      normalizeNodeByPath(editor, path);\n    }\n  });\n}\n\n/**\n * Normalize the node at a specific `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\nfunction normalizeNodeByPath(editor, path) {\n  var controller = editor.controller;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n\n  var node = document.assertNode(path);\n  var iterations = 0;\n  var max = 100 + (node.object === 'text' ? 1 : node.nodes.size);\n\n  while (node) {\n    var fn = node.normalize(controller);\n\n    if (!fn) {\n      break;\n    }\n\n    // Run the normalize `fn` to fix the node.\n    fn(controller);\n\n    // Attempt to re-find the node by path, or by key if it has changed\n    // locations in the tree continue iterating.\n    value = editor.value;\n    document = value.document;\n    var _node = node,\n        key = _node.key;\n\n    var found = document.getDescendant(path);\n\n    if (found && found.key === key) {\n      node = found;\n    } else {\n      found = document.getDescendant(key);\n\n      if (found) {\n        node = found;\n        path = document.getPath(key);\n      } else {\n        // If it no longer exists by key, it was removed, so we're done.\n        break;\n      }\n    }\n\n    // Increment the iterations counter, and check to make sure that we haven't\n    // exceeded the max. Without this check, it's easy for the `normalize`\n    // function of a schema rule to be written incorrectly and for an infinite\n    // invalid loop to occur.\n    iterations++;\n\n    if (iterations > max) {\n      throw new Error('A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.');\n    }\n  }\n}\n\n/**\n * Register a `plugin` with the editor.\n *\n * @param {Editor} editor\n * @param {Object|Array} plugin\n */\n\nfunction registerPlugin(editor, plugin) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(function (p) {\n      return registerPlugin(editor, p);\n    });\n    return;\n  }\n\n  var commands = plugin.commands,\n      queries = plugin.queries,\n      schema = plugin.schema,\n      rest = objectWithoutProperties(plugin, ['commands', 'queries', 'schema']);\n\n\n  if (commands) {\n    var commandsPlugin = CommandsPlugin(commands);\n    registerPlugin(editor, commandsPlugin);\n  }\n\n  if (queries) {\n    var queriesPlugin = QueriesPlugin(queries);\n    registerPlugin(editor, queriesPlugin);\n  }\n\n  if (schema) {\n    var schemaPlugin = SchemaPlugin(schema);\n    registerPlugin(editor, schemaPlugin);\n  }\n\n  for (var key in rest) {\n    var fn = rest[key];\n    var middleware = editor.middleware[key] = editor.middleware[key] || [];\n    middleware.push(fn);\n  }\n}\n\n/**\n * Mix in an `Interface` to a `Class`.\n *\n * @param {Class} Interface\n * @param {Class} Class\n */\n\nfunction mixin(Interface, Classes) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = Classes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var Class = _step.value;\n\n      // Copy static properties from the interface.\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = Object.getOwnPropertyNames(Interface)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var name = _step2.value;\n\n          if (Class.hasOwnProperty(name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface, name);\n          Object.defineProperty(Class, name, desc);\n        }\n\n        // Copy instance properties from the interface.\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = Object.getOwnPropertyNames(Interface.prototype)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _name = _step3.value;\n\n          if (Class.prototype.hasOwnProperty(_name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface.prototype, _name);\n          Object.defineProperty(Class.prototype, _name, desc);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n/**\n * A factory for the interface that all Slate objects implement.\n *\n * @type {Function}\n */\n\nfunction create$2(type) {\n  var TYPE = TYPES[type];\n  var camel = '' + type.charAt(0).toUpperCase() + type.slice(1);\n  var is$$1 = 'is' + camel;\n\n  var ObjectInterface = function () {\n    function ObjectInterface() {\n      classCallCheck(this, ObjectInterface);\n    }\n\n    createClass(ObjectInterface, [{\n      key: 'object',\n\n      /**\n       * Return the type of the object.\n       *\n       * @return {String}\n       */\n\n      get: function get$$1() {\n        return type;\n      }\n    }]);\n    return ObjectInterface;\n  }();\n\n  ObjectInterface[is$$1] = isObject.bind(null, type);\n  ObjectInterface.prototype[TYPE] = true;\n  return ObjectInterface;\n}\n\n/**\n * Mix in the object interfaces.\n */\n\nObject.entries({\n  Block: Block,\n  Change: Change,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  Leaf: Leaf,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  Point: Point,\n  Range: Range,\n  Selection: Selection,\n  Text: Text,\n  Value: Value\n}).forEach(function (_ref) {\n  var _ref2 = slicedToArray(_ref, 2),\n      camel = _ref2[0],\n      obj = _ref2[1];\n\n  return mixin(create$2(camel.toLowerCase()), [obj]);\n});\n\n/**\n * The interface that all Slate models implement.\n *\n * @type {Class}\n */\n\nvar ModelInterface = function () {\n  function ModelInterface() {\n    classCallCheck(this, ModelInterface);\n  }\n\n  createClass(ModelInterface, [{\n    key: 'toJS',\n\n\n    /**\n     * Alias `toJS`.\n     */\n\n    value: function toJS() {\n      return this.toJSON.apply(this, arguments);\n    }\n  }], [{\n    key: 'fromJS',\n\n    /**\n     * Alias `fromJS`.\n     */\n\n    value: function fromJS() {\n      return this.fromJSON.apply(this, arguments);\n    }\n  }]);\n  return ModelInterface;\n}();\n\n/**\n * Mix in the common interface.\n *\n * @param {Record}\n */\n\nmixin(ModelInterface, [Block, Decoration, Document, Inline, Leaf, Mark, Node, Operation, Point, Range, Selection, Text, Value]);\n\n/* global WeakMap, Map, Symbol */\n\n/**\n * GLOBAL: True if memoization should is enabled.\n *\n * @type {Boolean}\n */\n\nvar ENABLED = true;\n\n/**\n * The leaf node of a cache tree. Used to support variable argument length. A\n * unique object, so that native Maps will key it by reference.\n *\n * @type {Symbol}\n */\n\nvar LEAF = Symbol('LEAF');\n\n/**\n * The node of a cache tree for a WeakMap to store cache visited by objects\n *\n * @type {Symbol}\n */\n\nvar STORE_KEY = Symbol('STORE_KEY');\n\n/**\n * Values to represent a memoized undefined and null value. Allows efficient value\n * retrieval using Map.get only.\n *\n * @type {Symbol}\n */\n\nvar UNDEFINED = Symbol('undefined');\nvar NULL = Symbol('null');\n\n/**\n * Default value for unset keys in native Maps\n *\n * @type {Undefined}\n */\n\nvar UNSET = undefined;\n\n/**\n * Global Store for all cached values\n *\n * @type {WeakMap}\n */\n\nvar memoizeStore = new WeakMap();\n\n/**\n * Memoize all of the `properties` on a `object`.\n *\n * @param {Object} object\n * @param {Array} properties\n * @return {Record}\n */\n\nfunction memoize(object, properties) {\n  var _loop = function _loop(property) {\n    var original = object[property];\n\n    if (!original) {\n      throw new Error('Object does not have a property named \"' + property + '\".');\n    }\n\n    object[property] = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      // If memoization is disabled, call into the original method.\n      if (!ENABLED) return original.apply(this, args);\n\n      if (!memoizeStore.has(this)) {\n        memoizeStore.set(this, {\n          noArgs: {},\n          hasArgs: {}\n        });\n      }\n\n      var _memoizeStore$get = memoizeStore.get(this),\n          noArgs = _memoizeStore$get.noArgs,\n          hasArgs = _memoizeStore$get.hasArgs;\n\n      var takesArguments = args.length !== 0;\n\n      var cachedValue = void 0;\n      var keys = void 0;\n\n      if (takesArguments) {\n        keys = [property].concat(args);\n        cachedValue = getIn(hasArgs, keys);\n      } else {\n        cachedValue = noArgs[property];\n      }\n\n      // If we've got a result already, return it.\n      if (cachedValue !== UNSET) {\n        return cachedValue === UNDEFINED ? undefined : cachedValue;\n      }\n\n      // Otherwise calculate what it should be once and cache it.\n      var value = original.apply(this, args);\n      var v = value === undefined ? UNDEFINED : value;\n\n      if (takesArguments) {\n        setIn(hasArgs, keys, v);\n      } else {\n        noArgs[property] = v;\n      }\n\n      return value;\n    };\n  };\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = properties[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var property = _step.value;\n\n      _loop(property);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\n/**\n * Get a value at a key path in a tree of Map.\n *\n * If not set, returns UNSET.\n * If the set value is undefined, returns UNDEFINED.\n *\n * @param {Map} map\n * @param {Array} keys\n * @return {Any|UNSET|UNDEFINED}\n */\n\nfunction getIn(map, keys) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var key = _step2.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) === 'object') {\n        map = map[STORE_KEY] && map[STORE_KEY].get(key);\n      } else {\n        map = map[key];\n      }\n\n      if (map === UNSET) return UNSET;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return map[LEAF];\n}\n\n/**\n * Set a value at a key path in a tree of Map, creating Maps on the go.\n *\n * @param {Map} map\n * @param {Array} keys\n * @param {Any} value\n * @return {Map}\n */\n\nfunction setIn(map, keys, value) {\n  var child = map;\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = keys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var key = _step3.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) !== 'object') {\n        if (!child[key]) {\n          child[key] = {};\n        }\n\n        child = child[key];\n        continue;\n      }\n\n      if (!child[STORE_KEY]) {\n        child[STORE_KEY] = new WeakMap();\n      }\n\n      if (!child[STORE_KEY].has(key)) {\n        var newChild = {};\n        child[STORE_KEY].set(key, newChild);\n        child = newChild;\n        continue;\n      }\n\n      child = child[STORE_KEY].get(key);\n    }\n\n    // The whole path has been created, so set the value to the bottom most map.\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  child[LEAF] = value;\n  return map;\n}\n\n/**\n * In DEV mode, clears the previously memoized values, globally.\n *\n * @return {Void}\n */\n\nfunction resetMemoization() {\n  memoizeStore = new WeakMap();\n}\n\n/**\n * In DEV mode, enable or disable the use of memoize values, globally.\n *\n * @param {Boolean} enabled\n * @return {Void}\n */\n\nfunction useMemoization(enabled) {\n  ENABLED = enabled;\n}\n\n/**\n * The interface that `Document`, `Block` and `Inline` all implement, to make\n * working with the recursive node tree easier.\n *\n * @type {Class}\n */\n\nvar NodeInterface = function () {\n  function NodeInterface() {\n    classCallCheck(this, NodeInterface);\n  }\n\n  createClass(NodeInterface, [{\n    key: 'getFirstText',\n\n    /**\n     * Get the first text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n\n    value: function getFirstText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n\n      var found = this.nodes.find(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getFirstText();\n        return !!descendant;\n      });\n\n      return descendant || found;\n    }\n\n    /**\n     * Get an object mapping all the keys in the node to their paths.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'getKeysToPathsTable',\n    value: function getKeysToPathsTable() {\n      var ret = defineProperty({}, this.key, []);\n\n      if (this.nodes) {\n        this.nodes.forEach(function (node, i) {\n          var nested = node.getKeysToPathsTable();\n\n          for (var key in nested) {\n            var path = nested[key];\n\n            warning(!(key in ret), 'A node with a duplicate key of \"' + key + '\" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.');\n\n            ret[key] = [i].concat(toConsumableArray(path));\n          }\n        });\n      }\n\n      return ret;\n    }\n\n    /**\n     * Get the last text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getLastText',\n    value: function getLastText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n\n      var found = this.nodes.findLast(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getLastText();\n        return descendant;\n      });\n\n      return descendant || found;\n    }\n\n    /**\n     * Get a node in the tree, or the node itself.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNode',\n    value: function getNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (this.object === 'text' && path.size) return null;\n      var node = path.size ? this.getDescendant(path) : this;\n      return node;\n    }\n\n    /**\n     * Find the path to a node.\n     *\n     * @param {String|List} key\n     * @return {List}\n     */\n\n  }, {\n    key: 'getPath',\n    value: function getPath(key) {\n      // Handle the case of passing in a path directly, to match other methods.\n      if (List.isList(key)) return key;\n\n      var dict = this.getKeysToPathsTable();\n      var path = dict[key];\n      return path ? List(path) : null;\n    }\n\n    /**\n     * Get the concatenated text string of a node.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getText',\n    value: function getText() {\n      if (this.object === 'text') {\n        return this.text;\n      }\n\n      var text = this.nodes.reduce(function (memo, c) {\n        return memo + c.text;\n      }, '');\n      return text;\n    }\n\n    /**\n     * Check if a node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasNode',\n    value: function hasNode(path) {\n      var node = this.getNode(path);\n      return !!node;\n    }\n\n    /**\n     * Normalize the text node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Function|Void}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(editor) {\n      var normalizer = editor.run('normalizeNode', this);\n      return normalizer;\n    }\n\n    /**\n     * Regenerate the node's key.\n     *\n     * @return {Node}\n     */\n\n  }, {\n    key: 'regenerateKey',\n    value: function regenerateKey() {\n      var key = KeyUtils.create();\n      var node = this.set('key', key);\n      return node;\n    }\n\n    /**\n     * Resolve a path from a path list or key string.\n     *\n     * An `index` can be provided, in which case paths created from a key string\n     * will have the index pushed onto them. This is helpful in cases where you\n     * want to accept either a `path` or a `key, index` combination for targeting\n     * a location in the tree that doesn't exist yet, like when inserting.\n     *\n     * @param {List|String} value\n     * @param {Number} index\n     * @return {List}\n     */\n\n  }, {\n    key: 'resolvePath',\n    value: function resolvePath(path, index) {\n      if (typeof path === 'string') {\n        path = this.getPath(path);\n\n        if (index != null) {\n          path = path.concat(index);\n        }\n      } else {\n        path = PathUtils.create(path);\n      }\n\n      return path;\n    }\n\n    /**\n     * Validate the node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Error|Void}\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(editor) {\n      var error = editor.run('validateNode', this);\n      return error;\n    }\n  }]);\n  return NodeInterface;\n}();\n\n/**\n * Memoize read methods.\n */\n\nmemoize(NodeInterface.prototype, ['getFirstText', 'getKeysToPathsTable', 'getLastText', 'getText', 'normalize', 'validate']);\n\n/**\n * Mix in the node interface.\n */\n\nmixin(NodeInterface, [Block, Document, Inline, Text]);\n\n/**\n * The interface that `Document`, `Block` and `Inline` all implement, to make\n * working with the recursive node tree easier.\n *\n * @type {Class}\n */\n\nvar ElementInterface = function () {\n  function ElementInterface() {\n    classCallCheck(this, ElementInterface);\n  }\n\n  createClass(ElementInterface, [{\n    key: 'addMark',\n\n\n    /**\n     * Add `mark` to text at `path`.\n     *\n     * @param {List|String} path\n     * @param {Mark} mark\n     * @return {Node}\n     */\n\n    value: function addMark(path, mark) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.addMark(mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Create a decoration with `properties` relative to the node.\n     *\n     * @param {Object|Decoration} properties\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'createDecoration',\n    value: function createDecoration(properties) {\n      properties = Decoration.createProperties(properties);\n      var decoration = this.resolveDecoration(properties);\n      return decoration;\n    }\n\n    /**\n     * Create a point with `properties` relative to the node.\n     *\n     * @param {Object|Point} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createPoint',\n    value: function createPoint(properties) {\n      properties = Point.createProperties(properties);\n      var point = this.resolvePoint(properties);\n      return point;\n    }\n\n    /**\n     * Create a range with `properties` relative to the node.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createRange',\n    value: function createRange(properties) {\n      properties = Range.createProperties(properties);\n      var range = this.resolveRange(properties);\n      return range;\n    }\n\n    /**\n     * Create a selection with `properties` relative to the node.\n     *\n     * @param {Object|Selection} properties\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'createSelection',\n    value: function createSelection(properties) {\n      properties = Selection.createProperties(properties);\n      var selection = this.resolveSelection(properties);\n      return selection;\n    }\n\n    /**\n     * Recursively filter all descendant nodes with `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'filterDescendants',\n    value: function filterDescendants(iterator) {\n      var matches = [];\n\n      this.forEachDescendant(function (node, i, nodes) {\n        if (iterator(node, i, nodes)) matches.push(node);\n      });\n\n      return List(matches);\n    }\n\n    /**\n     * Recursively find a descendant node by `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'findDescendant',\n    value: function findDescendant(iterator) {\n      var found = null;\n\n      this.forEachDescendant(function (node, i, nodes) {\n        if (iterator(node, i, nodes)) {\n          found = node;\n          return false;\n        }\n      });\n\n      return found;\n    }\n\n    /**\n     * Recursively find a descendant node and its path by `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Null|[Node, List]}\n     */\n\n  }, {\n    key: 'findDescendantAndPath',\n    value: function findDescendantAndPath(iterator) {\n      var pathToThisNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var found = void 0;\n      var foundPath = void 0;\n\n      this.forEachDescendantWithPath(function (node, path, nodes) {\n        if (iterator(node, path, nodes)) {\n          found = node;\n          foundPath = path;\n          return false;\n        }\n      }, pathToThisNode, findLast);\n\n      return found ? [found, foundPath] : null;\n    }\n\n    // Easy helpers to avoid needing to pass findLast boolean\n\n  }, {\n    key: 'findFirstDescendantAndPath',\n    value: function findFirstDescendantAndPath(iterator, pathToThisNode) {\n      return this.findDescendantAndPath(iterator, pathToThisNode, false);\n    }\n  }, {\n    key: 'findLastDescendantAndPath',\n    value: function findLastDescendantAndPath(iterator, pathToThisNode) {\n      return this.findDescendantAndPath(iterator, pathToThisNode, true);\n    }\n\n    /**\n     * Recursively iterate over all descendant nodes with `iterator`. If the\n     * iterator returns false it will break the loop.\n     *\n     * @param {Function} iterator\n     */\n\n  }, {\n    key: 'forEachDescendant',\n    value: function forEachDescendant(iterator) {\n      var ret = void 0;\n\n      this.nodes.forEach(function (child, i, nodes) {\n        if (iterator(child, i, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendant(iterator);\n          return ret;\n        }\n      });\n\n      return ret;\n    }\n\n    /**\n     * Recursively iterate over all descendant nodes with `iterator`. If the\n     * iterator returns false it will break the loop.\n     * Calls iterator with node and path.\n     *\n     * @param {Function} iterator\n     * @param {List} path\n     * @param {Boolean} findLast - whether to iterate in reverse order\n     */\n\n  }, {\n    key: 'forEachDescendantWithPath',\n    value: function forEachDescendantWithPath(iterator) {\n      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments[2];\n\n      var nodes = this.nodes;\n      var ret = void 0;\n\n      if (findLast) nodes = nodes.reverse();\n\n      nodes.forEach(function (child, i) {\n        var childPath = path.concat(i);\n\n        if (iterator(child, childPath, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendantWithPath(iterator, childPath, findLast);\n          return ret;\n        }\n      });\n\n      return ret;\n    }\n\n    /**\n     * Get a set of the active marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarksAtRange',\n    value: function getActiveMarksAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return Set();\n\n      if (range.isCollapsed) {\n        var _range = range,\n            _start = _range.start;\n\n        return this.getMarksAtPosition(_start.path, _start.offset).toSet();\n      }\n\n      var _range2 = range,\n          start = _range2.start,\n          end = _range2.end;\n\n      var startPath = start.path;\n      var startOffset = start.offset;\n      var endPath = end.path;\n      var endOffset = end.offset;\n      var startText = this.getDescendant(startPath);\n      var endText = this.getDescendant(endPath);\n\n      if (!PathUtils.isEqual(startPath, endPath)) {\n        while (!PathUtils.isEqual(startPath, endPath) && endOffset === 0) {\n          \n          var _getPreviousTextAndPa = this.getPreviousTextAndPath(endPath);\n\n          var _getPreviousTextAndPa2 = slicedToArray(_getPreviousTextAndPa, 2);\n\n          endText = _getPreviousTextAndPa2[0];\n          endPath = _getPreviousTextAndPa2[1];\n\n          endOffset = endText.text.length;\n        }\n\n        while (!PathUtils.isEqual(startPath, endPath) && startOffset === startText.text.length) {\n          \n          var _getNextTextAndPath = this.getNextTextAndPath(startPath);\n\n          var _getNextTextAndPath2 = slicedToArray(_getNextTextAndPath, 2);\n\n          startText = _getNextTextAndPath2[0];\n          startPath = _getNextTextAndPath2[1];\n\n          startOffset = 0;\n        }\n      }\n\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.marks;\n      }\n\n      var startMarks = startText.marks;\n\n      // PERF: if start marks is empty we can return early.\n      if (startMarks.size === 0) {\n        return Set();\n      }\n\n      var endMarks = endText.marks;\n      var marks = startMarks.intersect(endMarks);\n\n      // If marks is already empty, the active marks is empty\n      if (marks.size === 0) {\n        return marks;\n      }\n\n      \n      var _getNextTextAndPath3 = this.getNextTextAndPath(startPath);\n\n      var _getNextTextAndPath4 = slicedToArray(_getNextTextAndPath3, 2);\n\n      startText = _getNextTextAndPath4[0];\n      startPath = _getNextTextAndPath4[1];\n\n\n      while (!PathUtils.isEqual(startPath, endPath)) {\n        if (startText.text.length !== 0) {\n          marks = marks.intersect(startText.marks);\n\n          if (marks.size === 0) {\n            return Set();\n          }\n        }\n\n        \n        var _getNextTextAndPath5 = this.getNextTextAndPath(startPath);\n\n        var _getNextTextAndPath6 = slicedToArray(_getNextTextAndPath5, 2);\n\n        startText = _getNextTextAndPath6[0];\n        startPath = _getNextTextAndPath6[1];\n      }\n\n      return marks;\n    }\n\n    /**\n     * Get a list of the ancestors of a descendant.\n     *\n     * @param {List|String} path\n     * @return {List<Node>|Null}\n     */\n\n  }, {\n    key: 'getAncestors',\n    value: function getAncestors(path) {\n      var _this = this;\n\n      path = this.resolvePath(path);\n      if (!path) return null;\n\n      var ancestors = [];\n\n      path.forEach(function (p, i) {\n        var current = path.slice(0, i);\n        var parent = _this.getNode(current);\n        ancestors.push(parent);\n      });\n\n      return List(ancestors);\n    }\n\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocks',\n    value: function getBlocks() {\n      var array = this.getBlocksAsArray();\n      return List(array);\n    }\n\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksAsArray',\n    value: function getBlocksAsArray() {\n      return this.nodes.reduce(function (array, child) {\n        if (child.object !== 'block') return array;\n        if (!child.isLeafBlock()) return array.concat(child.getBlocksAsArray());\n        array.push(child);\n        return array;\n      }, []);\n    }\n\n    /**\n     * Get the leaf block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksAtRange',\n    value: function getBlocksAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`.');\n\n      return this.getLeafBlocksAtRange(range);\n    }\n\n    /**\n     * Get the bottom-most block descendants in a `range` as an array\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getBlocksAtRangeAsArray',\n    value: function getBlocksAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`.');\n\n      return this.getLeafBlocksAtRangeAsArray(range);\n    }\n\n    /**\n     * Get all of the leaf blocks that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksByType',\n    value: function getBlocksByType(type) {\n      var array = this.getBlocksByTypeAsArray(type);\n      return List(array);\n    }\n\n    /**\n     * Get all of the leaf blocks that match a `type` as an array\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getBlocksByTypeAsArray',\n    value: function getBlocksByTypeAsArray(type) {\n      return this.nodes.reduce(function (array, node) {\n        if (node.object !== 'block') {\n          return array;\n        } else if (node.isLeafBlock() && node.type === type) {\n          array.push(node);\n          return array;\n        } else {\n          return array.concat(node.getBlocksByTypeAsArray(type));\n        }\n      }, []);\n    }\n\n    /**\n     * Get a child node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getChild',\n    value: function getChild(path) {\n      path = this.resolvePath(path);\n      if (!path || path.size > 1) return null;\n      var child = this.nodes.get(path.first());\n      return child;\n    }\n\n    /**\n     * Get closest parent of node that matches an `iterator`.\n     *\n     * @param {List|String} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosest',\n    value: function getClosest(path, iterator) {\n      var _this2 = this;\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n\n      var closest = ancestors.findLast(function (node) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        // We never want to include the top-level node.\n        if (node === _this2) return false;\n        return iterator.apply(undefined, [node].concat(args));\n      });\n\n      return closest || null;\n    }\n\n    /**\n     * Get the closest block parent of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestBlock',\n    value: function getClosestBlock(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'block';\n      });\n      return closest;\n    }\n\n    /**\n     * Get the closest inline parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestInline',\n    value: function getClosestInline(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return closest;\n    }\n\n    /**\n     * Get the closest void parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestVoid',\n    value: function getClosestVoid(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.');\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n\n      var ancestor = ancestors.findLast(function (a) {\n        return editor.query('isVoid', a);\n      });\n      return ancestor;\n    }\n\n    /**\n     * Get the common ancestor of nodes `a` and `b`.\n     *\n     * @param {List} a\n     * @param {List} b\n     * @return {Node}\n     */\n\n  }, {\n    key: 'getCommonAncestor',\n    value: function getCommonAncestor(a, b) {\n      a = this.resolvePath(a);\n      b = this.resolvePath(b);\n      if (!a || !b) return null;\n\n      var path = PathUtils.relate(a, b);\n      var node = this.getNode(path);\n      return node;\n    }\n\n    /**\n     * Get the decorations for the node from an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {List}\n     */\n\n  }, {\n    key: 'getDecorations',\n    value: function getDecorations(editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getDecorations` method takes an `editor` instead of a `value`.');\n\n      var array = editor.run('decorateNode', this);\n      var decorations = Decoration.createList(array);\n      return decorations;\n    }\n\n    /**\n     * Get the depth of a descendant, with optional `startAt`.\n     *\n     * @param {List|String} path\n     * @param {Number} startAt\n     * @return {Number|Null}\n     */\n\n  }, {\n    key: 'getDepth',\n    value: function getDepth(path) {\n      var startAt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      path = this.resolvePath(path);\n      if (!path) return null;\n\n      var node = this.getNode(path);\n      var depth = node ? path.size - 1 + startAt : null;\n      return depth;\n    }\n\n    /**\n     * Get a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getDescendant',\n    value: function getDescendant(path) {\n      path = this.resolvePath(path);\n      if (!path || !path.size) return null;\n\n      var node = this;\n\n      path.forEach(function (index) {\n        node = node.getIn(['nodes', index]);\n        return !!node;\n      });\n\n      return node;\n    }\n\n    /**\n     * Get a fragment of the node at a `range`.\n     *\n     * @param {Range} range\n     * @return {Document}\n     */\n\n  }, {\n    key: 'getFragmentAtRange',\n    value: function getFragmentAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        return Document.create();\n      }\n\n      var _range3 = range,\n          start = _range3.start,\n          end = _range3.end;\n\n      var node = this;\n      var targetPath = end.path;\n      var targetPosition = end.offset;\n      var mode = 'end';\n\n      while (targetPath.size) {\n        var index = targetPath.last();\n        node = node.splitNode(targetPath, targetPosition);\n        targetPosition = index + 1;\n        targetPath = PathUtils.lift(targetPath);\n\n        if (!targetPath.size && mode === 'end') {\n          targetPath = start.path;\n          targetPosition = start.offset;\n          mode = 'start';\n        }\n      }\n\n      var startIndex = start.path.first() + 1;\n      var endIndex = end.path.first() + 2;\n      var nodes = node.nodes.slice(startIndex, endIndex);\n      var fragment = Document.create({ nodes: nodes });\n      return fragment;\n    }\n\n    /**\n     * Get the furthest parent of a node that matches an `iterator`.\n     *\n     * @param {Path} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthest',\n    value: function getFurthest(path, iterator) {\n      var _this3 = this;\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n\n      var furthest = ancestors.find(function (node) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        // We never want to include the top-level node.\n        if (node === _this3) return false;\n        return iterator.apply(undefined, [node].concat(args));\n      });\n\n      return furthest || null;\n    }\n\n    /**\n     * Get the furthest ancestor of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestAncestor',\n    value: function getFurthestAncestor(path) {\n      path = this.resolvePath(path);\n      if (!path || !path.size) return null;\n      var furthest = this.nodes.get(path.first());\n      return furthest;\n    }\n\n    /**\n     * Get the furthest block parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestBlock',\n    value: function getFurthestBlock(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'block';\n      });\n      return furthest;\n    }\n\n    /**\n     * Get the furthest inline parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestInline',\n    value: function getFurthestInline(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return furthest;\n    }\n\n    /**\n     * Get the furthest ancestor of a node, where all ancestors to that point only have one child.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestOnlyChildAncestor',\n    value: function getFurthestOnlyChildAncestor(path) {\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n\n      var furthest = ancestors.rest().reverse().takeUntil(function (p) {\n        return p.nodes.size > 1;\n      }).last();\n\n      return furthest || null;\n    }\n\n    /**\n     * Get the closest inline nodes for each text node in the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlines',\n    value: function getInlines() {\n      var array = this.getInlinesAsArray();\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get the closest inline nodes for each text node in the node, as an array.\n     *\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getInlinesAsArray',\n    value: function getInlinesAsArray() {\n      var array = [];\n\n      this.nodes.forEach(function (child) {\n        if (child.object === 'text') return;\n\n        if (child.isLeafInline()) {\n          array.push(child);\n        } else {\n          array = array.concat(child.getInlinesAsArray());\n        }\n      });\n\n      return array;\n    }\n\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesAtRange',\n    value: function getInlinesAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`.');\n\n      return this.getLeafInlinesAtRange(range);\n    }\n\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getInlinesAtRangeAsArray',\n    value: function getInlinesAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`.');\n\n      return this.getLeafInlinesAtRangeAsArray(range);\n    }\n\n    /**\n     * Get all of the leaf inline nodes that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesByType',\n    value: function getInlinesByType(type) {\n      var array = this.getInlinesByTypeAsArray(type);\n      var list = List(array);\n      return list;\n    }\n\n    /**\n     * Get all of the leaf inline nodes that match a `type` as an array.\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getInlinesByTypeAsArray',\n    value: function getInlinesByTypeAsArray(type) {\n      var array = this.nodes.reduce(function (inlines, node) {\n        if (node.object === 'text') {\n          return inlines;\n        } else if (node.isLeafInline() && node.type === type) {\n          inlines.push(node);\n          return inlines;\n        } else {\n          return inlines.concat(node.getInlinesByTypeAsArray(type));\n        }\n      }, []);\n\n      return array;\n    }\n\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getInsertMarksAtRange',\n    value: function getInsertMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range4 = range,\n          start = _range4.start;\n\n\n      if (range.isUnset) {\n        return Set();\n      }\n\n      if (range.isCollapsed) {\n        // PERF: range is not cachable, use key and offset as proxies for cache\n        return this.getMarksAtPosition(start.path, start.offset);\n      }\n\n      var text = this.getDescendant(start.path);\n      var marks = text.marks;\n\n      return marks;\n    }\n\n    /**\n     * Get the bottom-most block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRange',\n    value: function getLeafBlocksAtRange(range) {\n      var array = this.getLeafBlocksAtRangeAsArray(range);\n      // Eliminate duplicates by converting to an `OrderedSet` first.\n      return List(OrderedSet(array));\n    }\n\n    /**\n     * Get the bottom-most descendants in a `range` as an array\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRangeAsArray',\n    value: function getLeafBlocksAtRangeAsArray(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n\n      var _range5 = range,\n          start = _range5.start,\n          end = _range5.end;\n\n\n      return this.getLeafBlocksBetweenPathPositionsAsArray(start.path, end.path);\n    }\n\n    /**\n     * Get the bottom-most descendants between two paths as an array\n     *\n     * @param {List|Null} startPath\n     * @param {List|Null} endPath\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksBetweenPathPositionsAsArray',\n    value: function getLeafBlocksBetweenPathPositionsAsArray(startPath, endPath) {\n      // PERF: the most common case is when the range is in a single block node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getClosestBlock(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getBlocksAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n\n      var array = [];\n\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object !== 'block') {\n          return;\n        } else if (node.isLeafBlock()) {\n          array.push(node);\n        } else {\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n\n          array = array.concat(node.getLeafBlocksBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n\n      return array;\n    }\n\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRange',\n    value: function getLeafInlinesAtRange(range) {\n      var array = this.getLeafInlinesAtRangeAsArray(range);\n      // Remove duplicates by converting it to an `OrderedSet` first.\n      var list = List(OrderedSet(array));\n      return list;\n    }\n\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRangeAsArray',\n    value: function getLeafInlinesAtRangeAsArray(range) {\n      var _this4 = this;\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this4.getClosestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n\n      return array;\n    }\n\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarks',\n    value: function getMarks() {\n      var array = this.getMarksAsArray();\n      return Set(array);\n    }\n\n    /**\n     * Get all of the marks as an array.\n     *\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksAsArray',\n    value: function getMarksAsArray() {\n      var _ref;\n\n      var result = [];\n\n      this.nodes.forEach(function (node) {\n        result.push(node.object === 'text' ? node.marks.toArray() : node.getMarksAsArray());\n      });\n\n      // PERF: use only one concat rather than multiple for speed.\n      var array = (_ref = []).concat.apply(_ref, result);\n      return array;\n    }\n\n    /**\n     * Get a set of marks in a `position`, the equivalent of a collapsed range\n     *\n     * @param {List|string} key\n     * @param {number} offset\n     * @return {Set}\n     */\n\n  }, {\n    key: 'getMarksAtPosition',\n    value: function getMarksAtPosition(path, offset) {\n      path = this.resolvePath(path);\n      var text = this.getDescendant(path);\n      var currentMarks = text.marks;\n\n      if (offset !== 0) {\n        return currentMarks;\n      }\n\n      var closestBlock = this.getClosestBlock(path);\n\n      // insert mark for empty block; the empty block are often created by split node or add marks in a range including empty blocks\n      if (closestBlock.text === '') {\n        return currentMarks;\n      }\n\n      var previous = this.getPreviousTextAndPath(path);\n\n      if (!previous) {\n        return Set();\n      }\n\n      var _previous = slicedToArray(previous, 2),\n          previousText = _previous[0],\n          previousPath = _previous[1];\n\n      if (closestBlock.hasDescendant(previousPath)) {\n        return previousText.marks;\n      }\n\n      return currentMarks;\n    }\n\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksAtRange',\n    value: function getMarksAtRange(range) {\n      var marks = Set(this.getOrderedMarksAtRange(range));\n      return marks;\n    }\n\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksByType',\n    value: function getMarksByType(type) {\n      var array = this.getMarksByTypeAsArray(type);\n      return Set(array);\n    }\n\n    /**\n     * Get all of the marks that match a `type` as an array.\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksByTypeAsArray',\n    value: function getMarksByTypeAsArray(type) {\n      var array = this.nodes.reduce(function (memo, node) {\n        return node.object === 'text' ? memo.concat(node.getMarksAsArray().filter(function (m) {\n          return m.type === type;\n        })) : memo.concat(node.getMarksByTypeAsArray(type));\n      }, []);\n\n      return array;\n    }\n\n    /**\n     * Get the block node after a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextBlock',\n    value: function getNextBlock(path) {\n      path = this.resolvePath(path);\n      var match = this.getNextDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'block';\n      });\n\n      return match ? match[0] : null;\n    }\n\n    /**\n     * Get the next node in the tree from a node.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextNode',\n    value: function getNextNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        var target = PathUtils.increment(p);\n        var node = this.getNode(target);\n        if (node) return node;\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the next node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextMatchingNodeAndPath',\n    value: function getNextMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n\n        var nextPath = PathUtils.increment(p);\n        var nextNode = this.getNode(nextPath);\n\n        while (nextNode && !iterator(nextNode)) {\n          nextPath = PathUtils.increment(nextPath);\n          nextNode = this.getNode(nextPath);\n        }\n\n        if (nextNode) return [nextNode, nextPath];\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the next, deepest node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextDeepMatchingNodeAndPath',\n    value: function getNextDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      var match = this.getNextMatchingNodeAndPath(path);\n\n      if (!match) return null;\n\n      var _match = slicedToArray(match, 2),\n          nextNode = _match[0],\n          nextPath = _match[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = nextNode.object !== 'text' && nextNode.findFirstDescendantAndPath(iterator, nextPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch = childMatch;\n\n        var _childMatch2 = slicedToArray(_childMatch, 2);\n\n        nextNode = _childMatch2[0];\n        nextPath = _childMatch2[1];\n      }\n\n      if (!nextNode) return null;\n\n      return iterator(nextNode) ? [nextNode, nextPath] : this.getNextDeepMatchingNodeAndPath(match[1], iterator);\n    }\n\n    /**\n     * Get the next sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextSibling',\n    value: function getNextSibling(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var p = PathUtils.increment(path);\n      var sibling = this.getNode(p);\n      return sibling;\n    }\n\n    /**\n     * Get the text node after a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextText',\n    value: function getNextText(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var next = this.getNextNode(path);\n      if (!next) return null;\n      var text = next.getFirstText();\n      return text;\n    }\n  }, {\n    key: 'getNextTextAndPath',\n    value: function getNextTextAndPath(path) {\n      if (!path) return null;\n      if (!path.size) return null;\n      var match = this.getNextDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'text';\n      });\n      return match;\n    }\n\n    /**\n     * Get all of the nodes in a `range`. This includes all of the\n     * text nodes inside the range and all ancestors of those text\n     * nodes up to this node.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getNodesAtRange',\n    value: function getNodesAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var _range6 = range,\n          start = _range6.start,\n          end = _range6.end;\n\n      // Do a depth-first stack-based search for all nodes in the range\n      // Nodes that are pushed to the stack are inside the range\n\n      // Start with the nodes that are on the highest level in the tree\n\n      var stack = Stack(this.nodes.slice(start.path.get(0), end.path.get(0) + 1).map(function (node, index) {\n        return {\n          node: node,\n          onStartEdge: index === 0,\n          onEndEdge: index === end.path.get(0) - start.path.get(0),\n          relativeStartPath: start.path.slice(1),\n          relativeEndPath: end.path.slice(1)\n        };\n      }));\n\n      var result = [];\n\n      var _loop = function _loop() {\n        var _stack$peek = stack.peek(),\n            node = _stack$peek.node,\n            onStartEdge = _stack$peek.onStartEdge,\n            onEndEdge = _stack$peek.onEndEdge,\n            relativeStartPath = _stack$peek.relativeStartPath,\n            relativeEndPath = _stack$peek.relativeEndPath;\n\n        stack = stack.shift();\n        result.push(node);\n\n        if (node.object === 'text') return 'continue';\n\n        // Modify indexes to exclude children that are outside of the range\n        var startIndex = onStartEdge ? relativeStartPath.get(0) : 0;\n        var endIndex = onEndEdge ? relativeEndPath.get(0) : node.nodes.size - 1;\n\n        // Push children that are inside the range to the stack\n        stack = stack.pushAll(node.nodes.slice(startIndex, endIndex + 1).map(function (n, i) {\n          return {\n            node: n,\n            onStartEdge: onStartEdge && i === 0,\n            onEndEdge: onEndEdge && i === endIndex - startIndex,\n            relativeStartPath: onStartEdge && i === 0 ? relativeStartPath.slice(1) : null,\n            relativeEndPath: onEndEdge && i === endIndex - startIndex ? relativeEndPath.slice(1) : null\n          };\n        }));\n      };\n\n      while (stack.size > 0) {\n        var _ret = _loop();\n\n        if (_ret === 'continue') continue;\n      }\n\n      return List(result);\n    }\n\n    /**\n     * Get the offset for a descendant text node by `path` or `key`.\n     *\n     * @param {List|string} path\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffset',\n    value: function getOffset(path) {\n      path = this.resolvePath(path);\n      this.assertDescendant(path);\n\n      // Calculate the offset of the nodes before the highest child.\n      var index = path.first();\n\n      var offset = this.nodes.slice(0, index).reduce(function (memo, n) {\n        return memo + n.text.length;\n      }, 0);\n\n      // Recurse if need be.\n      var ret = path.size === 1 ? offset : offset + this.nodes.get(index).getOffset(PathUtils.drop(path));\n      return ret;\n    }\n\n    /**\n     * Get the offset from a `range`.\n     *\n     * @param {Range} range\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffsetAtRange',\n    value: function getOffsetAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        throw new Error('The range cannot be unset to calculcate its offset.');\n      }\n\n      if (range.isExpanded) {\n        throw new Error('The range must be collapsed to calculcate its offset.');\n      }\n\n      var _range7 = range,\n          start = _range7.start;\n\n      var offset = this.getOffset(start.path) + start.offset;\n      return offset;\n    }\n\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarks',\n    value: function getOrderedMarks() {\n      var array = this.getMarksAsArray();\n      return OrderedSet(array);\n    }\n\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksAtRange',\n    value: function getOrderedMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range8 = range,\n          start = _range8.start,\n          end = _range8.end;\n\n\n      if (range.isUnset) {\n        return OrderedSet();\n      }\n\n      if (range.isCollapsed) {\n        // PERF: range is not cachable, use path? and offset as proxies for cache\n        return this.getMarksAtPosition(start.path, start.offset);\n      }\n\n      var marks = this.getOrderedMarksBetweenPositions(start.path, start.offset, end.path, end.offset);\n\n      return marks;\n    }\n\n    /**\n     * Get a set of the marks in a `range`.\n     * PERF: arguments use key and offset for utilizing cache\n     *\n     * @param {List|string} startPath\n     * @param {number} startOffset\n     * @param {List|string} endPath\n     * @param {number} endOffset\n     * @returns {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksBetweenPositions',\n    value: function getOrderedMarksBetweenPositions(startPath, startOffset, endPath, endOffset) {\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n      var startText = this.getDescendant(startPath);\n\n      // PERF: if the paths are equal, we can just use the start.\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.marks;\n      }\n\n      var texts = this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n\n      return OrderedSet().withMutations(function (result) {\n        texts.forEach(function (text) {\n          result.union(text.marks);\n        });\n      });\n    }\n\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksByType',\n    value: function getOrderedMarksByType(type) {\n      var array = this.getMarksByTypeAsArray(type);\n      return OrderedSet(array);\n    }\n\n    /**\n     * Get the parent of a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getParent',\n    value: function getParent(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var parentPath = PathUtils.lift(path);\n      var parent = this.getNode(parentPath);\n      return parent;\n    }\n\n    /**\n     * Get the block node before a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousBlock',\n    value: function getPreviousBlock(path) {\n      path = this.resolvePath(path);\n      var match = this.getPreviousDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'block';\n      });\n\n      return match ? match[0] : null;\n    }\n\n    /**\n     * Get the highest block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getRootBlocksAtRange',\n    value: function getRootBlocksAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n\n      var _range9 = range,\n          start = _range9.start,\n          end = _range9.end;\n\n\n      return this.nodes.slice(start.path.first(), end.path.first() + 1);\n    }\n\n    /**\n     * Get the top-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRange',\n    value: function getRootInlinesAtRange(range) {\n      var array = this.getRootInlinesAtRangeAsArray(range);\n      // Remove duplicates by converting it to an `OrderedSet` first.\n      var list = List(OrderedSet(array));\n      return list;\n    }\n\n    /**\n     * Get the top-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRangeAsArray',\n    value: function getRootInlinesAtRangeAsArray(range) {\n      var _this5 = this;\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this5.getFurthestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n\n      return array;\n    }\n\n    /**\n     * Get the previous node from a node in the tree.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousNode',\n    value: function getPreviousNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n\n        var target = PathUtils.decrement(p);\n        var node = this.getNode(target);\n        if (node) return node;\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the previous node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousMatchingNodeAndPath',\n    value: function getPreviousMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n\n        var previousPath = PathUtils.decrement(p);\n        var previousNode = this.getNode(previousPath);\n\n        while (previousNode && !iterator(previousNode)) {\n          previousPath = PathUtils.decrement(previousPath);\n          previousNode = this.getNode(previousPath);\n        }\n\n        if (previousNode) return [previousNode, previousPath];\n      }\n\n      return null;\n    }\n\n    /**\n     * Get the next previous in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     * Once a node is found, the last deepest child matching is returned\n     *\n     * @param {List} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousDeepMatchingNodeAndPath',\n    value: function getPreviousDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n\n      var match = this.getPreviousMatchingNodeAndPath(path);\n\n      if (!match) return null;\n\n      var _match2 = slicedToArray(match, 2),\n          previousNode = _match2[0],\n          previousPath = _match2[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = previousNode.object !== 'text' && previousNode.findLastDescendantAndPath(iterator, previousPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch3 = childMatch;\n\n        var _childMatch4 = slicedToArray(_childMatch3, 2);\n\n        previousNode = _childMatch4[0];\n        previousPath = _childMatch4[1];\n      }\n\n      if (!previousNode) return null;\n\n      return iterator(previousNode) ? [previousNode, previousPath] : this.getPreviousDeepMatchingNodeAndPath(match[1], iterator);\n    }\n\n    /**\n     * Get the previous sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousSibling',\n    value: function getPreviousSibling(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      if (path.last() === 0) return null;\n      var p = PathUtils.decrement(path);\n      var sibling = this.getNode(p);\n      return sibling;\n    }\n\n    /**\n     * Get the text node before a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousText',\n    value: function getPreviousText(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var previous = this.getPreviousNode(path);\n      if (!previous) return null;\n      var match = previous.getLastText();\n      return match;\n    }\n  }, {\n    key: 'getPreviousTextAndPath',\n    value: function getPreviousTextAndPath(path) {\n      if (!path) return null;\n      if (!path.size) return null;\n      var match = this.getPreviousDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'text';\n      });\n      return match;\n    }\n\n    /**\n     * Get the indexes of the selection for a `range`, given an extra flag for\n     * whether the node `isSelected`, to determine whether not finding matches\n     * means everything is selected or nothing is.\n     *\n     * @param {Range} range\n     * @param {Boolean} isSelected\n     * @return {Object|Null}\n     */\n\n  }, {\n    key: 'getSelectionIndexes',\n    value: function getSelectionIndexes(range) {\n      var isSelected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var start = range.start,\n          end = range.end;\n\n      // PERF: if we're not selected, we can exit early.\n\n      if (!isSelected) {\n        return null;\n      }\n\n      // if we've been given an invalid selection we can exit early.\n      if (range.isUnset) {\n        return null;\n      }\n\n      // PERF: if the start and end keys are the same, just check for the child\n      // that contains that single key.\n      if (start.key === end.key) {\n        var child = this.getFurthestAncestor(start.key);\n        var index = child ? this.nodes.indexOf(child) : null;\n        return { start: index, end: index + 1 };\n      }\n\n      // Otherwise, check all of the children...\n      var startIndex = null;\n      var endIndex = null;\n\n      this.nodes.forEach(function (child, i) {\n        if (child.object === 'text') {\n          if (startIndex == null && child.key === start.key) startIndex = i;\n          if (endIndex == null && child.key === end.key) endIndex = i + 1;\n        } else {\n          if (startIndex == null && child.hasDescendant(start.key)) startIndex = i;\n          if (endIndex == null && child.hasDescendant(end.key)) endIndex = i + 1;\n        }\n\n        // PERF: exit early if both start and end have been found.\n        return startIndex == null || endIndex == null;\n      });\n\n      if (isSelected && startIndex == null) startIndex = 0;\n      if (isSelected && endIndex == null) endIndex = this.nodes.size;\n      return startIndex == null ? null : { start: startIndex, end: endIndex };\n    }\n\n    /**\n     * Get the descendent text node at an `offset`.\n     *\n     * @param {String} offset\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getTextAtOffset',\n    value: function getTextAtOffset(offset) {\n      // PERF: Add a few shortcuts for the obvious cases.\n      if (offset === 0) return this.getFirstText();\n      if (offset === this.text.length) return this.getLastText();\n      if (offset < 0 || offset > this.text.length) return null;\n\n      var length = 0;\n      var text = this.getTexts().find(function (node, i, nodes) {\n        length += node.text.length;\n        return length > offset;\n      });\n\n      return text;\n    }\n\n    /**\n     * Get the direction of the node's text.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getTextDirection',\n    value: function getTextDirection() {\n      var dir = direction(this.text);\n      return dir === 'neutral' ? null : dir;\n    }\n\n    /**\n     * Recursively get all of the child text nodes in order of appearance.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTexts',\n    value: function getTexts() {\n      var array = this.getTextsAsArray();\n      return List(array);\n    }\n\n    /**\n     * Recursively get all the leaf text nodes in order of appearance, as array.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAsArray',\n    value: function getTextsAsArray() {\n      var array = [];\n\n      this.nodes.forEach(function (node) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          array = array.concat(node.getTextsAsArray());\n        }\n      });\n\n      return array;\n    }\n\n    /**\n     * Get all of the text nodes in a `range` as a List.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRange',\n    value: function getTextsAtRange(range) {\n      var arr = this.getTextsAtRangeAsArray(range);\n      return List(arr);\n    }\n\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRangeAsArray',\n    value: function getTextsAtRangeAsArray(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var _range10 = range,\n          start = _range10.start,\n          end = _range10.end;\n\n      var texts = this.getTextsBetweenPathPositionsAsArray(start.path, end.path);\n      return texts;\n    }\n\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     * PERF: use key / path in arguments for cache\n     *\n     * @param {List|string} startPath\n     * @param {List|string} endPath\n     * @returns {Array}\n     */\n\n  }, {\n    key: 'getTextsBetweenPositionsAsArray',\n    value: function getTextsBetweenPositionsAsArray(startPath, endPath) {\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n\n      return this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n    }\n\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     *\n     * @param {List|falsey} startPath\n     * @param {List|falsey} endPath\n     * @returns {Array}\n     */\n\n  }, {\n    key: 'getTextsBetweenPathPositionsAsArray',\n    value: function getTextsBetweenPathPositionsAsArray(startPath, endPath) {\n      // PERF: the most common case is when the range is in a single text node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getDescendant(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getTextsAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n\n      var array = [];\n\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          // For the node at start and end of this list, we want to provide a start and end path\n          // For other nodes, we can just get all their text nodes, they are between the paths\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n\n          array = array.concat(node.getTextsBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n\n      return array;\n    }\n\n    /**\n     * Check if the node has block children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasBlockChildren',\n    value: function hasBlockChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'block';\n      }));\n    }\n\n    /**\n     * Check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasChild',\n    value: function hasChild(path) {\n      var child = this.getChild(path);\n      return !!child;\n    }\n\n    /**\n     * Check if a node has inline children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasInlineChildren',\n    value: function hasInlineChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'inline' || n.object === 'text';\n      }));\n    }\n\n    /**\n     * Recursively check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasDescendant',\n    value: function hasDescendant(path) {\n      var descendant = this.getDescendant(path);\n      return !!descendant;\n    }\n\n    /**\n     * Check if a node has a void parent.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasVoidParent',\n    value: function hasVoidParent(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.');\n\n      var closest = this.getClosestVoid(path, editor);\n      return !!closest;\n    }\n\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      path = this.resolvePath(path);\n      var index = path.last();\n      var parentPath = PathUtils.lift(path);\n      var parent = this.assertNode(parentPath);\n      var nodes = parent.nodes.splice(index, 0, node);\n      parent = parent.set('nodes', nodes);\n      var ret = this.replaceNode(parentPath, parent);\n      return ret;\n    }\n\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.insertText(offset, text);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Check whether the node is a leaf block.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafBlock',\n    value: function isLeafBlock() {\n      var object = this.object,\n          nodes = this.nodes;\n\n      if (object !== 'block') return false;\n      if (!nodes.size) return true;\n\n      return nodes.first().object !== 'block';\n    }\n\n    /**\n     * Check whether the node is a leaf inline.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafInline',\n    value: function isLeafInline() {\n      var object = this.object,\n          nodes = this.nodes;\n\n      if (object !== 'inline') return false;\n      if (!nodes.size) return true;\n\n      return nodes.first().object !== 'inline';\n    }\n\n    /**\n     * Check whether a descendant node is inside a range. This will return true for all\n     * text nodes inside the range and all ancestors of those text nodes up to this node.\n     *\n     * @param {List|string} path\n     * @param {Range} range\n     * @return {Node}\n     */\n\n  }, {\n    key: 'isNodeInRange',\n    value: function isNodeInRange(path, range) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      range = this.resolveRange(range);\n      if (range.isUnset) return false;\n\n      var toStart = PathUtils.compare(path, range.start.path);\n      var toEnd = range.start.key === range.end.key ? toStart : PathUtils.compare(path, range.end.path);\n\n      var is$$1 = toStart !== -1 && toEnd !== 1;\n      return is$$1;\n    }\n\n    /**\n     * Map all child nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} iterator\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapChildren',\n    value: function mapChildren(iterator) {\n      var _this6 = this;\n\n      var nodes = this.nodes;\n\n\n      nodes.forEach(function (node, i) {\n        var ret = iterator(node, i, _this6.nodes);\n        if (ret !== node) nodes = nodes.set(ret.key, ret);\n      });\n\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n\n    /**\n     * Map all descendant nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} iterator\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapDescendants',\n    value: function mapDescendants(iterator) {\n      var _this7 = this;\n\n      var nodes = this.nodes;\n\n\n      nodes.forEach(function (node, index) {\n        var ret = node;\n        if (ret.object !== 'text') ret = ret.mapDescendants(iterator);\n        ret = iterator(ret, index, _this7.nodes);\n        if (ret === node) return;\n\n        nodes = nodes.set(index, ret);\n      });\n\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var b = this.assertNode(path);\n      path = this.resolvePath(path);\n\n      if (path.last() === 0) {\n        throw new Error('Unable to merge node because it has no previous sibling: ' + b);\n      }\n\n      var withPath = PathUtils.decrement(path);\n      var a = this.assertNode(withPath);\n\n      if (a.object !== b.object) {\n        throw new Error('Unable to merge two different kinds of nodes: ' + a + ' and ' + b);\n      }\n\n      var newNode = a.object === 'text' ? a.mergeText(b) : a.set('nodes', a.nodes.concat(b.nodes));\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.removeNode(withPath);\n      ret = ret.insertNode(withPath, newNode);\n      return ret;\n    }\n\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Node}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      var node = this.assertNode(path);\n      path = this.resolvePath(path);\n      newPath = this.resolvePath(newPath, newIndex);\n\n      var newParentPath = PathUtils.lift(newPath);\n      this.assertNode(newParentPath);\n\n      // TODO: this is a bit hacky, re-creating the operation that led to this method being called\n      // Alternative 1: pass the operation through from apply -> value.moveNode\n      // Alternative 2: add a third property to the operation called \"transformedNewPath\", pass that through\n      var op = Operation.create({\n        type: 'move_node',\n        path: path,\n        newPath: newPath\n      });\n      newPath = PathUtils.transform(path, op).first();\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(newPath, node);\n      return ret;\n    }\n\n    /**\n     * Remove `mark` from text at `path`.\n     *\n     * @param {List} path\n     * @param {Mark} mark\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, mark) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.removeMark(mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Remove a node.\n     *\n     * @param {List|String} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.deleteIn(deep);\n      return ret;\n    }\n\n    /**\n     * Remove `text` at `offset` in node.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var node = this.assertDescendant(path);\n      node = node.removeText(offset, text.length);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Replace a `node` in the tree.\n     *\n     * @param {List|Key} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'replaceNode',\n    value: function replaceNode(path, node) {\n      path = this.resolvePath(path);\n\n      if (!path) {\n        throw new Error('Unable to replace a node because it could not be found in the first place: ' + path);\n      }\n\n      if (!path.size) return node;\n      this.assertNode(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.setIn(deep, node);\n      return ret;\n    }\n\n    /**\n     * Resolve a `decoration`, relative to the node, ensuring that the keys and\n     * offsets in the decoration exist and that they are synced with the paths.\n     *\n     * @param {Decoration|Object} decoration\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'resolveDecoration',\n    value: function resolveDecoration(decoration) {\n      decoration = Decoration.create(decoration);\n      decoration = decoration.normalize(this);\n      return decoration;\n    }\n\n    /**\n     * Resolve a `point`, relative to the node, ensuring that the keys and\n     * offsets in the point exist and that they are synced with the paths.\n     *\n     * @param {Point|Object} point\n     * @return {Point}\n     */\n\n  }, {\n    key: 'resolvePoint',\n    value: function resolvePoint(point) {\n      point = Point.create(point);\n      point = point.normalize(this);\n      return point;\n    }\n\n    /**\n     * Resolve a `range`, relative to the node, ensuring that the keys and\n     * offsets in the range exist and that they are synced with the paths.\n     *\n     * @param {Range|Object} range\n     * @return {Range}\n     */\n\n  }, {\n    key: 'resolveRange',\n    value: function resolveRange(range) {\n      range = Range.create(range);\n      range = range.normalize(this);\n      return range;\n    }\n\n    /**\n     * Resolve a `selection`, relative to the node, ensuring that the keys and\n     * offsets in the selection exist and that they are synced with the paths.\n     *\n     * @param {Selection|Object} selection\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'resolveSelection',\n    value: function resolveSelection(selection) {\n      selection = Selection.create(selection);\n      selection = selection.normalize(this);\n      return selection;\n    }\n\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var node = this.assertNode(path);\n      node = node.merge(properties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, properties, newProperties) {\n      path = this.resolvePath(path);\n      var node = this.assertDescendant(path);\n      node = node.setMark(properties, newProperties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var child = this.assertNode(path);\n      path = this.resolvePath(path);\n      var a = void 0;\n      var b = void 0;\n\n      if (child.object === 'text') {\n        \n        var _child$splitText = child.splitText(position);\n\n        var _child$splitText2 = slicedToArray(_child$splitText, 2);\n\n        a = _child$splitText2[0];\n        b = _child$splitText2[1];\n      } else {\n        var befores = child.nodes.take(position);\n        var afters = child.nodes.skip(position);\n        a = child.set('nodes', befores);\n        b = child.set('nodes', afters).regenerateKey();\n      }\n\n      if (properties && child.object !== 'text') {\n        b = b.merge(properties);\n      }\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(path, b);\n      ret = ret.insertNode(path, a);\n      return ret;\n    }\n  }, {\n    key: 'text',\n\n    /**\n     * Get the concatenated text of the node.\n     *\n     * @return {String}\n     */\n\n    get: function get$$1() {\n      return this.getText();\n    }\n  }]);\n  return ElementInterface;\n}();\n\n/**\n * Mix in assertion variants.\n */\n\nvar ASSERTS = ['Child', 'Depth', 'Descendant', 'Node', 'Parent', 'Path'];\n\nvar _loop2 = function _loop2(method) {\n  ElementInterface.prototype['assert' + method] = function (path) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    var ret = this['get' + method].apply(this, [path].concat(args));\n\n    if (ret == null) {\n      throw new Error('`Node.assert' + method + '` could not find node with path or key: ' + path);\n    }\n\n    return ret;\n  };\n};\n\nvar _iteratorNormalCompletion$1 = true;\nvar _didIteratorError$1 = false;\nvar _iteratorError$1 = undefined;\n\ntry {\n  for (var _iterator$1 = ASSERTS[Symbol.iterator](), _step$1; !(_iteratorNormalCompletion$1 = (_step$1 = _iterator$1.next()).done); _iteratorNormalCompletion$1 = true) {\n    var method$1 = _step$1.value;\n\n    _loop2(method$1);\n  }\n\n  /**\n   * Memoize read methods.\n   */\n} catch (err) {\n  _didIteratorError$1 = true;\n  _iteratorError$1 = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion$1 && _iterator$1.return) {\n      _iterator$1.return();\n    }\n  } finally {\n    if (_didIteratorError$1) {\n      throw _iteratorError$1;\n    }\n  }\n}\n\nmemoize(ElementInterface.prototype, ['getBlocksAsArray', 'getLeafBlocksAtRangeAsArray', 'getBlocksByTypeAsArray', 'getDecorations', 'getFragmentAtRange', 'getInlinesAsArray', 'getInlinesByTypeAsArray', 'getLeafBlocksAtRangeAsArray', 'getLeafInlinesAtRangeAsArray', 'getMarksAsArray', 'getMarksAtPosition', 'getNodesAtRange', 'getOrderedMarksBetweenPositions', 'getInsertMarksAtRange', 'getMarksByTypeAsArray', 'getNextBlock', 'getOffset', 'getOffsetAtRange', 'getPreviousBlock', 'getRootBlocksAtRange', 'getRootInlinesAtRangeAsArray', 'getTextAtOffset', 'getTextDirection', 'getTextsAsArray', 'getTextsBetweenPathPositionsAsArray']);\n\n/**\n * Mix in the element interface.\n */\n\nmixin(ElementInterface, [Block, Document, Inline]);\n\n/**\n * The interface that `Decoration`, `Range` and `Selection` all implement, to make\n * working anchor and focus points easier.\n *\n * @type {Class}\n */\n\nvar RangeInterface = function () {\n  function RangeInterface() {\n    classCallCheck(this, RangeInterface);\n  }\n\n  createClass(RangeInterface, [{\n    key: 'flip',\n\n\n    /**\n     * Flip the range.\n     *\n     * @return {Range}\n     */\n\n    value: function flip() {\n      var range = this.setPoints([this.focus, this.anchor]);\n      return range;\n    }\n\n    /**\n     * Move the anchor and focus offsets forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveForward(n);\n      });\n    }\n\n    /**\n     * Move the anchor and focus offsets backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveBackward(n);\n      });\n    }\n\n    /**\n     * Move the anchor offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorBackward',\n    value: function moveAnchorBackward(n) {\n      var range = this.setAnchor(this.anchor.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the anchor offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorForward',\n    value: function moveAnchorForward(n) {\n      var range = this.setAnchor(this.anchor.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorTo',\n    value: function moveAnchorTo(path, offset) {\n      var range = this.setAnchor(this.anchor.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToStartOfNode',\n    value: function moveAnchorToStartOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToEndOfNode',\n    value: function moveAnchorToEndOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the end offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndBackward',\n    value: function moveEndBackward(n) {\n      var range = this.setEnd(this.end.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the end offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndForward',\n    value: function moveEndForward(n) {\n      var range = this.setEnd(this.end.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's end point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndTo',\n    value: function moveEndTo(path, offset) {\n      var range = this.setEnd(this.end.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's end point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToStartOfNode',\n    value: function moveEndToStartOfNode(node) {\n      var range = this.setEnd(this.end.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's end point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToEndOfNode',\n    value: function moveEndToEndOfNode(node) {\n      var range = this.setEnd(this.end.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the focus offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusBackward',\n    value: function moveFocusBackward(n) {\n      var range = this.setFocus(this.focus.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the focus offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusForward',\n    value: function moveFocusForward(n) {\n      var range = this.setFocus(this.focus.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's focus point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusTo',\n    value: function moveFocusTo(path, offset) {\n      var range = this.setFocus(this.focus.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's focus point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToStartOfNode',\n    value: function moveFocusToStartOfNode(node) {\n      var range = this.setFocus(this.focus.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's focus point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToEndOfNode',\n    value: function moveFocusToEndOfNode(node) {\n      var range = this.setFocus(this.focus.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the start offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartBackward',\n    value: function moveStartBackward(n) {\n      var range = this.setStart(this.start.moveBackward(n));\n      return range;\n    }\n\n    /**\n     * Move the start offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartForward',\n    value: function moveStartForward(n) {\n      var range = this.setStart(this.start.moveForward(n));\n      return range;\n    }\n\n    /**\n     * Move the range's start point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartTo',\n    value: function moveStartTo(path, offset) {\n      var range = this.setStart(this.start.moveTo(path, offset));\n      return range;\n    }\n\n    /**\n     * Move the range's start point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToStartOfNode',\n    value: function moveStartToStartOfNode(node) {\n      var range = this.setStart(this.start.moveToStartOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move the range's start point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToEndOfNode',\n    value: function moveStartToEndOfNode(node) {\n      var range = this.setStart(this.start.moveToEndOfNode(node));\n      return range;\n    }\n\n    /**\n     * Move range's points to a new `path` and `offset`.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path, offset) {\n      return this.updatePoints(function (point) {\n        return point.moveTo(path, offset);\n      });\n    }\n\n    /**\n     * Move the focus point to the anchor point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToAnchor',\n    value: function moveToAnchor() {\n      var range = this.setFocus(this.anchor);\n      return range;\n    }\n\n    /**\n     * Move the start point to the end point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEnd',\n    value: function moveToEnd() {\n      var range = this.setStart(this.end);\n      return range;\n    }\n\n    /**\n     * Move the range's points to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToEndOfNode(node);\n      });\n    }\n\n    /**\n     * Move the anchor point to the focus point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToFocus',\n    value: function moveToFocus() {\n      var range = this.setAnchor(this.focus);\n      return range;\n    }\n\n    /**\n     * Move to the entire range of `start` and `end` nodes.\n     *\n     * @param {Node} start\n     * @param {Node} end (optional)\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToRangeOfNode',\n    value: function moveToRangeOfNode(start) {\n      var end = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : start;\n\n      var range = this.setPoints([this.anchor.moveToStartOfNode(start), this.focus.moveToEndOfNode(end)]);\n\n      return range;\n    }\n\n    /**\n     * Move the end point to the start point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStart',\n    value: function moveToStart() {\n      var range = this.setEnd(this.start);\n      return range;\n    }\n\n    /**\n     * Move the range's points to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToStartOfNode(node);\n      });\n    }\n\n    /**\n     * Normalize the range, relative to a `node`, ensuring that the anchor\n     * and focus nodes of the range always refer to leaf text nodes.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      return this.updatePoints(function (point) {\n        return point.normalize(node);\n      });\n    }\n\n    /**\n     * Set the anchor point to a new `anchor`.\n     *\n     * @param {Point} anchor\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setAnchor',\n    value: function setAnchor(anchor) {\n      var range = this.set('anchor', anchor);\n      return range;\n    }\n\n    /**\n     * Set the end point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setEnd',\n    value: function setEnd(point) {\n      var range = this.isBackward ? this.setAnchor(point) : this.setFocus(point);\n      return range;\n    }\n\n    /**\n     * Set the focus point to a new `focus`.\n     *\n     * @param {Point} focus\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setFocus',\n    value: function setFocus(focus) {\n      var range = this.set('focus', focus);\n      return range;\n    }\n\n    /**\n     * Set the anchor and focus points to new `values`.\n     *\n     * @param {Array<Point>} values\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setPoints',\n    value: function setPoints(values) {\n      var _values = slicedToArray(values, 2),\n          anchor = _values[0],\n          focus = _values[1];\n\n      var range = this.set('anchor', anchor).set('focus', focus);\n      return range;\n    }\n\n    /**\n     * Set the anchor and focus points with `updater` callback\n     *\n     * @param {Function} updater\n     * @return {Range}\n     */\n\n  }, {\n    key: 'updatePoints',\n    value: function updatePoints(updater) {\n      var anchor = this.anchor,\n          focus = this.focus;\n\n      anchor = updater(anchor);\n      focus = updater(focus);\n      return this.merge({ anchor: anchor, focus: focus });\n    }\n\n    /**\n     * Set the start point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setStart',\n    value: function setStart(point) {\n      var range = this.isBackward ? this.setFocus(point) : this.setAnchor(point);\n      return range;\n    }\n\n    /**\n     * Set new `properties` on the range.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Range.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var range = this.merge(props);\n      return range;\n    }\n\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n\n      return object;\n    }\n\n    /**\n     * Return a `Range` instance from any range-like instance.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'toRange',\n    value: function toRange() {\n      var properties = Range.createProperties(this);\n      var range = Range.create(properties);\n      return range;\n    }\n\n    /**\n     * Unset the range.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      var range = this.updatePoints(function (p) {\n        return p.unset();\n      });\n      return range;\n    }\n  }, {\n    key: 'isCollapsed',\n\n    /**\n     * Check whether the range is collapsed.\n     *\n     * @return {Boolean}\n     */\n\n    get: function get$$1() {\n      return this.anchor === this.focus || this.anchor.key === this.focus.key && this.anchor.offset === this.focus.offset;\n    }\n\n    /**\n     * Check whether the range is expanded.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isExpanded',\n    get: function get$$1() {\n      return !this.isCollapsed;\n    }\n\n    /**\n     * Check whether the range is backward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBackward',\n    get: function get$$1() {\n      var isUnset = this.isUnset,\n          anchor = this.anchor,\n          focus = this.focus;\n\n\n      if (isUnset) {\n        return null;\n      }\n\n      if (anchor.key === focus.key) {\n        return anchor.offset > focus.offset;\n      }\n\n      var isBackward = PathUtils.isBefore(focus.path, anchor.path);\n      return isBackward;\n    }\n\n    /**\n     * Check whether the range is forward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isForward',\n    get: function get$$1() {\n      var isBackward = this.isBackward;\n\n      var isForward = isBackward == null ? null : !isBackward;\n      return isForward;\n    }\n\n    /**\n     * Check whether the range isn't set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      var anchor = this.anchor,\n          focus = this.focus;\n\n      var isUnset = anchor.isUnset || focus.isUnset;\n      return isUnset;\n    }\n\n    /**\n     * Check whether the range is set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isSet',\n    get: function get$$1() {\n      return !this.isUnset;\n    }\n\n    /**\n     * Get the start point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'start',\n    get: function get$$1() {\n      return this.isBackward ? this.focus : this.anchor;\n    }\n\n    /**\n     * Get the end point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'end',\n    get: function get$$1() {\n      return this.isBackward ? this.anchor : this.focus;\n    }\n  }]);\n  return RangeInterface;\n}();\n\n/**\n * Mix in the range interface.\n *\n * @param {Record}\n */\n\nmixin(RangeInterface, [Decoration, Range, Selection]);\n\nvar index = {\n  Block: Block,\n  Change: Change,\n  Data: Data,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  KeyUtils: KeyUtils,\n  Leaf: Leaf,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  PathUtils: PathUtils,\n  Point: Point,\n  Range: Range,\n  resetMemoization: resetMemoization,\n  Selection: Selection,\n  Text: Text,\n  TextUtils: TextUtils,\n  useMemoization: useMemoization,\n  Value: Value\n};\n\nexport default index;\nexport { Block, Change, Data, Decoration, Document, Editor, Inline, KeyUtils, Leaf, Mark, Node, Operation, PathUtils, Point, Range, resetMemoization, Selection, Text, TextUtils, useMemoization, Value };\n//# sourceMappingURL=slate.es.js.map\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n","\"use strict\";\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n"],"sourceRoot":""}