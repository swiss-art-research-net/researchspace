(window.webpackJsonp=window.webpackJsonp||[]).push([[374],{1452:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),s=r(1),o=r(1),i=r(10),u=r(34),a=r(214),l=r(1221),c=function(e){function RecentQueries(){var t=null!==e&&e.apply(this,arguments)||this;return t.cancellation=new u.Cancellation,t.addRecentQueries=function(e,r){var n=a.BrowserPersistence.getItem("recentQueries"),s={query:e,date:i().format("MM/DD/YY, HH:mm"),repository:r};if(n){var o=n.toArray(),u=o[0];u.get("query")!==e||u.get("repository")!==r?o.unshift(s):o.splice(0,1,s),o.length>30&&o.pop(),a.BrowserPersistence.setItem("recentQueries",o)}else a.BrowserPersistence.setItem("recentQueries",[s]);t.forceUpdate()},t}return n.__extends(RecentQueries,e),RecentQueries.prototype.render=function(){var e=this,t=a.BrowserPersistence.getItem("recentQueries");return t?s.createElement("div",{className:"list-group",style:{marginBottom:0}},t.map((function(t,r){return s.createElement("a",{key:r,href:"",className:"list-group-item",title:t.get("query"),onClick:function(r){r.preventDefault();var n=e.context.queryEditorContext,s=t.get("query"),o=t.get("repository");e.lastQuery={query:s,repository:o},n.setQuery(s,{repository:o})}},s.createElement("span",{className:"list-group-item-label"},t.get("date")),t.get("repository")?s.createElement("span",{className:"list-group-item-label"},t.get("repository")):null,s.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.get("query")))}))):s.createElement("span",null,"no queries")},RecentQueries.prototype.componentDidMount=function(){var e=this,t=this.context.queryEditorContext;this.cancellation.map(t.queryChanges).onValue((function(t){var r=t.query,n=t.repository;!r.isJust||e.lastQuery&&r.get()===e.lastQuery.query&&n.getOrElse(void 0)===e.lastQuery.repository||e.addRecentQueries(r.get(),n.getOrElse(void 0))}))},RecentQueries.contextTypes=l.ContextTypes,RecentQueries}(o.Component);t.RecentQueries=c,t.default=c}}]);
//# sourceMappingURL=mp-recent-queries-31d7b0387ef64151664f.js.map