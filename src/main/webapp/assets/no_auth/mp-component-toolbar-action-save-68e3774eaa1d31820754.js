(window.webpackJsonp=window.webpackJsonp||[]).push([[343],{1438:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(11),a=o(1),i=o(35),s=o(72),r=o(19),c=o(56),l=o(162),d=o(658),p=o(23),u=o(218),h=o(637),v=o(118),f=o(1210),C=o(639),m=o(214),S=o(220),g=a.createFactory(s.Button),w=a.createFactory(s.Modal),y=a.createFactory(s.ModalHeader),b=a.createFactory(s.ModalFooter),k=a.createFactory(s.ModalBody),A=a.createFactory(s.FormControl),M=a.createFactory(S.ResourceLinkComponent),R=function(e){function ActionSaveComponent(t,o){var n=e.call(this,t,o)||this;return n.onClick=function(){n.setState({show:"editor"})},n.onSave=function(){n.setState({show:"saving"});var e=d.componentToGraph({component:n.props.component,componentRoot:p.Rdf.iri(""),parentTemplateScope:n.appliedTemplateScope,semanticContext:n.context.semanticContext}),t=n.state,o=function addLabelAndDescription(e,t,o){var n=e.pointer,a=e.graph.triples;t&&(a=a.add(p.Rdf.triple(n,u.rdfs.label,p.Rdf.literal(t))));o&&(a=a.add(p.Rdf.triple(n,u.rdfs.comment,p.Rdf.literal(o))));return p.Rdf.pg(n,p.Rdf.graph(a))}(e,t.label,t.description).graph;v.ldpc(u.VocabPlatform.PersistedComponentContainer.value).addResource(o).flatMap((function(e){return n.props.addToDefaultSet?f.addToDefaultSet(e,n.props.id):r.constant(e)})).onValue((function(e){l.trigger({eventType:h.SetManagementEvents.ItemAdded,source:n.props.id}),n.setState({show:"success",savedIri:e.value})}))},n.onCancel=function(){n.setState({show:"hide",savedIri:void 0,label:void 0,description:void 0})},n.state={show:"hide"},n}return n.__extends(ActionSaveComponent,e),ActionSaveComponent.prototype.renderModal=function(){var e=this;switch(this.state.show){case"editor":return w({show:!0,onHide:this.onCancel},y({},"Save visualization"),k({},"Label:",A({value:this.state.label?this.state.label:"",onChange:function(t){var o=t.target.value;e.setState({label:o})}}),"Description:",A({type:"textarea",value:this.state.description?this.state.description:"",onChange:function(t){var o=t.target.value;e.setState({description:o})}})),b({},g({disabled:!this.state.label,onClick:this.onSave},"OK"),g({onClick:this.onCancel},"Cancel")));case"saving":return w({show:!0,onHide:this.onCancel},y({},"Saving in progress"),k({},C.Spinner()));case"success":return w({show:!0,onHide:this.onCancel},y({},"Success"),k({},"Visualization ",M({uri:this.state.savedIri}),"has been saved successfully!"),b({},g({onClick:this.onCancel},"OK")));case"hide":return null}},ActionSaveComponent.prototype.render=function(){if(m.isValidChild(this.props.children)){var e=a.Children.only(this.props.children);return a.cloneElement.apply(void 0,n.__spreadArrays([e,n.__assign(n.__assign({},e.props),{onClick:this.onClick})],e.props.children,[this.renderModal()]))}return g({title:"Save into default set",onClick:"hide"==this.state.show?this.onClick:void 0},i.i({className:"fa fa-save"}),this.renderModal())},ActionSaveComponent.defaultProps={addToDefaultSet:!1},ActionSaveComponent}(c.Component);t.ActionSaveComponent=R,t.default=R}}]);
//# sourceMappingURL=mp-component-toolbar-action-save-68e3774eaa1d31820754.js.map