(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{1836:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n=o(11),i=o(1),r=o(16),c=o(1),l=o(19),p=o(56),s=o(2262),a=o(117),u=o(335),d=o(61),y=o(23);t.ACTION_DIALOG_REF="dialog-action";var h=function(e){function TypedSelectionActionComponent(o,n){var p=e.call(this,o,n)||this;return p.checkSelection=function(e){e.selection&&!r.isEmpty(e.selection)&&e.types&&e.checkQuery&&p.executesCheck(e)},p.executesCheck=function(e){var t=e.selection.map((function(e){return{_iri:y.Rdf.iri(e)}})),o=e.types.map((function(e){return{_type:y.Rdf.iri(e)}}));d.SparqlClient.prepareQuery(e.checkQuery,t).map(d.SparqlClient.prepareParsedQuery(o)).flatMap((function(t){return l.combine(e.repositories.map((function(e){return p.executeCheckQuery(t,e)})))})).map(r.flatten).onValue((function(e){var o=r.intersectionWith(e,t,(function(e,t){return e._iri.equals(t._iri)})).length===t.length;p.setState({disabled:!o})})).onError((function(e){console.error(e)}))},p.executeCheckQuery=function(e,t){return d.SparqlClient.select(e,{context:{repository:t}}).map((function(e){return e.results.bindings}))},p.onAction=function(e){a.getOverlaySystem().show(t.ACTION_DIALOG_REF,p.renderDialog(e),p.context)},p.renderDialog=function(e){if(p.props.renderDialog)return i.createElement(u.OverlayDialog,{show:!0,title:p.props.title,type:p.props.dialogType,bsSize:p.props.dialogSize,onHide:closeDialog},p.props.renderDialog(e));if(p.props.renderRawDialog){var t=p.props.renderRawDialog(e);return c.cloneElement(t,{onHide:closeDialog})}console.error("SelectionActionComponent wasn't provided with dialog")},p.state={disabled:!1},p}return n.__extends(TypedSelectionActionComponent,e),TypedSelectionActionComponent.prototype.componentDidMount=function(){this.checkSelection(this.props)},TypedSelectionActionComponent.prototype.componentWillReceiveProps=function(e){r.isEqual(e.selection,this.props.selection)||this.checkSelection(e)},TypedSelectionActionComponent.prototype.render=function(){var e=this.state.disabled||this.props.isDisabled(this.props.selection);return i.createElement(s.default,{disabled:e,selection:this.props.selection,closeMenu:this.props.closeMenu,onAction:this.onAction,title:this.props.menuTitle})},TypedSelectionActionComponent.defaultProps={repositories:["default"],dialogType:"lightbox",checkQuery:"\n  SELECT DISTINCT $_iri WHERE {\n    $_iri a $_type.\n  }\n"},TypedSelectionActionComponent}(p.Component);function closeDialog(){a.getOverlaySystem().hide(t.ACTION_DIALOG_REF)}t.TypedSelectionActionComponent=h,t.closeDialog=closeDialog,t.default=h}}]);
//# sourceMappingURL=default~mp-create-set-action~rs-iiif-overlay-action~rs-iiif-side-by-side-action~rs-simple-assertion-28c7cec5623195ad35a9.js.map