(window.webpackJsonp=window.webpackJsonp||[]).push([[384],{1446:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(1),i=n(35),a=n(72),u=n(56),s=n(23),p=n(61),c=n(63),y=n(1212),l=n(2263),d=o.createFactory(a.FormGroup),m=o.createFactory(a.Alert),C=o.createFactory(a.Button),f=o.createFactory(l.QueryValidatorComponent),h=function(e){function QueryEditorComponent(t,n){var r=e.call(this,t,n)||this;r.createQuery=function(){r.queryService.addItem(r.state.query).onValue((function(e){return c.navigateToResource(e).onValue((function(){}))})).onError((function(){}))},r.updateQuery=function(){var e=s.Rdf.iri(r.props.iri);return r.queryService.updateItem(e,r.state.query).onValue((function(){})).onError((function(){}))},r.onChangeQuery=function(e,t){r.setState({query:e,isValid:t})};var o=r.context.semanticContext;return r.queryService=y.QueryService(o),r.state={isValid:!1},r}return r.__extends(QueryEditorComponent,e),QueryEditorComponent.prototype.componentDidMount=function(){var e=this,t=this.props.iri;t&&this.getQueryTemplateCount(t).onValue((function(t){e.setState({templateCount:t})}))},QueryEditorComponent.prototype.getQueryTemplateCount=function(e){var t=p.SparqlClient.setBindings(p.SparqlUtil.parseQuery("PREFIX spin: <http://spinrdf.org/spin#>\nSELECT (COUNT(?template) as ?templateCount) WHERE {\n  ?template spin:body ?query\n}"),{query:s.Rdf.iri(e)}),n=this.context.semanticContext;return p.SparqlClient.select(t,{context:n}).map((function(e){return parseInt(e.results.bindings[0].templateCount.value)}))},QueryEditorComponent.prototype.render=function(){var e=this.props.iri,t=this.state,n=t.isValid,r=t.templateCount;return i.div({},d({},r?m({bsStyle:"warning"},i.strong({},"Warning! "),"This query is used in "+r+" templates.\n              Modifications to the query below may break existing templates."):null,f({iri:this.props.iri,onChange:this.onChangeQuery})),C({bsStyle:"success",disabled:!n,onClick:e?this.updateQuery:this.createQuery},e?"Update":"Create"))},QueryEditorComponent}(u.Component);t.QueryEditorComponent=h,t.component=h,t.factory=o.createFactory(t.component),t.default=t.component}}]);
//# sourceMappingURL=mp-spin-query-editor-785bae90b3e9a1b36b86.js.map