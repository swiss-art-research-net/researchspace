(window.webpackJsonp=window.webpackJsonp||[]).push([[319],{1303:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(11),r=n(1),l=n(1),i=n(634),d=n(162),p=n(337),s=n(214),u=n(1304),h=n(1305),c=n(3410),y=n(1306);!function(e){e.PageLoader="page-loader",e.IIIFViewer="iiif-viewer",e.GraphAuthoring="graph-authoring"}(a||(a={}));var m=function(e){function PanelSystemHolder(t){var n=e.call(this,t)||this;return n.cancellation=new i.Cancellation,n.state={holder:t.defaultHolder,holderKey:0},n}return o.__extends(PanelSystemHolder,e),PanelSystemHolder.prototype.componentDidMount=function(){var e=this,t=this.props.id;this.cancellation.map(d.listen({eventType:c.ShowResource,target:t})).onValue((function(t){var n=t.data;return e.updateHolder({holder:a.PageLoader,data:n})})),this.cancellation.map(d.listen({eventType:c.InitiateIIIFViewer,target:t})).onValue((function(t){var n=t.data;return e.updateHolder({holder:a.IIIFViewer,data:n})})),this.cancellation.map(d.listen({eventType:c.InitiateGraphAuthoring,target:t})).onValue((function(t){var n=t.data;return e.updateHolder({holder:a.GraphAuthoring,data:n})}))},PanelSystemHolder.prototype.componentDidUpdate=function(e,t){this.state.holder===t.holder&&this.state.data===t.data||this.props.onChangeHolder()},PanelSystemHolder.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},PanelSystemHolder.prototype.updateHolder=function(e){var t=e.holder,n=e.data;this.setState((function(e){var a=e.holderKey;return{holder:t,holderKey:a+1,data:n}}))},PanelSystemHolder.prototype.mapChildren=function(e){var t=this.state,n=t.holder,r=t.data,i=t.holderKey;return l.Children.map(e,(function(e){return s.isValidChild(e)?n===a.PageLoader&&s.componentHasType(e,p.default)&&e.props.id===r.pageId?l.cloneElement(e,o.__assign({key:i},r.pageProps)):n===a.GraphAuthoring&&s.componentHasType(e,u.OntodiaPanel)||n===a.IIIFViewer&&s.componentHasType(e,h.IIIFViewerPanel)?l.cloneElement(e,o.__assign({key:i},r)):null:e}))},PanelSystemHolder.prototype.render=function(){return r.createElement("div",{className:y.panelHolder},this.mapChildren(this.props.children))},PanelSystemHolder}(r.Component);t.PanelSystemHolder=m,t.default=m},3410:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(162).EventMaker;t.ShowResource=a("PanelSystem.ShowResource"),t.InitiateIIIFViewer=a("PanelSystem.InitiateIIIFViewer"),t.InitiateGraphAuthoring=a("PanelSystem.InitiateGraphAuthoring")}}]);
//# sourceMappingURL=rs-panel-system-holder-b723ccfa4bd2e0d9a2d5.js.map