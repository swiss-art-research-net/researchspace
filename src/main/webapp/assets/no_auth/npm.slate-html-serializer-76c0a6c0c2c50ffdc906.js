(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{2394:function(e,r,t){"use strict";t.r(r);var n=t(1),a=t.n(n),i=t(1535),o=t(3531),l=t.n(o),s=t(1609),u=t(43),classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},d=new u.Record({object:"string",text:""}),f={deserialize:function deserialize(e){if(e.tagName&&"br"===e.tagName.toLowerCase())return{object:"text",text:"\n",marks:[]};if("#text"===e.nodeName){if(e.nodeValue&&e.nodeValue.match(/<!--.*?-->/))return;return{object:"text",text:e.nodeValue,marks:[]}}},serialize:function serialize(e,r){if("string"===e.object)return r.split("\n").reduce((function(e,r,t){return 0!==t&&e.push(a.a.createElement("br",{key:t})),e.push(r),e}),[])}};function defaultParseHtml(e){if("undefined"==typeof DOMParser)throw new Error("The native `DOMParser` global which the `Html` serializer uses by default is not present in this environment. You must supply the `options.parseHtml` function instead.");return(new DOMParser).parseFromString(e,"text/html").body||window.document.createElement("body")}var h=function _initialiseProps(){var e=this;this.deserialize=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.toJSON,a=void 0!==n&&n,i=e.defaultBlock,o=e.parseHtml,l=o(r),u=Array.from(l.childNodes),d=e.deserializeElements(u);0===(d=d.reduce((function(e,r,t,n){if("block"===r.object)return e.push(r),e;if(t>0&&"block"!==n[t-1].object)return e[e.length-1].nodes.push(r),e;var a=c({object:"block",data:{}},i,{nodes:[r]});return e.push(a),e}),[])).length&&(d=[c({object:"block",data:{}},i,{nodes:[{object:"text",text:"",marks:[]}]})]);var f={object:"value",document:{object:"document",data:{},nodes:d}},h=a?f:s.Value.fromJSON(f);return h},this.deserializeElements=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return r.filter(e.cruftNewline).forEach((function(r){var n=e.deserializeElement(r);switch(l()(n)){case"array":t=t.concat(n);break;case"object":t.push(n)}})),t},this.deserializeElement=function(r){var t=void 0;r.tagName||(r.tagName="");var n=function next(r){switch("[object NodeList]"===Object.prototype.toString.call(r)&&(r=Array.from(r)),l()(r)){case"array":return e.deserializeElements(r);case"object":return e.deserializeElement(r);case"null":case"undefined":return;default:throw new Error('The `next` argument was called with invalid children: "'+r+'".')}},a=!0,i=!1,o=void 0;try{for(var s,u=e.rules[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;if(c.deserialize){var d=c.deserialize(r,n),f=l()(d);if("array"!==f&&"object"!==f&&"null"!==f&&"undefined"!==f)throw new Error('A rule returned an invalid deserialized representation: "'+t+'".');if(void 0!==d){if(null===d)return null;"block"===(t="mark"===d.object?e.deserializeMark(d):d).object||"inline"===t.object?(t.data=t.data||{},t.nodes=t.nodes||[]):"text"===t.object&&(t.marks=t.marks||[],t.text=t.text||"");break}}}}catch(e){i=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw o}}return t||n(r.childNodes)},this.deserializeMark=function(r){var t=r.type,n=r.data;return r.nodes.reduce((function(r,a){var i=function applyMark(r){return"mark"===r.object?e.deserializeMark(r):("text"===r.object?(r.marks=r.marks||[],r.marks.push({type:t,data:n})):r.nodes&&(r.nodes=r.nodes.map(applyMark)),r)}(a);return Array.isArray(i)?r.concat(i):(r.push(i),r)}),[])},this.serialize=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.document,o=n.nodes.map(e.serializeNode).filter((function(e){return e}));if(!1===t.render)return o;var l=Object(i.renderToStaticMarkup)(a.a.createElement("body",null,o)),s=l.slice(6,-7);return s},this.serializeNode=function(r){if("text"===r.object){var t=new d({text:r.text}),n=e.serializeString(t);return r.marks.reduce((function(r,t){var n=!0,a=!1,i=void 0;try{for(var o,l=e.rules[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;if(s.serialize){var u=s.serialize(t,r);if(null===u)return;if(u)return addKey(u)}}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}throw new Error('No serializer defined for mark of type "'+t.type+'".')}),n)}var a=r.nodes.map(e.serializeNode),i=!0,o=!1,l=void 0;try{for(var s,u=e.rules[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.serialize){var f=c.serialize(r,a);if(null===f)return;if(f)return addKey(f)}}}catch(e){o=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw l}}throw new Error('No serializer defined for node of type "'+r.type+'".')},this.serializeString=function(r){var t=!0,n=!1,a=void 0;try{for(var i,o=e.rules[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value;if(l.serialize){var s=l.serialize(r,r.text);if(s)return s}}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}},this.cruftNewline=function(e){return!("#text"===e.nodeName&&"\n"===e.nodeValue)}},v=0;function addKey(e){return a.a.cloneElement(e,{key:v++})}r.default=function Html(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,Html),h.call(this);var r=e.defaultBlock,t=void 0===r?"paragraph":r,n=e.parseHtml,a=void 0===n?defaultParseHtml:n,i=e.rules,o=void 0===i?[]:i;t=s.Node.createProperties(t),this.rules=[].concat(toConsumableArray(o),[f]),this.defaultBlock=t,this.parseHtml=a}}}]);
//# sourceMappingURL=npm.slate-html-serializer-76c0a6c0c2c50ffdc906.js.map