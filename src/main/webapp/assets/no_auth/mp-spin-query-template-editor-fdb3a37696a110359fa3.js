(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{1289:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=r(1),o=r(35),l=r(56),i=r(72),u=r(33),s=r(1625),c=r(19),p=r(23),d=p.vocabularies.spin,m=r(61),g=r(633),f=r(63),v=r(140),y=r(118),h=r(1212),b=r(1290),E=r(116),S=r(1601),C=r(2263),T=r(3131),V=r(1),Q=a.createFactory(i.Well),A=a.createFactory(i.FormGroup),q=a.createFactory(i.FormControl),F=a.createFactory(i.ControlLabel),w=a.createFactory(i.HelpBlock),I=a.createFactory(i.Button),L=a.createFactory(i.Radio),J=a.createFactory(C.QueryValidatorComponent),x=[{value:"create",label:"Create new query"},{value:"update",label:"Update query"},{value:"reference",label:"Reference existing query"}],R=function(e){function QueryTemplate(t,r){var l=e.call(this,t,r)||this;l.identifier=c.pool(),l.label=c.pool(),l.description=c.pool(),l.args=c.pool(),l.query=c.pool(),l.fetchTemplate=function(e){l.queryTemplateService.getQueryTemplate(p.Rdf.iri(e)).flatMap(l.getQueryTemplateCount).onValue((function(e){var t=e.template,r=e.queryIri,n=e.templateCount,a=t.identifier,o=t.label,i=t.description,u=t.args;v.getLabels(t.categories).map((function(e){return e.map((function(e,t){return{iri:t,label:p.Rdf.literal(e)}})).toArray()})).onValue((function(e){return l.setState({queryIri:r,templateCount:n,categories:e,selectQuery:"update"},(function(){l.identifier.plug(c.constant(a)),l.label.plug(c.constant(o)),l.description.plug(c.constant(i)),u.forEach((function(e,t){l.setArgument(s.Right(e),t)}))}))}))}))},l.getQueryTemplateCount=function(e){var t=e.template,r=e.queryIri,n=m.SparqlClient.setBindings(m.SparqlUtil.parseQuery("PREFIX spin: <http://spinrdf.org/spin#>\nSELECT (COUNT(?template) as ?templateCount) WHERE {\n  ?template spin:body ?query\n}"),{query:p.Rdf.iri(r)}),a=l.context.semanticContext;return m.SparqlClient.select(n,{context:a}).map((function(e){return{template:t,queryIri:r,templateCount:parseInt(e.results.bindings[0].templateCount.value)}}))},l.isUpdateMode=function(){return!!l.props.iri},l.getTemplateTypeForQuery=function(e){if("update"===e.type)return d.UpdateTemplate;switch(e.queryType){case"SELECT":return d.SelectTemplate;case"CONSTRUCT":return d.ConstructTemplate;case"ASK":return d.AskTemplate;default:return d.SelectTemplate}},l.initPool=function(){var e=l.identifier.flatMap(l.validateInputField);e.onValue((function(e){return l.setState({identifier:u.Just(e)})})).onError((function(e){return l.setState({identifier:u.Just(e),template:u.Nothing()})}));var t=l.label.flatMap(l.validateInputField);t.onValue((function(e){return l.setState({label:u.Just(e)})})).onError((function(e){return l.setState({label:u.Just(e),template:u.Nothing()})}));var r=l.description.flatMap(l.validateInputField);r.onValue((function(e){return l.setState({description:u.Just(e)})})).onError((function(e){return l.setState({description:u.Just(e),template:u.Nothing()})}));var n=l.args.flatMap(l.validateArguments);n.onError((function(e){return l.setState({template:u.Nothing()})}));var a=l.query;a.onValue((function(e){return l.setState({query:e})})).onError((function(e){return l.setState({query:e,template:u.Nothing()})})),c.combine({identifier:e.map((function(e){return e.value})).toProperty((function(){if(l.state.identifier.isJust)return l.state.identifier.get().value})),label:t.map((function(e){return e.value})).toProperty((function(){if(l.state.label.isJust)return l.state.label.get().value})),description:r.map((function(e){return e.value})).toProperty((function(){if(l.state.description.isJust)return l.state.description.get().value})),args:n.toProperty((function(){return l.state.args})),query:a.toProperty((function(){return l.state.query}))},(function(e){var t=e.identifier,r=e.label,n=e.description,a=e.args,o=e.query;if(t&&r&&n&&o){var i=l.state.categories.map((function(e){var t=e.iri;if(!t.isIri())throw new Error("Query template category is expected to be an IRI");return t})),s={templateType:l.getTemplateTypeForQuery(o),identifier:t,label:r,description:n,categories:i,args:a.map((function(e){return e.get()}))};return l.setState({template:u.Just(s)}),{}}})).onValue((function(e){return e}))},l.validateInputField=function(e){return e.length<1?c.constantError({value:e,error:new Error("Please fill out this field.")}):c.constant({value:e})},l.validateArguments=function(e){return e.filter((function(e){return e.isLeft})).length?c.constantError(e):c.constant(e)},l.addArgument=function(e){l.setState((function(t){var r=t.args.slice();return r.push(e),{args:r}}),(function(){return l.args.plug(c.constant(l.state.args))}))},l.deleteArgument=function(e){l.setState((function(t){var r=t.args.slice();return r.splice(e,1),{args:r}}),(function(){return l.args.plug(c.constant(l.state.args))}))},l.setArgument=function(e,t){l.setState((function(r){var n=r.args.slice();return n.splice(t,1,e),{args:n}}),(function(){return l.args.plug(c.constant(l.state.args))}))},l.createQuery=function(){return l.queryService.addItem(l.state.query).map((function(e){return e.value}))},l.updateQuery=function(){var e=p.Rdf.iri(l.state.queryIri);return l.queryService.updateItem(e,l.state.query)},l.onSaveError=function(e){l.setState({inProgress:!1}),E.addNotification({title:"Error!",children:V.createElement("div",null,"An error has occurred while template saving.",V.createElement(E.ErrorPresenter,{error:e})),level:"error"},e)},l.onUpdateSuccess=function(){l.setState({inProgress:!1}),E.addNotification({title:"Success!",message:"Template updated successfully",level:"success"}),f.refresh()},l.onUpdateError=function(e){l.setState({inProgress:!1}),E.addNotification({title:"Error!",children:V.createElement("div",null,"An error has occurred while template updating.",V.createElement(E.ErrorPresenter,{error:e})),level:"error"},e)},l.createTemplate=function(){var e=l.props.namespace,t=l.state,r=t.selectQuery,n=t.existingQueryIri,a=t.template;l.setState({inProgress:!0}),"create"===r?l.createQuery().flatMap((function(t){return l.queryTemplateService.addItem(a.get(),t,e)})).onValue((function(e){f.refresh()})).onError(l.onSaveError):"reference"===r&&l.queryTemplateService.addItem(a.get(),n,e).onValue((function(e){f.refresh()})).onError(l.onSaveError)},l.updateTemplate=function(){var e=l.props.namespace,t=l.state,r=t.selectQuery,n=t.queryIri,a=t.existingQueryIri,o=t.template,i=p.Rdf.iri(l.props.iri);l.setState({inProgress:!0}),"create"===r?l.createQuery().flatMap((function(t){return l.queryTemplateService.updateItem(i,o.get(),t,e)})).onValue(l.onUpdateSuccess).onError(l.onUpdateError):"update"===r?l.updateQuery().flatMap((function(){return l.queryTemplateService.updateItem(i,o.get(),n,e)})).onValue(l.onUpdateSuccess).onError(l.onUpdateError):"reference"===r&&l.queryTemplateService.updateItem(i,o.get(),a,e).onValue(l.onUpdateSuccess).onError(l.onUpdateError)},l.onChangeQuery=function(e,t){t?l.query.plug(c.constant(e)):l.query.plug(c.constantError(e))},l.getValidationState=function(e){if(e.isJust&&e.get().error)return"error"},l.getQuerySection=function(){var e=l.state,t=e.selectQuery,r=e.queryIri,n=e.existingQueryIri,i=e.templateCount;if("create"===t)return J({query:l.state.query,onChange:l.onChangeQuery,onChangeVariables:function(e){return l.setState({variables:e})}});if("update"===t)return o.div({},i>1?w({},"* This query is used in "+i+"\n             templates and inline editing is disabled. Click ",a.createElement(g.ResourceLink,{resource:p.Rdf.iri("http://www.researchspace.org/resource/admin/EditBaseQuery"),params:{queryiri:r}},"here")," to edit the query."):null,J({iri:r,viewOnly:i>1,onChange:l.onChangeQuery,onChangeVariables:function(e){return l.setState({variables:e})}}));if("reference"===t){var u=a.createElement(S.AutoCompletionInput,{query:'PREFIX bds: <http://www.bigdata.com/rdf/search#>\n               PREFIX prov: <http://www.w3.org/ns/prov#>\n                SELECT ?iri ?label ?text ?modified  WHERE {\n                  ?iri a sp:Query ;\n                    sp:text ?text;\n                    prov:generatedAtTime ?modified;\n                    rdfs:label ?label;\n                    prov:wasAttributedTo ?user.\n                  FILTER(\n                    ?user in (<http://www.researchspace.org/resource/user/querycatalog>,?__useruri__)\n                  )\n                  SERVICE bds:search {\n                                  ?label bds:search "*?token*" ;\n                                    bds:relevance ?score .\n                                }\n                } ORDER BY DESC(?score)  LIMIT 20\n                ',defaultQuery:"PREFIX prov: <http://www.w3.org/ns/prov#>\n              SELECT ?iri ?label ?text ?modified WHERE {\n                  ?iri a sp:Query;\n                    sp:text ?text;\n                    prov:generatedAtTime ?modified;\n                    prov:wasAttributedTo ?user.\n                  FILTER(\n                    ?user in (<http://www.researchspace.org/resource/user/querycatalog>,?__useruri__)\n                  )\n                  OPTIONAL {?iri rdfs:label ?label}\n                } ORDER BY DESC(?modified) LIMIT 10",placeholder:"Select query...",templates:{suggestion:'<mp-popover title="{{iri.value}}">\n                  <mp-popover-trigger placement="top"trigger=\'["hover","focus"]\'>\n                    <span>{{label.value}} ({{dateTimeFormat modified.value "LLL"}})</span>\n                  </mp-popover-trigger>\n                  <mp-popover-content style="background:white;">\n                      <div>{{text.value}}</div>\n                  </mp-popover-content>\n              </mp-popover>'},actions:{onSelected:function(e){e?l.setState({existingQueryIri:e.iri.value}):l.setState({existingQueryIri:void 0,variables:[]},(function(){l.query.plug(c.constantError({label:"",value:"",type:"",queryType:""}))}))}}});return o.div({},A({},o.div({},u)),n?J({iri:n,viewOnly:!0,onChange:l.onChangeQuery,onChangeVariables:function(e){return l.setState({variables:e})}}):null)}return null},l.onLabelChanged=function(e){var t=l.state.label.map((function(e){return e.value})),r=e.currentTarget.value,a=mapIfCorresponds({oldSource:t,newSource:r,oldTarget:l.state.identifier.map((function(e){return e.value})),mapping:y.slugFromName}),o=mapIfCorresponds({oldSource:t,newSource:r,oldTarget:l.state.description.map((function(e){return e.value}))}),i=mapIfCorresponds({oldSource:t,newSource:r,oldTarget:u.fromNullable(l.state.query).map((function(e){return e.label}))});l.label.plug(c.constant(r)),a.isJust&&l.identifier.plug(c.constant(a.get())),o.isJust&&l.description.plug(c.constant(o.get())),i.isJust&&l.query.plug(c.constant(n.__assign(n.__assign({},l.state.query),{label:i.get()})))},l.onDescriptionChanged=function(e){var t=l.state.description.map((function(e){return e.value})),r=e.currentTarget.value,a=mapIfCorresponds({oldSource:t,newSource:r,oldTarget:u.fromNullable(l.state.query).map((function(e){return e.label}))});l.description.plug(c.constant(r)),a.isJust&&l.query.plug(c.constant(n.__assign(n.__assign({},l.state.query),{label:a.get()})))};var i=l.context.semanticContext;return l.queryTemplateService=b.QueryTemplateService(i),l.queryService=h.QueryService(i),l.state={identifier:u.Nothing(),label:u.Nothing(),description:u.Nothing(),categories:[],selectQuery:"create",query:void 0,variables:[],args:[],template:u.Nothing(),inProgress:!1},l}return n.__extends(QueryTemplate,e),QueryTemplate.prototype.componentWillMount=function(){this.initPool()},QueryTemplate.prototype.componentDidMount=function(){var e=this;this.isUpdateMode()?this.fetchTemplate(this.props.iri):this.props.defaultQuery&&m.SparqlUtil.parseQueryAsync(this.props.defaultQuery).onValue((function(t){var r="update"===t.type?"UPDATE":t.queryType;e.query.plug(c.constant({value:e.props.defaultQuery,type:t.type,queryType:r,label:""}))}))},QueryTemplate.prototype.render=function(){var e=this,t=this.state,r=t.identifier,n=t.label,a=t.description,l=t.selectQuery,i=t.query,u=t.args,s=t.variables,p=t.existingQueryIri,d=t.template,m=t.inProgress,g=this.isUpdateMode()?null:A({validationState:this.getValidationState(r)},F({},"Preferred Identifier*"),q({type:"text",value:r.isJust?r.get().value:"",onChange:function(t){return e.identifier.plug(t.currentTarget.value)},disabled:this.isUpdateMode()}),"error"===this.getValidationState(r)?w({},r.get().error.message):null),f=A({validationState:this.getValidationState(n)},F({},"Label*"),q({type:"text",value:n.isJust?n.get().value:"",onChange:this.onLabelChanged}),"error"===this.getValidationState(n)?w({},n.get().error.message):null),v=A({validationState:this.getValidationState(a)},F({},"Description*"),q({componentClass:"textarea",style:{resize:"vertical"},value:a.isJust?a.get().value:"",onChange:this.onDescriptionChanged}),"error"===this.getValidationState(a)?w({},a.get().error.message):null),y=this.isUpdateMode()?x:x.filter((function(e){return"update"!==e.value})),h=A({},y.map((function(t){return L({key:t.value,name:"mode",value:t.value,inline:!0,checked:t.value===l,onChange:function(e){return e},onClick:function(t){var r=t.target;l!==r.value&&e.setState({selectQuery:r.value,variables:[]},(function(){e.query.plug(c.constantError({label:"",value:"",type:"",queryType:""}))}))}},t.label)}))),b=this.getQuerySection(),E=d.isNothing||m||void 0===p&&(void 0===i||void 0===i.value);return o.div({},f,g,v,this.renderCategoriesField(),F({},"Query*"),Q({},h,b),T.factory({args:u,variables:s,onAdd:this.addArgument,onDelete:this.deleteArgument,onChange:this.setArgument}),I({bsStyle:"success",disabled:E,onClick:this.isUpdateMode()?this.updateTemplate:this.createTemplate},this.isUpdateMode()?"Update":"Save"))},QueryTemplate.prototype.renderCategoriesField=function(){var e=this;return this.props.categorySuggestionQuery?A({},F({},"Categories"),a.createElement(S.AutoCompletionInput,{query:this.props.categorySuggestionQuery,defaultQuery:this.props.categoryDefaultQuery,placeholder:"Select categories",multi:!0,value:this.state.categories,actions:{onSelected:function(t){var r=t;e.setState({categories:r},(function(){e.state.label.isJust&&e.label.plug(c.constant(e.state.label.get().value))}))}}})):null},QueryTemplate.defaultProps={categorySuggestionQuery:'\n      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n      SELECT DISTINCT ?iri ?label WHERE {\n        ?iri a skos:Concept ;\n          rdfs:label ?label .\n        FILTER(REGEX(STR(?label), $__token__, "i")) .\n      }\n    ',categoryDefaultQuery:"\n      PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n      SELECT DISTINCT ?iri ?label WHERE {\n        ?iri a skos:Concept ;\n          rdfs:label ?label .\n      } LIMIT 10\n    "},QueryTemplate}(l.Component);function mapIfCorresponds(e){e.oldSource;var t=e.newSource,r=e.mapping,n=void 0===r?function(e){return e}:r,a=e.oldTarget.getOrElse(void 0);return!a||e.oldSource.map(n).map((function(e){return a===e})).getOrElse(!1)?u.Just(n(t)):u.Nothing()}t.QueryTemplate=R,t.default=R},2264:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(23);t.VALUE_TYPES=n.vocabularies.xsd.LIST_TYPES},3131:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=r(1),o=r(35),l=r(72),i=r(1625),u=r(117),s=r(3132),c=a.createFactory(l.Well),p=a.createFactory(l.Panel),d=a.createFactory(l.PanelGroup),m=a.createFactory(l.FormGroup),g=a.createFactory(l.ControlLabel),f=a.createFactory(l.Button),v=a.createFactory(l.ButtonToolbar),y=function(e){function QueryTemplateArgumentsComponent(t){var r=e.call(this,t)||this;return r.handleAddNewArgument=function(){var e={label:"",variable:"",comment:"",optional:!1,valueType:""};r.setState({activeKey:r.props.args.length},(function(){r.props.onAdd(i.Left(e))}))},r.handleDeleteArgument=function(e){var t="Delete Argument",n=o.div({style:{textAlign:"center"}},o.h5({style:{margin:"0 0 20px"}},"Are You Sure?"),v({style:{display:"inline-block"}},f({bsStyle:"success",onClick:function(){u.getOverlaySystem().hide(t),r.props.onDelete(e)}},"Yes"),f({bsStyle:"danger",onClick:function(){return u.getOverlaySystem().hide(t)}},"No")));u.getOverlaySystem().show(t,a.createElement(u.OverlayDialog,{show:!0,title:t,bsSize:"sm",onHide:function(){return u.getOverlaySystem().hide(t)},children:n}))},r.handleChangeArgument=function(e,t,n){var a=n?i.Right(e):i.Left(e);r.props.onChange(a,t)},r.renderArgument=function(e,t,n){var o=r.props,l=o.args,i=o.variables,u=l.filter((function(e,r){return r!==t})),c=u.map((function(e){return e.fold((function(e){return e.label}),(function(e){return e.label}))})),d=u.map((function(e){return e.fold((function(e){return e.variable}),(function(e){return e.variable}))}));return p({key:t,header:e.label.length?e.label:"No Label",eventKey:t,onSelect:function(e){return r.setState({activeKey:e})},bsStyle:n?"default":"danger"},a.createElement(s.QueryTemplateEditArgument,{argument:e,variables:i,notAvailableLabels:c,notAvailableVariables:d,onDelete:function(){r.handleDeleteArgument(t)},onChange:function(e,n){r.handleChangeArgument(e,t,n)}}))},r.state={activeKey:0},r}return n.__extends(QueryTemplateArgumentsComponent,e),QueryTemplateArgumentsComponent.prototype.render=function(){var e=this,t=this.state.activeKey;return m({style:{width:"50%"}},g({},"Arguments"),c({},this.props.args.length?d({activeKey:t,accordion:!0},this.props.args.map((function(t,r){return t.fold((function(t){return e.renderArgument(t,r,!1)}),(function(t){return e.renderArgument(t,r,!0)}))}))):null,f({bsSize:"small",bsStyle:"primary",onClick:this.handleAddNewArgument},"Add New Argument")))},QueryTemplateArgumentsComponent}(a.Component);t.QueryTemplateArgumentsComponent=y,t.component=y,t.factory=a.createFactory(t.component),t.default=t.component},3132:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=r(1),o=r(1),l=r(72),i=r(33),u=r(19),s=r(16),c=r(23),p=r(1562),d=r(2264),m=function(e){function QueryTemplateEditArgument(t){var r=e.call(this,t)||this;return r.label=u.pool(),r.variable=u.pool(),r.comment=u.pool(),r.valueType=u.pool(),r.defaultValue=u.pool(),r.optional=u.pool(),r.onChange=function(){var e=r.state,t=e.label,n=e.variable,a=e.comment,o=e.valueType,l=e.defaultValue,i=e.isValid,u=e.optional,s={label:t.get().value,variable:n.get().value,comment:a.get().value,valueType:o.get().value,defaultValue:p.FieldValue.asRdfNode(l)||void 0,optional:u};r.props.onChange(s,i)},r.validateInputField=function(e){return e.length<1?u.constantError({value:e,error:new Error("Please fill out this field.")}):u.constant({value:e})},r.validateLabel=function(e){return e.length<1?u.constantError({value:e,error:new Error("Please fill out this field.")}):-1!==r.props.notAvailableLabels.indexOf(e)?u.constantError({value:e,error:new Error("Label duplicated.")}):u.constant({value:e})},r.validateVariable=function(e){return e.length<1?u.constantError({value:e,error:new Error("Please fill out this field.")}):-1===r.props.variables.indexOf(e)?u.constantError({value:e,error:new Error("Variable '"+e+"' is not in the query.")}):-1!==r.props.notAvailableVariables.indexOf(e)?u.constantError({value:e,error:new Error("Variable duplicated.")}):u.constant({value:e})},r.getFormValue=function(e){return u.constant(e.target.value)},r.state={label:i.Nothing(),variable:i.Nothing(),comment:i.Nothing(),valueType:i.Nothing(),defaultValue:p.FieldValue.empty,optional:!1,isValid:!1},r}return n.__extends(QueryTemplateEditArgument,e),QueryTemplateEditArgument.prototype.componentWillMount=function(){var e=this,t=this.label.flatMap(this.validateLabel);t.onValue((function(t){return e.setState({label:i.Just(t)},e.onChange)})).onError((function(t){return e.setState({label:i.Just(t),isValid:!1},e.onChange)}));var r=this.variable.flatMap(this.validateVariable);r.onValue((function(t){return e.setState({variable:i.Just(t)},e.onChange)})).onError((function(t){return e.setState({variable:i.Just(t),isValid:!1},e.onChange)}));var n=this.comment.flatMap((function(e){return u.constant({value:e})}));n.onValue((function(t){return e.setState({comment:i.Just(t)},e.onChange)})).onError((function(t){return e.setState({comment:i.Just(t),isValid:!1},e.onChange)}));var a=this.valueType.flatMap(this.validateInputField);a.onValue((function(t){return e.setState({valueType:i.Just(t)},e.onChange)})).onError((function(t){return e.setState({valueType:i.Just(t),isValid:!1},e.onChange)}));var o=u.combine([a.flatMapErrors((function(e){return u.constant(e)})),this.defaultValue],(function(e,t){if(!t)return p.FieldValue.empty;if(e.error)return{type:p.AtomicValue.type,value:c.Rdf.literal(t),errors:p.FieldError.noErrors.push({kind:p.ErrorKind.Input,message:"Specify value type first"})};var r=c.Rdf.iri(e.value),n=c.XsdDataTypeValidation.sameXsdDatatype(r,c.vocabularies.xsd.anyURI)?c.Rdf.iri(t):c.Rdf.literal(t,r);return p.validateType({value:n},r)})).flatMap((function(e){return p.FieldValue.getErrors(e).size>0?u.constantError(e):u.constant(e)}));o.observe({value:function(t){return e.setState({defaultValue:t},e.onChange)},error:function(t){return e.setState({defaultValue:t,isValid:!1},e.onChange)}});var l=this.optional.flatMap((function(e){return u.constant(e)}));l.onValue((function(t){e.setState({optional:t},e.onChange)})).onError((function(t){return e.setState({optional:t,isValid:!1},e.onChange)})),u.combine([t.map((function(e){return e.value})),r.map((function(e){return e.value})),n.map((function(e){return e.value})),a.map((function(e){return e.value})),l.map((function(e){return e})),o],(function(t,r,n,a,o){if(t&&r&&a)return e.setState({isValid:!0},e.onChange),{}})).onValue((function(){}))},QueryTemplateEditArgument.prototype.componentDidMount=function(){var e=this.props.argument;this.label.plug(u.constant(e.label)),this.variable.plug(u.constant(e.variable)),this.comment.plug(u.constant(e.comment)),this.valueType.plug(u.constant(e.valueType)),this.defaultValue.plug(u.constant(e.defaultValue?e.defaultValue.value:"")),this.optional.plug(u.constant(e.optional))},QueryTemplateEditArgument.prototype.componentDidUpdate=function(e){s.isEqual(e.variables,this.props.variables)&&s.isEqual(e.notAvailableVariables,this.props.notAvailableVariables)||this.variable.plug(u.constant(this.state.variable.get().value)),s.isEqual(e.notAvailableLabels,this.props.notAvailableLabels)||this.label.plug(u.constant(this.state.label.get().value))},QueryTemplateEditArgument.prototype.render=function(){var e=this,t=this.props,r=t.variables,n=t.onDelete,o=this.state,i=o.label,s=o.variable,c=o.comment,m=o.valueType,g=o.defaultValue,f=o.optional;return a.createElement("div",{className:"form-horizontal"},a.createElement(l.FormGroup,{validationState:i.isJust&&i.get().error?"error":void 0},a.createElement(l.Col,{sm:2},a.createElement(l.ControlLabel,null,"Label")),a.createElement(l.Col,{sm:10},a.createElement(l.FormControl,{type:"text",value:i.isJust?i.get().value:"",onChange:function(t){return e.label.plug(e.getFormValue(t))}}),i.isJust&&i.get().error?a.createElement(l.HelpBlock,null,i.get().error.message):null)),a.createElement(l.FormGroup,{validationState:s.isJust&&s.get().error?"error":void 0},a.createElement(l.Col,{sm:2},a.createElement(l.ControlLabel,null,"Variable")),a.createElement(l.Col,{sm:10},a.createElement(l.FormControl,{componentClass:"select",value:s.isJust?s.get().value:"",onChange:function(t){return e.variable.plug(e.getFormValue(t))}},a.createElement("option",{value:"",disabled:!0,style:{display:"none"}},"-- select variable --"),r.map((function(e,t){return a.createElement("option",{key:t,value:e},e)}))),s.isJust&&s.get().error?a.createElement(l.HelpBlock,null,s.get().error.message):null)),a.createElement(l.FormGroup,{validationState:m.isJust&&m.get().error?"error":void 0},a.createElement(l.Col,{sm:2},a.createElement(l.ControlLabel,null,"Value Type")),a.createElement(l.Col,{sm:10},a.createElement(l.FormControl,{componentClass:"select",value:m.isJust?m.get().value:"",onChange:function(t){return e.valueType.plug(e.getFormValue(t))}},a.createElement("option",{value:"",disabled:!0,style:{display:"none"}},"-- select value type --"),d.VALUE_TYPES.map((function(e){return a.createElement("option",{key:e.value,value:e.value},e.label)}))),m.isJust&&m.get().error?a.createElement(l.HelpBlock,null,m.get().error.message):null)),a.createElement(l.FormGroup,{validationState:p.FieldValue.getErrors(g).size>0?"error":void 0},a.createElement(l.Col,{sm:2},a.createElement(l.ControlLabel,null,"Default Value")),a.createElement(l.Col,{sm:10},a.createElement(l.FormControl,{type:"text",value:p.FieldValue.isAtomic(g)?g.value.value:"",onChange:function(t){return e.defaultValue.plug(e.getFormValue(t))}}),p.FieldValue.getErrors(g).size>0?a.createElement(l.HelpBlock,null,p.FieldValue.getErrors(g).first().message):null)),a.createElement(l.FormGroup,{validationState:c.isJust&&c.get().error?"error":void 0},a.createElement(l.Col,{sm:2},a.createElement(l.ControlLabel,null,"Comment")),a.createElement(l.Col,{sm:10},a.createElement(l.FormControl,{type:"text",value:c.isJust?c.get().value:"",onChange:function(t){return e.comment.plug(e.getFormValue(t))}}),c.isJust&&c.get().error?a.createElement(l.HelpBlock,null,c.get().error.message):null)),a.createElement(l.FormGroup,null,a.createElement(l.Col,{sm:2},a.createElement(l.ControlLabel,null,"Optional")),a.createElement(l.Col,{sm:10},a.createElement(l.FormControl,{type:"checkbox",style:{width:"20px"},checked:f,onChange:function(t){e.optional.plug(u.constant(t.target.checked))}}))),a.createElement("div",{className:"text-right"},a.createElement(l.Button,{bsStyle:"danger",bsSize:"xsmall",onClick:n},a.createElement("span",{className:"fa fa-times"}," Delete"))))},QueryTemplateEditArgument}(o.Component);t.QueryTemplateEditArgument=m,t.default=m}}]);
//# sourceMappingURL=mp-spin-query-template-editor-fdb3a37696a110359fa3.js.map