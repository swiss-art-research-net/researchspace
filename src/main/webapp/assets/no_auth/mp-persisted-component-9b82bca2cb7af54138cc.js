(window.webpackJsonp=window.webpackJsonp||[]).push([[367],{1439:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});var o=t(11),r=t(19),p=t(1),i=t(1),a=t(34),s=t(23),c=t(56),m=t(120),l=t(118),d=t(218),u=t(339),C=t(116),f=t(327),v=function(e){function PersistedComponent(n,t){var o=e.call(this,n,t)||this;return o.cancellation=new a.Cancellation,o.state={},o}return o.__extends(PersistedComponent,e),PersistedComponent.prototype.prepareComponent=function(e){var n=this;this.setState({component:void 0,componentContext:void 0,error:void 0});var t=s.Rdf.iri(e);this.cancellation.map(l.ldpc(d.VocabPlatform.PersistedComponentContainer.value).get(t).flatMap((function(e){try{var n=u.graphToComponent(t,e),o=n.component,p=n.context;return r.fromPromise(renderComponentTree(o)).map((function(e){return{rendered:e,context:p}}))}catch(e){return r.constantError(e)}}))).observe({value:function(e){var t=e.rendered,o=e.context;return n.setState({component:t,componentContext:o})},error:function(e){return n.setState({error:e})}})},PersistedComponent.prototype.componentDidMount=function(){this.prepareComponent(this.props.iri)},PersistedComponent.prototype.componentWillReceiveProps=function(e){this.prepareComponent(e.iri)},PersistedComponent.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},PersistedComponent.prototype.render=function(){var e=this.state,n=e.component,t=e.componentContext,r=e.error;return n?p.createElement(c.SemanticContextProvider,o.__assign({},t.semanticContext),n):r?p.createElement(C.ErrorNotification,{errorMessage:r}):p.createElement(f.Spinner,null)},PersistedComponent}(c.Component);function renderComponentTree(e){var n=e.type,t=e.props,r=e.children;return Promise.all(r.map(renderComponentTree)).then((function(e){return m.ModuleRegistry.isWebComponent(n)?m.ModuleRegistry.renderWebComponent(n,t,e,t.markupTemplateScope):i.createElement.apply(void 0,o.__spreadArrays([n,t],e))}))}n.PersistedComponent=v,n.default=v}}]);
//# sourceMappingURL=mp-persisted-component-9b82bca2cb7af54138cc.js.map