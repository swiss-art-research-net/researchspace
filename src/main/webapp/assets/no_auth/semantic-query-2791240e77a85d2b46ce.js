(window.webpackJsonp=window.webpackJsonp||[]).push([[488],{1311:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(1),o=r(33),s=r(16),a=r(61),u=r(56),p=r(116),l=r(327),c=r(630),m=function(e){function SemanticQuery(t,r){var n=e.call(this,t,r)||this;return n.renderResult=function(e){return function(t){if(a.SparqlUtil.isSelectResultEmpty(t))return i.createElement(c.TemplateItem,{template:{source:n.getNoResultTemplateString()}});var r=t.head.vars[0];return i.createElement(c.TemplateItem,{template:{source:n.getTemplateString(e,r),options:t.results},componentProps:{style:n.props.style,className:n.props.className}})}},n.getTemplateString=function(e,t){if(e)return e;var r=n.props.markupTemplateScope,i=r?r.getPartial("template"):void 0;return i?i.source:"<div>{{#each bindings}}{{#if (isIri "+t+')}}<semantic-link uri="{{'+t+'.value}}"></semantic-link>{{else}}{{'+t+".value}}{{/if}}{{#if @last}}{{else}},&nbsp;{{/if}}{{/each}}</div>"},n.getNoResultTemplateString=function(){if(n.props.noResultTemplate)return n.props.noResultTemplate;var e=n.props.markupTemplateScope,t=e?e.getPartial("noResultTemplate"):void 0;return t?t.source:""},n.executeQuery=function(e,t){n.setState({isLoading:!0,error:void 0});var r=t.semanticContext;a.SparqlClient.select(e.query,{context:r}).onValue((function(e){return n.setState({result:o.Just(e),isLoading:!1})})).onError((function(e){return n.setState({error:e,isLoading:!1})}))},n.state={result:o.Nothing(),isLoading:!0},n}return n.__extends(SemanticQuery,e),SemanticQuery.prototype.componentDidMount=function(){this.executeQuery(this.props,this.context)},SemanticQuery.prototype.shouldComponentUpdate=function(e,t){return t.isLoading!==this.state.isLoading||!s.isEqual(e,this.props)},SemanticQuery.prototype.componentWillReceiveProps=function(e,t){e.query!==this.props.query&&this.executeQuery(e,t)},SemanticQuery.prototype.render=function(){return this.state.isLoading?i.createElement(l.Spinner):this.state.error?i.createElement(p.ErrorNotification,{errorMessage:this.state.error}):this.state.result.map(this.renderResult(this.props.template)).getOrElse(null)},SemanticQuery}(u.Component);t.SemanticQuery=m,t.default=m}}]);
//# sourceMappingURL=semantic-query-2791240e77a85d2b46ce.js.map