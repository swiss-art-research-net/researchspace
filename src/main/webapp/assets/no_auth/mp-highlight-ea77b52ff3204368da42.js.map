{"version":3,"sources":["webpack:///./src/main/web/components/ui/highlight/HighlightComponent.ts"],"names":["render","this","props","children","label","className","style","D","span","highlight","sourceText","highlightedTerm","highlightProps","styles","highlightedTermLower","toLowerCase","startIndex","indexOf","endIndex","length","substring","Component","HighlightComponent"],"mappings":"6IAmBA,OACA,QACA,UAyBA,4C,+CASA,OATwC,kCACtC,6BAAAA,OAAA,WACE,GAAmC,iBAAxBC,KAAKC,MAAMC,SACpB,KAAM,gDAER,IAAMC,EAAQH,KAAKC,MAAMC,SACnB,aAAEE,EAAA,EAAAA,UAAWC,EAAA,EAAAA,MACnB,OAAOC,EAAEC,KAAI,MAAND,EAAC,kBAAM,CAAEF,UAAS,EAAEC,MAAK,IAIpC,SAASG,UACPC,EACAC,EACAC,QAAA,IAAAA,MAAA,CAA+CP,UAAWQ,EAAOJ,YAEjE,GAAIE,EAAiB,CACnB,IAAMG,EAAuBH,EAAgBI,cACvCC,EAAaN,EAAWK,cAAcE,QAAQH,GACpD,GAAIE,GAAc,EAAG,CACnB,IAAME,EAAWF,EAAaF,EAAqBK,OACnD,MAAO,CACLT,EAAWU,UAAU,EAAGJ,GACxBT,EAAEC,KAAKI,EAAgBF,EAAWU,UAAUJ,EAAYE,IACxDR,EAAWU,UAAUF,KAI3B,MAAO,CAACR,GArBiCD,CAAUL,EAAOH,KAAKC,MAAMO,UAAWR,KAAKC,MAAMU,mBAE7F,mBATA,CAAwC,EAAAS,WAA3B,EAAAC,qBA+Bb,UAAeA","file":"mp-highlight-ea77b52ff3204368da42.js","sourcesContent":["/**\n * ResearchSpace\n * Copyright (C) 2020, Â© Trustees of the British Museum\n * Copyright (C) 2015-2019, metaphacts GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { Component, CSSProperties, ReactElement, ReactNode, HTMLProps } from 'react';\nimport * as D from 'react-dom-factories';\nimport * as styles from './HighlightComponent.scss';\n\nexport interface Props {\n  /**\n   * Additional class names for component root element\n   */\n  className?: string;\n  /**\n   * Additional styles for label element\n   */\n  style?: CSSProperties;\n  /**\n   * Substring to highlight\n   */\n  highlight?: string;\n  /**\n   * Props for highlighted substring span\n   */\n  highlightProps?: HTMLProps<HTMLSpanElement>;\n}\n\n/**\n * @example\n * <mp-highlight highlight=\"text\">some text here</mp-highlight>\n */\nexport class HighlightComponent extends Component<Props, {}> {\n  render(): ReactElement<any> {\n    if (typeof this.props.children !== 'string') {\n      throw 'Children of HighlightComponent must be string';\n    }\n    const label = this.props.children;\n    const { className, style } = this.props;\n    return D.span({ className, style }, ...highlight(label, this.props.highlight, this.props.highlightProps));\n  }\n}\n\nfunction highlight(\n  sourceText: string,\n  highlightedTerm: string,\n  highlightProps: HTMLProps<HTMLSpanElement> = { className: styles.highlight }\n): ReactNode[] {\n  if (highlightedTerm) {\n    const highlightedTermLower = highlightedTerm.toLowerCase();\n    const startIndex = sourceText.toLowerCase().indexOf(highlightedTermLower);\n    if (startIndex >= 0) {\n      const endIndex = startIndex + highlightedTermLower.length;\n      return [\n        sourceText.substring(0, startIndex),\n        D.span(highlightProps, sourceText.substring(startIndex, endIndex)),\n        sourceText.substring(endIndex),\n      ];\n    }\n  }\n  return [sourceText];\n}\n\nexport default HighlightComponent;\n"],"sourceRoot":""}