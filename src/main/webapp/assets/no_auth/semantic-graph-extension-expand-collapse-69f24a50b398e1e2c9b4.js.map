{"version":3,"sources":["webpack:///./src/main/web/components/semantic/graph/extensions/CytoscapeExpandCollapse.ts"],"names":["EXPAND_COLLAPSE_DEFAULTS","fisheye","animate","undoable","collapseByDefault","CytoscapeExpandCollapse","registerCytoscapeExtension","name","type","registrationFn","registerExpandCollapseExtension","api","expand_collapse","cytoscape","jQuery","initializationFn","initializeExpandCollapseExtension","options","cytoscapeApi","cy","instance","expandCollapseOptions","assign","layoutBy","actions","runLayout","expandCollapse","on","DATA_LOADED_EVENT","collapseAll","maybe","Just"],"mappings":"iIAmBA,YACA,SACA,UAEA,UAQMA,EAA2B,CAC/BC,SAAS,EACTC,SAAS,EACTC,UAAU,EACVC,mBAAmB,GA8FR,EAAAC,wBAA0B,EAAAC,2BAA2B,CAChEC,KAAM,iBACNC,KAAM,OACNC,eA1FF,SAASC,gCAAgCC,GACvCC,EAAgBD,EAAIE,UAAWF,EAAIG,SA0FnCC,iBAvFF,SAASC,kCAAkC,G,IACzCC,EAAA,EAAAA,QACAC,EAAA,EAAAA,aAEMC,EAAKD,EAAaE,SAClBC,EAAwBC,EAC5B,CACEC,SAAU,WAAM,OAAAL,EAAaM,QAAQC,cAEvCzB,EACAiB,GAGIG,EAAWD,EAAGO,eAAeL,GAInC,OAHIA,EAAsBjB,mBACxBe,EAAGQ,GAAG,EAAAC,mBAAmB,WAAM,OAAAR,EAASS,iBAEnCC,EAAMC,KAAyBX,MAwExC,UAAe,EAAAf","file":"semantic-graph-extension-expand-collapse-69f24a50b398e1e2c9b4.js","sourcesContent":["/**\n * ResearchSpace\n * Copyright (C) 2020, Â© Trustees of the British Museum\n * Copyright (C) 2015-2019, metaphacts GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport * as maybe from 'data.maybe';\nimport * as assign from 'object-assign';\nimport * as expand_collapse from 'cytoscape-expand-collapse';\n\nimport {\n  DATA_LOADED_EVENT,\n  ContextCytoscapeApi,\n  registerCytoscapeExtension,\n  CytoscapeExtension,\n  ExtensionContext,\n} from '../api/Api';\n\nconst EXPAND_COLLAPSE_DEFAULTS = {\n  fisheye: true,\n  animate: false,\n  undoable: false,\n  collapseByDefault: true,\n};\n\nexport interface Config extends Cy.ExpandCollapse.Options {\n  collapseByDefault: boolean;\n}\n\nfunction registerExpandCollapseExtension(api: ContextCytoscapeApi) {\n  expand_collapse(api.cytoscape, api.jQuery);\n}\n\nfunction initializeExpandCollapseExtension({\n  options,\n  cytoscapeApi,\n}: ExtensionContext<Config>): Data.Maybe<CytoscapeExtension> {\n  const cy = cytoscapeApi.instance;\n  const expandCollapseOptions = assign(\n    {\n      layoutBy: () => cytoscapeApi.actions.runLayout(),\n    },\n    EXPAND_COLLAPSE_DEFAULTS,\n    options\n  );\n\n  const instance = cy.expandCollapse(expandCollapseOptions);\n  if (expandCollapseOptions.collapseByDefault) {\n    cy.on(DATA_LOADED_EVENT, () => instance.collapseAll());\n  }\n  return maybe.Just<CytoscapeExtension>(instance);\n}\n\n/**\n * This extension provides an interface to expand/collapse nodes for better management of complexity of `semantic-graph` compound nodes\n */\nexport interface SemanticGraphExpandCollapseExtensionConfig {\n  /**\n   * Whether to perform fisheye view after expand/collapse\n   *\n   * @default true\n   */\n  fisheye?: boolean;\n\n  /**\n   * Whether to animate on drawing changes\n   *\n   * @default true\n   */\n  animate?: boolean;\n\n  /**\n   * Whether cues are enabled\n   *\n   * @default true\n   */\n  cueEnabled?: boolean;\n\n  /**\n   * Size of the expand-collapse cue\n   *\n   * @default 12\n   */\n  expandCollapseCueSize?: number;\n\n  /**\n   * Size of lines used for drawing plus-minus icons\n   *\n   * @default 8\n   */\n  expandCollapseCueLineSize?: number;\n\n  /**\n   * Image of the expand icon\n   */\n  expandCueImage?: string;\n\n  /**\n   * Image of the collapse icon\n   *\n   */\n  collapseCueImage?: string;\n\n  /**\n   * Sensitivity of the expand-collapse cues\n   *\n   * @default 1\n   */\n  expandCollapseCueSensitivity?: number;\n}\n\n/**\n * Initialize Cytoscape Expand-Collapse extension.\n *\n * @see https://github.com/iVis-at-Bilkent/cytoscape.js-expand-collapse\n */\nexport const CytoscapeExpandCollapse = registerCytoscapeExtension({\n  name: 'expandCollapse',\n  type: 'core',\n  registrationFn: registerExpandCollapseExtension,\n  initializationFn: initializeExpandCollapseExtension,\n});\nexport default CytoscapeExpandCollapse;\n"],"sourceRoot":""}