(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1846:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),i=r(19),o=r(224),a=r(142),u=function u(){};e.Region=u,function(t){var e=function(t){function Full(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(Full,t),Full.prototype.toString=function(){return"full"},Full}(t);t.Full=e;var r=function(t){function Rectangular(e,r,n,i){var o=t.call(this)||this;return o.x=e,o.y=r,o.width=n,o.height=i,o}return n.__extends(Rectangular,t),Rectangular.prototype.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},Rectangular}(t),i=function(t){function Absolute(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(Absolute,t),Absolute}(r);t.Absolute=i;var o=function(t){function Percent(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(Percent,t),Percent.prototype.toString=function(){return"pct:"+t.prototype.toString.call(this)},Percent}(r);t.Percent=o,t.full=new e}(u=e.Region||(e.Region={})),e.Region=u;var l=function l(){};e.Size=l,function(t){var e=function(t){function Full(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(Full,t),Full.prototype.toString=function(){return"full"},Full}(t);t.Full=e;var r=function(t){function Rectangular(e,r){var n=t.call(this)||this;return n.width=e,n.height=r,n}return n.__extends(Rectangular,t),Rectangular.prototype.toString=function(){return(this.width?this.width:"")+","+(this.height?this.height:"")},Rectangular}(t),i=function(t){function Absolute(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(Absolute,t),Absolute}(r);t.Absolute=i;var o=function(t){function BestFit(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(BestFit,t),BestFit.prototype.toString=function(){return"!"+t.prototype.toString.call(this)},BestFit}(r);t.BestFit=o;var a=function(t){function Percent(e){var r=t.call(this)||this;return r.scale=e,r}return n.__extends(Percent,t),Percent.prototype.toString=function(){return"pct:"+this.scale},Percent}(t);t.Percent=a,t.full=new e}(l=e.Size||(e.Size={})),e.Size=l;var s,c=function c(){};function constructInformationRequestUri(t,e){return constructServiceRequestUri(t,e)+"/info.json"}function constructServiceRequestUri(t,e){return t+"/"+e}e.Rotation=c,function(t){var e=function(t){function Degrees(e){var r=t.call(this)||this;return r.angle=e,r}return n.__extends(Degrees,t),Degrees.prototype.toString=function(){return""+this.angle},Degrees}(t),r=function(t){function Clockwise(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(Clockwise,t),Clockwise}(e);t.Clockwise=r;var i=function(t){function MirrorThenClockwise(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(MirrorThenClockwise,t),MirrorThenClockwise.prototype.toString=function(){return"!"+t.prototype.toString.call(this)},MirrorThenClockwise}(e);t.MirrorThenClockwise=i,t.zero=new r(0)}(c=e.Rotation||(e.Rotation={})),e.Rotation=c,function(t){t[t.Color=0]="Color",t[t.Gray=1]="Gray",t[t.Bitonal=2]="Bitonal",t[t.Default=3]="Default"}(s=e.Quality||(e.Quality={})),e.constructImageUri=function constructImageUri(t,e){var r=e.region||u.full,n=e.size||l.full,i=e.rotation||c.zero,o=s[e.quality||s.Default].toLowerCase(),a=e.format,g=t+"/"+e.imageId+"/"+r+"/"+n+"/"+i+"/"+o;return"auto"!==e.format&&(g=g+"."+a),g},e.constructInformationRequestUri=constructInformationRequestUri,e.constructServiceRequestUri=constructServiceRequestUri,e.queryImageBounds=function queryImageBounds(t,e){var r=constructInformationRequestUri(t,e);return i.fromNodeCallback((function(t){o.get(r).accept("application/ld+json").end((function(e,r){if(e)t(e);else{var n=JSON.parse(r.text);t(e,n)}}))})).toProperty()},e.getIIIFServerUrl=function getIIIFServerUrl(t){return a(t).absoluteTo(window.location.href).toString()}},1847:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n,i,o=r(11),a=r(16),u=r(19),l=r(33),s=r(61),c=r(23),g=r(34),_=s.SparqlUtil.Sparql(n||(n=o.__makeTemplateObject(['\n  prefix rso: <http://www.researchspace.org/ontology/>\n  prefix crmdig: <http://www.ics.forth.gr/isl/CRMdig/>\n\n  select ?type ?imageID ?area ?bbox ?viewport ?svg ?imageIRI {\n    OPTIONAL {\n      ?__iri__ a rso:EX_Digital_Image .\n      BIND("image" AS ?type)\n      BIND(?__iri__ as ?imageIRI)\n    }\n    OPTIONAL {\n      ?__iri__ a rso:EX_Digital_Image_Region;\n            rdf:value ?svg.\n      ?__iri__ crmdig:L49_is_primary_area_of ?imageIRI .\n      BIND("region" AS ?type)\n      OPTIONAL { ?__iri__ rso:boundingBox ?bbox }\n      OPTIONAL { ?__iri__ rso:viewport ?viewport }\n    }\n    FILTER(?__imageIdPattern__)\n  }\n'],['\n  prefix rso: <http://www.researchspace.org/ontology/>\n  prefix crmdig: <http://www.ics.forth.gr/isl/CRMdig/>\n\n  select ?type ?imageID ?area ?bbox ?viewport ?svg ?imageIRI {\n    OPTIONAL {\n      ?__iri__ a rso:EX_Digital_Image .\n      BIND("image" AS ?type)\n      BIND(?__iri__ as ?imageIRI)\n    }\n    OPTIONAL {\n      ?__iri__ a rso:EX_Digital_Image_Region;\n            rdf:value ?svg.\n      ?__iri__ crmdig:L49_is_primary_area_of ?imageIRI .\n      BIND("region" AS ?type)\n      OPTIONAL { ?__iri__ rso:boundingBox ?bbox }\n      OPTIONAL { ?__iri__ rso:viewport ?viewport }\n    }\n    FILTER(?__imageIdPattern__)\n  }\n']))),p=s.SparqlUtil.Sparql(i||(i=o.__makeTemplateObject(['\nselect ?type ?imageID ?area ?bbox ?viewport ?svg ?imageIRI {\n  BIND(?__iri__ as ?imageIRI) .\n  BIND("region" AS ?type)\n  FILTER(?__imageIdPattern__)\n}\n'],['\nselect ?type ?imageID ?area ?bbox ?viewport ?svg ?imageIRI {\n  BIND(?__iri__ as ?imageIRI) .\n  BIND("region" AS ?type)\n  FILTER(?__imageIdPattern__)\n}\n'])));function parseImageSubarea(t){if(!t)return l.Nothing();var e=/^xywh=([^,]+),([^,]+),([^,]+),([^,]+)$/.exec(t);return e?l.Just({x:parseFloat(e[1]),y:parseFloat(e[2]),width:parseFloat(e[3]),height:parseFloat(e[4])}):l.Nothing()}e.queryIIIFImageOrRegion=function queryIIIFImageOrRegion(t,e,r,n){return function searchRepositoriesForImage(t,e,r,n){return u.combine(r.map((function(r){return function getImageBindings(t,e,r,n){var i,o;i=n?s.SparqlClient.prepareParsedQuery([{bbox:c.Rdf.literal(n.bbox),viewport:c.Rdf.literal(n.viewport),svg:c.Rdf.literal(n.svg)}])(s.cloneQuery(p)):s.cloneQuery(_);try{o=s.SparqlUtil.parsePatterns(e,i.prefixes)}catch(t){return u.constantError(new g.WrappingError("Failed to parse image ID patterns '"+e+"':",t))}new s.PatternBinder("__imageIdPattern__",o).sparqlQuery(i);var a=s.SparqlClient.setBindings(i,{__iri__:t});return s.SparqlClient.select(a,{context:{repository:r}})}(t,e,r,n)}))).flatMap((function(e){var r=a.filter(e,(function(t){return!s.SparqlUtil.isSelectResultEmpty(t)}));return a.isEmpty(r)?u.constantError("Image or region "+t+" not found."):r.length>1?u.constantError("Multiple images and/or regions "+t+" found."):u.constant(r[0].results.bindings)}))}(t,e,r,n).flatMap((function(r){var n=r[0],i=n.type,o=n.imageIRI,a=n.imageID;if(!i||!o.isIri())return u.constantError("Image or region "+t+" not found.");if(!a||a.value.indexOf("/")>=0)return u.constantError("Invalid image ID '"+a.value+"' generated from "+o+" using pattern: "+e);if("image"===i.value)return u.constant({iri:t,imageId:a.value,isRegion:!1,imageIRI:o});if("region"===i.value){var s=l.fromNullable(n.viewport).chain((function(t){return parseImageSubarea(t.value)})),c=l.fromNullable(n.bbox).chain((function(t){return parseImageSubarea(t.value)})),g=l.fromNullable(n.svg).map((function(t){return{__html:t.value}}));return u.constant({iri:t,imageId:a.value,isRegion:!0,viewport:s.getOrElse(void 0),boundingBox:c.getOrElse(void 0),svgContent:g.getOrElse(void 0),imageIRI:o})}})).toProperty()},e.parseImageSubarea=parseImageSubarea}}]);
//# sourceMappingURL=default~rs-iiif-image-thumbnail~rs-iiif-mirador~rs-iiif-overlay~rs-iiif-overlay-action~rs-iiif-side-~51a689bb-d22af72fca7dd72206ab.js.map