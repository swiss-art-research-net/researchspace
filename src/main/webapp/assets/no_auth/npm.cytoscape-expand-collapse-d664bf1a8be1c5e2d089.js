(window.webpackJsonp=window.webpackJsonp||[]).push([[392],{2223:function(e,t){e.exports=function elementUtilities(e){return{moveNodes:function(e,t,n){for(var o=n?t:this.getTopMostNodes(t),a=0;a<o.length;a++){var i=o[a],r=i.position("x"),s=i.position("y");i.position({x:r+e.x,y:s+e.y});var l=i.children();this.moveNodes(e,l,!0)}},getTopMostNodes:function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;return e.filter((function(e,n){"number"==typeof e&&(e=n);for(var o=e.parent()[0];null!=o;){if(t[o.id()])return!1;o=o.parent()[0]}return!0}))},rearrange:function(t){if("function"==typeof t)t();else if(null!=t){var n=e.layout(t);n&&n.run&&n.run()}},convertToRenderedPosition:function(t){var n=e.pan(),o=e.zoom();return{x:t.x*o+n.x,y:t.y*o+n.y}}}}},2916:function(e,t,n){(function(o,a){var i;!function(){"use strict";var register=function(e,t){if(e){var o=n(2917),a=n(2918);e("core","expandCollapse",(function(e){var i=this,r=getScratch(i,"options")||{layoutBy:null,fisheye:!0,animate:!0,ready:function(){},undoable:!0,cueEnabled:!0,expandCollapseCuePosition:"top-left",expandCollapseCueSize:12,expandCollapseCueLineSize:8,expandCueImage:void 0,collapseCueImage:void 0,expandCollapseCueSensitivity:1};if("get"!==e){r=extendOptions(r,e);var s=createExtensionAPI(i,n(2920)(i));setScratch(i,"api",s),o(i,s),r.cueEnabled&&a(r,i,s,t),r.ready(),setScratch(i,"options",r)}return getScratch(i,"api")}))}function extendOptions(e,t){var n={};for(var o in e)n[o]=e[o];for(var o in t)n.hasOwnProperty(o)&&(n[o]=t[o]);return n}function evalOptions(e){var t="function"==typeof e.animate?e.animate.call():e.animate,n="function"==typeof e.fisheye?e.fisheye.call():e.fisheye;e.animate=t,e.fisheye=n}function createExtensionAPI(e,t){var n={setOptions:function(t){setScratch(e,"options",options)},setOption:function(t,n){getScratch(e,"options")[t]=n},collapse:function(n,o){var a=this.collapsibleNodes(n),i=extendOptions(getScratch(e,"options"),o);return evalOptions(i),t.collapseGivenNodes(a,i)},collapseRecursively:function(t,n){var o=this.collapsibleNodes(t),a=extendOptions(getScratch(e,"options"),n);return evalOptions(a),this.collapse(o.union(o.descendants()),a)},expand:function(n,o){var a=this.expandableNodes(n),i=extendOptions(getScratch(e,"options"),o);return evalOptions(i),t.expandGivenNodes(a,i)},expandRecursively:function(n,o){var a=this.expandableNodes(n),i=extendOptions(getScratch(e,"options"),o);return evalOptions(i),t.expandAllNodes(a,i)},collapseAll:function(t){var n=extendOptions(getScratch(e,"options"),t);return evalOptions(n),this.collapseRecursively(this.collapsibleNodes(),n)},expandAll:function(t){var n=extendOptions(getScratch(e,"options"),t);return evalOptions(n),this.expandRecursively(this.expandableNodes(),n)},isExpandable:function(e){return e.hasClass("cy-expand-collapse-collapsed-node")},isCollapsible:function(e){return!this.isExpandable(e)&&e.isParent()},collapsibleNodes:function(t){var n=this;return(t||e.nodes()).filter((function(e,t){return"number"==typeof e&&(e=t),n.isCollapsible(e)}))},expandableNodes:function(t){var n=this;return(t||e.nodes()).filter((function(e,t){return"number"==typeof e&&(e=t),n.isExpandable(e)}))},getCollapsedChildren:function(e){return e.data("collapsedChildren")},getCollapsedChildrenRecursively:function(n){var o=e.collection();return t.getCollapsedChildrenRecursively(n,o)},getAllCollapsedChildrenRecursively:function(){var t,n=e.collection(),o=e.nodes(".cy-expand-collapse-collapsed-node");for(t=0;t<o.length;t++)n=n.union(this.getCollapsedChildrenRecursively(o[t]));return n},clearVisualCue:function(t){e.trigger("expandcollapse.clearvisualcue")}};return n}function getScratch(e,t){void 0===e.scratch("_cyExpandCollapse")&&e.scratch("_cyExpandCollapse",{});var n=e.scratch("_cyExpandCollapse");return void 0===t?n:n[t]}function setScratch(e,t,n){getScratch(e)[t]=n}};e.exports&&(e.exports=register),void 0===(i=function(){return register}.call(t,n,t,e))||(e.exports=i),void 0!==o&&void 0!==a&&register(o,a)}()}).call(this,n(1734),n(1733))},2917:function(e,t){e.exports=function(e,t){if(null!=e.undoRedo)for(var n=e.undoRedo({},!0),o={layoutBy:null,animate:!1,fisheye:!1},a=["collapse","collapseRecursively","collapseAll","expand","expandRecursively","expandAll"],i=0;i<a.length;i++)n.action(a[i],doIt(a[i]),doIt(a[(i+3)%6]));function getNodePositions(){for(var t={},n=e.nodes(),o=0;o<n.length;o++){var a=n[o];t[a.id()]={x:a.position("x"),y:a.position("y")}}return t}function doIt(n){return function(a){var i={},r=function getEles(t){return"string"==typeof t?e.$(t):t}(a.nodes);return a.firstTime?(i.oldData=getNodePositions(),i.nodes=n.indexOf("All")>0?t[n](a.options):t[n](r,a.options)):(i.oldData=getNodePositions(),i.nodes=n.indexOf("All")>0?t[n](o):t[n](e.collection(r),o),function returnToPositions(t){var n={};return e.nodes().positions((function(e,o){"number"==typeof e&&(e=o),n[e.id()]={x:e.position("x"),y:e.position("y")};var a=t[e.id()];return{x:a.x,y:a.y}})),n}(a.oldData)),i}}}},2918:function(e,t,n){var o=n(2919);e.exports=function(e,t,a,i){var r,s,l,d,p,c,u,f,h,v,x=e,y=!1,g={init:function(){var c=e,f=this,h=i("<canvas></canvas>");r=n(2223)(t),f.append(h);var x=o((function(){h.attr("height",f.height()).attr("width",f.width()).css({position:"absolute",top:0,left:0,"z-index":"999"}),setTimeout((function(){var e=h.offset(),n=f.offset();h.css({top:-(e.top-n.top),left:-(e.left-n.left)}),t&&clearDraws()}),0)}),250);function sizeCanvas(){x()}sizeCanvas(),i(window).bind("resize",(function(){sizeCanvas()}));var g,m=h[0].getContext("2d"),b=f.data("cyexpandcollapse");function options(){return g||(g=f.data("cyexpandcollapse").options)}function clearDraws(){var e=f.width(),t=f.height();m.clearRect(0,0,e,t)}function drawExpandCollapseCue(e){var n=e.children(),o=e._private.data.collapsedChildren;if(null!=n&&n.length>0||null!=o){var a,i,s,l,d,p,c,u=e.hasClass("cy-expand-collapse-collapsed-node"),f=options().expandCollapseCueSize,h=options().expandCollapseCueLineSize;if("top-left"===options().expandCollapseCuePosition){var x=t.zoom()<1?f/(2*t.zoom()):f/2;c={x:e.position("x")-e.width()/2-parseFloat(e.css("padding-left"))+parseFloat(e.css("border-width"))+x+1,y:e.position("y")-e.height()/2-parseFloat(e.css("padding-top"))+parseFloat(e.css("border-width"))+x+1}}else{var y=options().expandCollapseCuePosition;c="function"==typeof y?y.call(this,e):y}var g=r.convertToRenderedPosition(c);if(a=((f=Math.max(f,f*t.zoom()))-(h=Math.max(h,h*t.zoom())))/2,(i=(d=g.x)-f/2)+f,(s=(p=g.y)-f/2)+f,l=f,!u&&options().expandCueImage)(b=new Image).src=options().expandCueImage,m.drawImage(b,d,p,f,f);else if(u&&options().collapseCueImage){var b;(b=new Image).src=options().collapseCueImage,m.drawImage(b,d,p,f,f)}else{var C=m.fillStyle,w=m.lineWidth,N=m.strokeStyle;m.fillStyle="black",m.strokeStyle="black",m.ellipse(d,p,f/2,f/2,0,0,2*Math.PI),m.fill(),m.beginPath(),m.strokeStyle="white",m.lineWidth=Math.max(2.6,2.6*t.zoom()),m.moveTo(i+a,s+f/2),m.lineTo(i+h+a,s+f/2),u&&(m.moveTo(i+f/2,s+a),m.lineTo(i+f/2,s+h+a)),m.closePath(),m.stroke(),m.strokeStyle=N,m.fillStyle=C,m.lineWidth=w}e._private.data.expandcollapseRenderedStartX=i,e._private.data.expandcollapseRenderedStartY=s,e._private.data.expandcollapseRenderedCueSize=l,v=e}}null==b&&(b={}),b.options=c,t.on("expandcollapse.clearvisualcue",(function(){v&&clearDraws()})),t.bind("zoom pan",u=function(){v&&clearDraws()});t.on("mousemove",(function(e){!function(e,t){if(e){var n=t.position||t.cyPosition,o={x:e.position("x")-e.width()/2-parseFloat(e.css("padding-left")),y:e.position("y")-e.height()/2-parseFloat(e.css("padding-top"))},a={x:e.position("x")+e.width()/2+parseFloat(e.css("padding-right")),y:e.position("y")+e.height()/2+parseFloat(e.css("padding-bottom"))};if(n.x>=o.x&&n.y>=o.y&&n.x<=a.x&&n.y<=a.y)return!0}return!1}(v,e)?clearDraws():v&&!y&&drawExpandCollapseCue(v)})),t.on("mouseover","node",s=function(e){(a.isCollapsible(this)||a.isExpandable(this))&&(v&&v.id()!=this.id()&&clearDraws(),drawExpandCollapseCue(this))});var C,w=null,N=null;t.on("mousedown",(function(e){w=e.renderedPosition||e.cyRenderedPosition})),t.on("mouseup",(function(e){N=e.renderedPosition||e.cyRenderedPosition})),t.on("grab","node",l=function(e){y=!0}),t.on("free","node",l=function(e){y=!1}),t.on("position","node",d=function(){v&&clearDraws()}),t.on("remove","node",p=function(){clearDraws(),v=null}),t.on("select","node",(function(){this.length>t.nodes(":selected").length&&this.unselect()})),t.on("tap",Tap=function(e){var n=v;if(n){var o=n._private.data.expandcollapseRenderedStartX,i=n._private.data.expandcollapseRenderedStartY,r=n._private.data.expandcollapseRenderedCueSize,s=o+r,l=i+r,d=e.renderedPosition||e.cyRenderedPosition,p=d.x,u=d.y,f=(options().expandCollapseCueSensitivity-1)/2;Math.abs(w.x-N.x)<5&&Math.abs(w.y-N.y)<5&&p>=o-r*f&&p<=s+r*f&&u>=i-r*f&&u<=l+r*f&&(c.undoable&&!C&&(C=t.undoRedo({defaultActions:!1})),a.isCollapsible(n)?c.undoable?C.do("collapse",{nodes:n,options:c}):a.collapse(n,c):a.isExpandable(n)&&(c.undoable?C.do("expand",{nodes:n,options:c}):a.expand(n,c)))}}),f.data("cyexpandcollapse",b)},unbind:function(){var e=this.cytoscape("get");e.off("mouseover","node",s).off("mouseout tapdragout","node",l).off("position","node",d).off("remove","node",p).off("tap","node",c).off("add","node",f).off("free","node",h),e.unbind("zoom pan",u)}};return g[x]?g[x].apply(i(t.container()),Array.prototype.slice.call(arguments,1)):"object"!=typeof x&&x?(i.error("No such function `"+x+"` for cytoscape.js-expand-collapse"),i(this)):g.init.apply(i(t.container()),arguments)}},2919:function(e,t){var n,o,a=(n=Math.max,o=Date.now||function(){return(new Date).getTime()},function a(e,t,i){var r,s,l,d,p,c,u,f=0,h=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=t<0?0:+t||0,!0===i){var x=!0;v=!1}else(function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)})(i)&&(x=!!i.leading,h="maxWait"in i&&n(+i.maxWait||0,t),v="trailing"in i?!!i.trailing:v);function complete(t,n){n&&clearTimeout(n),s=c=u=void 0,t&&(f=o(),l=e.apply(p,r),c||s||(r=p=void 0))}function delayed(){var e=t-(o()-d);e<=0||e>t?complete(u,s):c=setTimeout(delayed,e)}function maxDelayed(){complete(v,c)}function debounced(){if(r=arguments,d=o(),p=this,u=v&&(c||!x),!1===h)var n=x&&!c;else{s||x||(f=d);var a=h-(d-f),i=a<=0||a>h;i?(s&&(s=clearTimeout(s)),f=d,l=e.apply(p,r)):s||(s=setTimeout(maxDelayed,a))}return i&&c?c=clearTimeout(c):c||t===h||(c=setTimeout(delayed,t)),n&&(i=!0,l=e.apply(p,r)),!i||c||s||(r=p=void 0),l}return debounced.cancel=function cancel(){c&&clearTimeout(c),s&&clearTimeout(s),f=0,s=c=u=void 0},debounced});e.exports=a},2920:function(e,t,n){var o=n(2921);e.exports=function expandCollapseUtilities(e){var t=n(2223)(e);return{animatedlyMovingNodeCount:0,expandNodeBaseFunction:function(e,n,o){if(e._private.data.collapsedChildren){var a={x:e._private.position.x-e._private.data["position-before-collapse"].x,y:e._private.position.y-e._private.data["position-before-collapse"].y};e.removeData("infoLabel"),e.removeClass("cy-expand-collapse-collapsed-node"),e.trigger("expandcollapse.beforeexpand"),e._private.data.collapsedChildren.restore(),this.repairEdges(e),e._private.data.collapsedChildren=null,t.moveNodes(a,e.children()),e.removeData("position-before-collapse"),e.trigger("position"),e.trigger("expandcollapse.afterexpand"),n&&this.endOperation(o)}},simpleCollapseGivenNodes:function(e){e.data("collapse",!0);for(var n=t.getTopMostNodes(e),o=0;o<n.length;o++){var a=n[o];this.collapseBottomUp(a)}return e},simpleExpandGivenNodes:function(e,n){e.data("expand",!0);for(var o=t.getTopMostNodes(e),a=0;a<o.length;a++){var i=o[a];this.expandTopDown(i,n)}return e},simpleExpandAllNodes:function(n,o){var a;void 0===n&&(n=e.nodes()),a=t.getTopMostNodes(n);for(var i=[],r=0;r<a.length;r++){var s=a[r];this.expandAllTopDown(s,i,o)}return i},endOperation:function(n){e.ready((function(){setTimeout((function(){t.rearrange(n)}),0)}))},expandAllNodes:function(e,t){var n=this.simpleExpandAllNodes(e,t.fisheye);return this.endOperation(t.layoutBy),n},expandAllTopDown:function(e,t,n){null!=e._private.data.collapsedChildren&&(t.push(e),this.expandNode(e,n));for(var o=e.children(),a=0;a<o.length;a++){var i=o[a];this.expandAllTopDown(i,t,n)}},expandGivenNodes:function(e,t){if(1===e.length){var n=e[0];null!=n._private.data.collapsedChildren&&this.expandNode(n,t.fisheye,!0,t.animate,t.layoutBy)}else this.simpleExpandGivenNodes(e,t.fisheye),this.endOperation(t.layoutBy);return e},collapseGivenNodes:function(t,n){return e.startBatch(),this.simpleCollapseGivenNodes(t,n),e.endBatch(),t.trigger("position"),this.endOperation(n.layoutBy),e.style().update(),t},collapseBottomUp:function(e){for(var t=e.children(),n=0;n<t.length;n++){var o=t[n];this.collapseBottomUp(o)}e.data("collapse")&&e.children().length>0&&(this.collapseNode(e),e.removeData("collapse"))},expandTopDown:function(e,t){e.data("expand")&&null!=e._private.data.collapsedChildren&&(this.expandNode(e,t),e.removeData("expand"));for(var n=e.children(),o=0;o<n.length;o++){var a=n[o];this.expandTopDown(a)}},convertToModelPosition:function(t){var n=e.pan(),o=e.zoom();return{x:(t.x-n.x)/o,y:(t.y-n.y)/o}},expandNode:function(t,n,a,i,r){var s=this,commonExpandOperation=function(e,t,n,o,a){t&&(e._private.data["width-before-fisheye"]=e._private.data["size-before-collapse"].w,e._private.data["height-before-fisheye"]=e._private.data["size-before-collapse"].h,s.fishEyeViewExpandGivenNode(e,n,e,o,a)),n&&t&&o||s.expandNodeBaseFunction(e,n,a)};if(null!=t._private.data.collapsedChildren){this.storeWidthHeight(t);var l=!1;if(n&&a){var d=this.convertToModelPosition({x:0,y:0}),p=this.convertToModelPosition({x:e.width(),y:e.height()}),c={x1:d.x,x2:p.x,y1:d.y,y2:p.y},u={x1:t._private.position.x-t._private.data["size-before-collapse"].w/2-80,x2:t._private.position.x+t._private.data["size-before-collapse"].w/2+80,y1:t._private.position.y-t._private.data["size-before-collapse"].h/2-80,y2:t._private.position.y+t._private.data["size-before-collapse"].h/2+80},f=o.getUnion(u,c);if(!o.equalBoundingBoxes(f,c)){var h=e.getFitViewport(f,10);s=this;l=i,i?e.animate({pan:h.pan,zoom:h.zoom,complete:function(){commonExpandOperation(t,n,a,i,r)}},{duration:1e3}):(e.zoom(h.zoom),e.pan(h.pan))}}return l||commonExpandOperation(t,n,a,i,r),t}},collapseNode:function(e){if(null==e._private.data.collapsedChildren){e.data("position-before-collapse",{x:e.position().x,y:e.position().y}),e.data("size-before-collapse",{w:e.outerWidth(),h:e.outerHeight()});var t=e.children();return t.unselect(),t.connectedEdges().unselect(),e.trigger("expandcollapse.beforecollapse"),this.barrowEdgesOfcollapsedChildren(e),this.removeChildren(e,e),e.addClass("cy-expand-collapse-collapsed-node"),e.trigger("expandcollapse.aftercollapse"),e.position(e.data("position-before-collapse")),e}},storeWidthHeight:function(e){null!=e&&(e._private.data["x-before-fisheye"]=this.xPositionInParent(e),e._private.data["y-before-fisheye"]=this.yPositionInParent(e),e._private.data["width-before-fisheye"]=e.outerWidth(),e._private.data["height-before-fisheye"]=e.outerHeight(),null!=e.parent()[0]&&this.storeWidthHeight(e.parent()[0]))},fishEyeViewExpandGivenNode:function(e,t,n,o,a){var i=this.getSiblings(e),r=this.xPositionInParent(e),s=this.yPositionInParent(e),l=Math.abs((e._private.data["width-before-fisheye"]-e.outerWidth())/2),d=Math.abs((e._private.data["width-before-fisheye"]-e.outerWidth())/2),p=Math.abs((e._private.data["height-before-fisheye"]-e.outerHeight())/2),c=Math.abs((e._private.data["height-before-fisheye"]-e.outerHeight())/2),u=Math.abs(e._private.data["x-before-fisheye"]-r),f=Math.abs(e._private.data["y-before-fisheye"]-s);e._private.data["x-before-fisheye"]>r?(l+=u,d-=u):(l-=u,d+=u),e._private.data["y-before-fisheye"]>s?(p+=f,c-=f):(p-=f,c+=f);for(var h=[],v=[],x=0;x<i.length;x++)h.push(this.xPositionInParent(i[x])),v.push(this.yPositionInParent(i[x]));for(x=0;x<i.length;x++){var y=i[x],g=h[x],m=v[x],b=(m-s)/(g-r),C=0,w=0,N=0,_=0;C=r>g?l:d,w=s>m?p:c,isFinite(b)&&(N=Math.min(C,w/Math.abs(b))),0!==b&&(_=Math.min(w,C*Math.abs(b))),r>g&&(N*=-1),s>m&&(_*=-1),this.fishEyeViewMoveNode(y,N,_,n,t,o,a)}return 0==i.length&&this.expandNodeBaseFunction(n,t,a),null!=e.parent()[0]&&this.fishEyeViewExpandGivenNode(e.parent()[0],t,n,o,a),e},getSiblings:function(t){var n;null==t.parent()[0]?n=e.nodes(":visible").orphans().difference(t):n=t.siblings(":visible");return n},fishEyeViewMoveNode:function(e,t,n,o,a,i,r){var s=e.children(":visible"),l=this;if(0==s.length){var d={x:e._private.position.x+t,y:e._private.position.y+n};a&&i?(this.animatedlyMovingNodeCount++,e.animate({position:d,complete:function(){l.animatedlyMovingNodeCount--,l.animatedlyMovingNodeCount>0||!o.hasClass("cy-expand-collapse-collapsed-node")||l.expandNodeBaseFunction(o,a,r)}},{duration:1e3})):(e._private.position.x=d.x,e._private.position.y=d.y)}else for(var p=0;p<s.length;p++)this.fishEyeViewMoveNode(s[p],t,n,o,a,i,r)},xPositionInParent:function(e){var t=e.parent()[0];return null!=t?e.relativePosition("x")+t.width()/2:e.position("x")},yPositionInParent:function(e){var t=e.parent()[0];return null!=t?e.relativePosition("y")+t.height()/2:e.position("y")},removeChildren:function(e,t){for(var n=e.children(),o=0;o<n.length;o++){var a=n[o];this.removeChildren(a,t);var i=a.remove();null==t._private.data.collapsedChildren?t._private.data.collapsedChildren=i:t._private.data.collapsedChildren=t._private.data.collapsedChildren.union(i)}},isMetaEdge:function(e){return e.hasClass("cy-expand-collapse-meta-edge")},barrowEdgesOfcollapsedChildren:function(t){var n=t.descendants(),o=n.edgesWith(e.nodes().not(n.union(t))),a={};n.each((function(e,t){"number"==typeof e&&(e=t),a[e.id()]=!0}));for(var i=0;i<o.length;i++){var r=o[i],s=r.source(),l=r.target();if(!this.isMetaEdge(r)){var d={source:s,target:l};r.addClass("cy-expand-collapse-meta-edge"),r.data("originalEnds",d)}r.move({target:a[l.id()]?t.id():l.id(),source:a[s.id()]?t.id():s.id()})}},findNewEnd:function(e){for(var t=e;!t.inside();)t=t.parent();return t},repairEdges:function(e){for(var t=e.connectedEdges(".cy-expand-collapse-meta-edge"),n=0;n<t.length;n++){var o=t[n],a=o.data("originalEnds"),i=o.data("source");o.data("target");(o=i===e.id()?o.move({source:this.findNewEnd(a.source).id()}):o.move({target:this.findNewEnd(a.target).id()})).data("source")===a.source.id()&&o.data("target")===a.target.id()&&(o.removeClass("cy-expand-collapse-meta-edge"),o.removeData("originalEnds"))}},isOuterNode:function(e,t){for(var n=e;null!=n;){if(n==t)return!1;n=n.parent()[0]}return!0},getCollapsedChildrenRecursively:function(e,t){var n,o=e.data("collapsedChildren");for(n=0;n<o.length;n++)o[n].data("collapsedChildren")&&(t=t.union(this.getCollapsedChildrenRecursively(o[n],t))),t=t.union(o[n]);return t}}}},2921:function(e,t){var n={equalBoundingBoxes:function(e,t){return e.x1==t.x1&&e.x2==t.x2&&e.y1==t.y1&&e.y2==t.y2},getUnion:function(e,t){var n={x1:Math.min(e.x1,t.x1),x2:Math.max(e.x2,t.x2),y1:Math.min(e.y1,t.y1),y2:Math.max(e.y2,t.y2)};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n}};e.exports=n}}]);
//# sourceMappingURL=npm.cytoscape-expand-collapse-d664bf1a8be1c5e2d089.js.map