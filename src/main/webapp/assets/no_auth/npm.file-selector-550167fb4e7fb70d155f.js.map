{"version":3,"sources":["webpack:///./node_modules/file-selector/dist/es5/file-selector.js","webpack:///./node_modules/file-selector/dist/es5/index.js","webpack:///./node_modules/file-selector/dist/es5/file.js"],"names":["FILES_TO_IGNORE","fromEvent","evt","this","_a","value","dataTransfer","getDataTransferFiles","type","getInputFiles","isInput","target","files","fromList","map","file","dt","items","label","filter","item","kind","Promise","all","toFilePromises","noIgnoredFiles","flatten","sent","indexOf","name","i","length","push","webkitGetAsEntry","fromDataTransferItem","entry","isDirectory","fromDirEntry","reduce","acc","Array","isArray","getAsFile","reject","fwp","resolve","fromEntry","fromFileEntry","reader","createReader","entries","readEntries","_this","batch","err_1","trys","err","fullPath","COMMON_MIME_TYPES","Map","toFileWithPath","path","f","withMimeType","lastIndexOf","ext","split","pop","toLowerCase","get","Object","defineProperty","writable","configurable","enumerable","webkitRelativePath"],"mappings":"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","file":"npm.file-selector-550167fb4e7fb70d155f.js","sourcesContent":["import * as tslib_1 from \"tslib\";\nimport { toFileWithPath } from './file';\nvar FILES_TO_IGNORE = [\n    // Thumbnail cache files for macOS and Windows\n    '.DS_Store',\n    'Thumbs.db' // Windows\n];\n/**\n * Convert a DragEvent's DataTrasfer object to a list of File objects\n * NOTE: If some of the items are folders,\n * everything will be flattened and placed in the same list but the paths will be kept as a {path} property.\n * @param evt\n */\nexport function fromEvent(evt) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            return [2 /*return*/, isDragEvt(evt) && evt.dataTransfer\n                    ? getDataTransferFiles(evt.dataTransfer, evt.type)\n                    : getInputFiles(evt)];\n        });\n    });\n}\nfunction isDragEvt(value) {\n    return !!value.dataTransfer;\n}\nfunction getInputFiles(evt) {\n    var files = isInput(evt.target)\n        ? evt.target.files\n            ? fromList(evt.target.files)\n            : []\n        : [];\n    return files.map(function (file) { return toFileWithPath(file); });\n}\nfunction isInput(value) {\n    return value !== null;\n}\nfunction getDataTransferFiles(dt, type) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        var items, files;\n        return tslib_1.__generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!dt.items) return [3 /*break*/, 2];\n                    items = fromList(dt.items)\n                        .filter(function (item) { return item.kind === 'file'; });\n                    // According to https://html.spec.whatwg.org/multipage/dnd.html#dndevents,\n                    // only 'dragstart' and 'drop' has access to the data (source node)\n                    if (type !== 'drop') {\n                        return [2 /*return*/, items];\n                    }\n                    return [4 /*yield*/, Promise.all(items.map(toFilePromises))];\n                case 1:\n                    files = _a.sent();\n                    return [2 /*return*/, noIgnoredFiles(flatten(files))];\n                case 2: return [2 /*return*/, noIgnoredFiles(fromList(dt.files)\n                        .map(function (file) { return toFileWithPath(file); }))];\n            }\n        });\n    });\n}\nfunction noIgnoredFiles(files) {\n    return files.filter(function (file) { return FILES_TO_IGNORE.indexOf(file.name) === -1; });\n}\n// IE11 does not support Array.from()\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Browser_compatibility\n// https://developer.mozilla.org/en-US/docs/Web/API/FileList\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItemList\nfunction fromList(items) {\n    var files = [];\n    // tslint:disable: prefer-for-of\n    for (var i = 0; i < items.length; i++) {\n        var file = items[i];\n        files.push(file);\n    }\n    return files;\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem\nfunction toFilePromises(item) {\n    if (typeof item.webkitGetAsEntry !== 'function') {\n        return fromDataTransferItem(item);\n    }\n    var entry = item.webkitGetAsEntry();\n    // Safari supports dropping an image node from a different window and can be retrieved using\n    // the DataTransferItem.getAsFile() API\n    // NOTE: FileSystemEntry.file() throws if trying to get the file\n    if (entry && entry.isDirectory) {\n        return fromDirEntry(entry);\n    }\n    return fromDataTransferItem(item);\n}\nfunction flatten(items) {\n    return items.reduce(function (acc, files) { return tslib_1.__spread(acc, (Array.isArray(files) ? flatten(files) : [files])); }, []);\n}\nfunction fromDataTransferItem(item) {\n    var file = item.getAsFile();\n    if (!file) {\n        return Promise.reject(item + \" is not a File\");\n    }\n    var fwp = toFileWithPath(file);\n    return Promise.resolve(fwp);\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemEntry\nfunction fromEntry(entry) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            return [2 /*return*/, entry.isDirectory ? fromDirEntry(entry) : fromFileEntry(entry)];\n        });\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry\nfunction fromDirEntry(entry) {\n    var reader = entry.createReader();\n    return new Promise(function (resolve, reject) {\n        var entries = [];\n        function readEntries() {\n            var _this = this;\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryEntry/createReader\n            // https://developer.mozilla.org/en-US/docs/Web/API/FileSystemDirectoryReader/readEntries\n            reader.readEntries(function (batch) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var files, err_1, items;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!!batch.length) return [3 /*break*/, 5];\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            return [4 /*yield*/, Promise.all(entries)];\n                        case 2:\n                            files = _a.sent();\n                            resolve(files);\n                            return [3 /*break*/, 4];\n                        case 3:\n                            err_1 = _a.sent();\n                            reject(err_1);\n                            return [3 /*break*/, 4];\n                        case 4: return [3 /*break*/, 6];\n                        case 5:\n                            items = Promise.all(batch.map(fromEntry));\n                            entries.push(items);\n                            // Continue reading\n                            readEntries();\n                            _a.label = 6;\n                        case 6: return [2 /*return*/];\n                    }\n                });\n            }); }, function (err) {\n                reject(err);\n            });\n        }\n        readEntries();\n    });\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileEntry\nfunction fromFileEntry(entry) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n        return tslib_1.__generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    entry.file(function (file) {\n                        var fwp = toFileWithPath(file, entry.fullPath);\n                        resolve(fwp);\n                    }, function (err) {\n                        reject(err);\n                    });\n                })];\n        });\n    });\n}\n//# sourceMappingURL=file-selector.js.map","export { fromEvent } from './file-selector';\n//# sourceMappingURL=index.js.map","export var COMMON_MIME_TYPES = new Map([\n    ['avi', 'video/avi'],\n    ['gif', 'image/gif'],\n    ['ico', 'image/x-icon'],\n    ['jpeg', 'image/jpeg'],\n    ['jpg', 'image/jpeg'],\n    ['mkv', 'video/x-matroska'],\n    ['mov', 'video/quicktime'],\n    ['mp4', 'video/mp4'],\n    ['pdf', 'application/pdf'],\n    ['png', 'image/png'],\n    ['zip', 'application/zip'],\n    ['doc', 'application/msword'],\n    ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']\n]);\nexport function toFileWithPath(file, path) {\n    var f = withMimeType(file);\n    if (typeof f.path !== 'string') { // on electron, path is already set to the absolute path\n        var webkitRelativePath = file.webkitRelativePath;\n        Object.defineProperty(f, 'path', {\n            value: typeof path === 'string'\n                ? path\n                // If <input webkitdirectory> is set,\n                // the File will have a {webkitRelativePath} property\n                // https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/webkitdirectory\n                : typeof webkitRelativePath === 'string' && webkitRelativePath.length > 0\n                    ? webkitRelativePath\n                    : file.name,\n            writable: false,\n            configurable: false,\n            enumerable: true\n        });\n    }\n    return f;\n}\nfunction withMimeType(file) {\n    var name = file.name;\n    var hasExtension = name && name.lastIndexOf('.') !== -1;\n    if (hasExtension && !file.type) {\n        var ext = name.split('.')\n            .pop().toLowerCase();\n        var type = COMMON_MIME_TYPES.get(ext);\n        if (type) {\n            Object.defineProperty(file, 'type', {\n                value: type,\n                writable: false,\n                configurable: false,\n                enumerable: true\n            });\n        }\n    }\n    return file;\n}\n//# sourceMappingURL=file.js.map"],"sourceRoot":""}