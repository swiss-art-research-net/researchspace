(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1253:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),r=a(1),i=a(43),u=a(7),l=a(34),o=a(1553),s=a(1631),c=a(1689),p="semantic-form-checklist-input",d=function(e){function ChecklistInput(t,a){var n=e.call(this,t,a)||this;return n.cancellation=new l.Cancellation,n.isLoading=!0,n.onValueChanged=function(e){var t=n.props,a=t.updateValues,r=t.handler,u=n.state.valueSet,l=e.target.checked;a((function(t){var a=t.values,s=t.errors,c=i.List();if("checkbox"===n.checkType()){var p=a.filter((function(t){return o.FieldValue.isAtomic(t)&&t.value.value!==e.target.value})).toList();c=u.filter((function(t){var a=t.value.value===e.target.value,n=p.some((function(e){return o.FieldValue.isAtomic(e)&&e.value.equals(t.value)}));return l?n||a:n&&!a})).toList()}return"radio"===n.checkType()&&(c=u.filter((function(t){var a=t.value.value===e.target.value;return l&&a})).toList()),r.validate({values:c.map((function(e){return o.FieldValue.fromLabeled(e)})),errors:s})}))},n.checkType=function(){var e=n.props.type;return"checkbox"===e?"checkbox":"radio"===e?"radio":"checkbox"},n.renderCheckItem=function(e,t,a){var i=n.props.classItemName,l=n.checkType(),o="radio"===l?p+"__radio":p+"__checkbox";return r.createElement("div",{key:a,className:u(""+p,i)},r.createElement("label",{className:"semantic-form-checklist-input__label"},e.label,r.createElement("input",{type:l,className:"semantic-form-checklist-input__input",onChange:n.onValueChanged,value:e.value.value,checked:t}),r.createElement("span",{className:o})))},n.renderChecklist=function(e){var t=n.props.values;return e.map((function(e,a){var r=t.toArray().some((function(t){return o.FieldValue.isAtomic(t)&&t.value.equals(e.value)}));return n.renderCheckItem(e,r,e.value.value+"-"+a)}))},n.state={valueSet:i.List()},n}return n.__extends(ChecklistInput,e),ChecklistInput.prototype.dataState=function(){return this.isLoading?o.DataState.Loading:o.DataState.Ready},ChecklistInput.prototype.componentDidMount=function(){var e=this,t=this.props.definition;t.valueSetPattern?this.cancellation.map(c.queryValues(t.valueSetPattern)).observe({value:function(t){e.isLoading=!1,e.setState({valueSet:i.List(t)}),e.props.updateValues((function(e){return e}))},error:function(t){console.error(t),e.isLoading=!1,e.props.updateValues((function(e){var t=e.values,a=e.errors.filter((function(e){return e.kind===o.ErrorKind.Loading})).toList();return a.push({kind:o.ErrorKind.Loading,message:"Failed to load value set"}),{values:t,errors:a}}))}}):this.isLoading=!1},ChecklistInput.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},ChecklistInput.prototype.render=function(){var e,t=this.props,a=t.row,n=t.className,i=this.state.valueSet?this.state.valueSet.toArray():[];return r.createElement("div",{className:u(n,(e={},e[p+"_row"]=a,e))},this.renderChecklist(i))},ChecklistInput.makeHandler=function(e){return new s.CardinalityCheckingHandler(e)},ChecklistInput}(s.MultipleValuesInput);t.ChecklistInput=d,s.MultipleValuesInput.assertStatic(d),t.default=d}}]);
//# sourceMappingURL=semantic-form-checklist-input-e37673d777766e427482.js.map