(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1234:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),l=a(1),r=a(35),i=a(1559),o=a(43),u=a(634),s=a(23),p=a(630),d=a(1208),c=a(1553),v=a(1619),f=a(1688),h=a(1689),m=function(e){function SelectInput(t,a){var n=e.call(this,t,a)||this;return n.cancellation=new u.Cancellation,n.isLoading=!0,n.onValueChanged=function(e){n.setAndValidate(n.parseValue(e))},n.optionRenderer=function(e){return void 0!==n.props.template?l.createElement(p.TemplateItem,{template:{source:n.props.template,options:e.binding}}):r.span({id:e.label,className:"select-text-fieldoption"},e.label||e.value.value)},n.valueRenderer=function(e){if(e){var t=n.state.valueSet;if(t){var a=t.find((function(t){return t.value.equals(e.value)}));if(a)return n.optionRenderer(a)}return r.span({id:e.label,className:"select-text-fieldoption"},e.label||e.value.value)}},n.state={valueSet:o.List()},n}return n.__extends(SelectInput,e),SelectInput.prototype.dataState=function(){return this.isLoading?c.DataState.Loading:c.DataState.Ready},SelectInput.prototype.componentDidMount=function(){var e=this,t=this.props.definition;t.valueSetPattern?this.cancellation.map(h.queryValues(t.valueSetPattern)).observe({value:function(t){e.isLoading=!1,e.setState({valueSet:o.List(t)}),e.props.updateValue((function(e){return e}))},error:function(t){console.error(t),e.isLoading=!1,e.props.updateValue((function(e){var t=c.FieldValue.isEmpty(e)?c.FieldValue.fromLabeled({value:s.Rdf.iri("")}):e,a=c.FieldValue.getErrors(t).push({kind:c.ErrorKind.Loading,message:"Failed to load value set"});return c.FieldValue.setErrors(t,a)}))}}):this.isLoading=!1},SelectInput.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},SelectInput.prototype.parseValue=function(e){if(!e)return c.FieldValue.empty;var t=this.state.valueSet.find((function(t){return t.value.equals(e.value)}));if(!t)return c.FieldValue.empty;var a={value:t.value,label:t.label};return c.AtomicValue.set(this.props.value,a)},SelectInput.prototype.render=function(){var e=this.props.definition,t=this.state.valueSet?this.state.valueSet.toArray():new Array,a=this.props.value,n=c.FieldValue.isAtomic(a)?a:void 0,o=void 0===this.props.placeholder?this.createDefaultPlaceholder(e):this.props.placeholder;return r.div({className:"select-text-field"},l.createElement(i.default,{name:e.id,placeholder:o,onChange:this.onValueChanged,disabled:!this.canEdit,options:t,value:n,optionRenderer:this.optionRenderer,valueRenderer:this.valueRenderer}),l.createElement(f.ValidationMessages,{errors:c.FieldValue.getErrors(this.props.value)}))},SelectInput.prototype.createDefaultPlaceholder=function(e){return"Select "+(d.getPreferredLabel(e.label)||"entity").toLocaleLowerCase()+" here..."},SelectInput.makeHandler=v.AtomicValueInput.makeAtomicHandler,SelectInput}(v.AtomicValueInput);t.SelectInput=m,v.SingleValueInput.assertStatic(m),t.default=m}}]);
//# sourceMappingURL=semantic-form-select-input-baddb4deb157d2bf7963.js.map