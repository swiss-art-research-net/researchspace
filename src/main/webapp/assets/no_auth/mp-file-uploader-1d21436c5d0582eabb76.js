(window.webpackJsonp=window.webpackJsonp||[]).push([[354],{1391:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var o=r(11),a=r(1),l=r(72),s=r(56),n=r(631),p=r(1654),i=r(1211),c=r(1219),d=r(34),u=r(116),m=function(e){function FileUploader(t,r){var o=e.call(this,t,r)||this;return o.cancellation=new d.Cancellation,o.state={alertState:void 0,progress:void 0,progressText:void 0,uploadCompleted:!1},o}return o.__extends(FileUploader,e),FileUploader.prototype.getFileManager=function(){var e=this.context.semanticContext.repository;return new i.FileManager({repository:e})},FileUploader.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},FileUploader.prototype.onDropAccepted=function(e){var t=this;this.setState({alertState:null,progress:null,uploadCompleted:!1});var r=e[0];this.cancellation.map(this.getFileManager().uploadFileAsResource({file:r,storage:this.props.storage,generateIriQuery:this.props.generateIriQuery,resourceQuery:this.props.resourceQuery,contextUri:this.props.contextUri,onProgress:function(e){return t.setState({progress:e,progressText:"Uploading ..."})}})).observe({value:function(e){u.addNotification({message:"File succesfully uploaded.",level:"success"}),t.setState({alertState:{alert:n.AlertType.SUCCESS,message:'File "'+r.name+'" has been successfully uploaded.'},progress:null,uploadCompleted:!0})},error:function(e){u.addNotification({message:"Failed to upload file.",level:"error"}),t.setState({alertState:{alert:n.AlertType.WARNING,message:'Failed to upload file "'+r.name+'": '+e+" - "+e.response.text},progress:null,uploadCompleted:!1})}})},FileUploader.prototype.onDropRejected=function(e){var t=e[0];this.setState({alertState:{alert:n.AlertType.WARNING,message:"Incompatible file type: expected "+this.props.acceptPattern+", got "+t.type},progress:null,uploadCompleted:!1})},FileUploader.prototype.render=function(){var e=this.state.alertState?a.createElement(n.Alert,o.__assign({},this.state.alertState)):null;return a.createElement("div",{className:c.FileUploader},this.state.progress?a.createElement(l.ProgressBar,{className:c.progress,active:!0,min:0,max:100,now:this.state.progress,label:this.state.progressText}):null,a.createElement(p.Dropzone,{accept:this.props.acceptPattern,onDropAccepted:this.onDropAccepted.bind(this),onDropRejected:this.onDropRejected.bind(this),noClick:Boolean(this.state.progress)},a.createElement("div",{className:""+c.mpDropZonePlaceHolder},this.props.children||a.createElement("div",{className:c.mpDropZonePlaceHolder},this.props.placeholder||"Please drag&drop your file here."))),e?a.createElement("div",{className:c.alertComponent},e):null)},FileUploader}(s.Component);t.FileUploader=m,t.default=m}}]);
//# sourceMappingURL=mp-file-uploader-1d21436c5d0582eabb76.js.map