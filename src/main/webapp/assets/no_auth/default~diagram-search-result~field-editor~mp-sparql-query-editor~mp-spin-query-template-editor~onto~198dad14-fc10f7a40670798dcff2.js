(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1581:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0});var n=t(11);n.__exportStar(t(1774),r),n.__exportStar(t(1247),r),n.__exportStar(t(1889),r),n.__exportStar(t(2084),r),n.__exportStar(t(2086),r),n.__exportStar(t(1888),r),n.__exportStar(t(2085),r),n.__exportStar(t(1887),r),n.__exportStar(t(2682),r)},2682:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0});var n=t(16),a=t(23),i=t(61),_=t(141);function createRootsQuery(e){var r=e.relation,t=e.scheme,n=e.orderBy,a=_.ConfigHolder.getUIConfig().labelPropertyPattern,l=i.SparqlUtil.parseQuery("\n    SELECT DISTINCT ?item ?label ?hasChildren WHERE {\n      FILTER(?__scheme__)\n      FILTER NOT EXISTS { { FILTER(?__relation__) } }\n      ?item "+a+" ?label .\n      OPTIONAL { FILTER(?__childRelation__) }\n      BIND(bound(?child) as ?hasChildren)\n      OPTIONAL {\n        FILTER(?__orderBy__)\n      }\n    } ORDER BY ?order ?label\n  "),o=bindTreePatterns(r,{itemVar:"child",parentVar:"item"});return new i.PatternBinder("__childRelation__",o).sparqlQuery(l),new i.PatternBinder("__relation__",r).sparqlQuery(l),new i.PatternBinder("__scheme__",t).sparqlQuery(l),new i.PatternBinder("__orderBy__",n).sparqlQuery(l),l}function createChildrenQuery(e){var r=e.relation,t=e.scheme,n=e.orderBy,a=_.ConfigHolder.getUIConfig().labelPropertyPattern,l=i.SparqlUtil.parseQuery("\n    SELECT DISTINCT ?item ?label ?hasChildren WHERE {\n      FILTER(?__relation__)\n      FILTER(?__scheme__)\n      ?item "+a+" ?label .\n      OPTIONAL { FILTER(?__childRelation__) }\n      BIND(bound(?child) as ?hasChildren)\n      OPTIONAL {\n        FILTER(?__orderBy__)\n      }\n    } ORDER BY ?order ?label\n  "),o=bindTreePatterns(r,{itemVar:"child",parentVar:"item"});return new i.PatternBinder("__childRelation__",o).sparqlQuery(l),new i.PatternBinder("__relation__",r).sparqlQuery(l),new i.PatternBinder("__scheme__",t).sparqlQuery(l),new i.PatternBinder("__orderBy__",n).sparqlQuery(l),l}function createParentsQuery(e){var r=e.relation,t=e.scheme,n=_.ConfigHolder.getUIConfig().labelPropertyPattern,a=i.SparqlUtil.parseQuery("\n    PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n    select distinct ?item ?parent ?parentLabel where {\n      FILTER(?__parentScheme__)\n      FILTER(?__relation__)\n      ?parent "+n+" ?parentLabel .\n    }\n  "),l=bindTreePatterns(t,{itemVar:"parent"});return new i.PatternBinder("__parentScheme__",l).sparqlQuery(a),new i.PatternBinder("__relation__",r).sparqlQuery(a),a}function createSearchQuery(e){var r=e.relation,t=e.scheme,n=e.orderBy,a=_.ConfigHolder.getUIConfig().labelPropertyPattern,l=i.SparqlUtil.parseQuery("\n    PREFIX bds: <http://www.bigdata.com/rdf/search#>\n    PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n    SELECT DISTINCT ?item ?label ?score ?hasChildren WHERE {\n      FILTER(?__scheme__)\n      ?item "+a+' ?label.\n      ?label bds:search ?__token__ ;\n            bds:minRelevance "0.3" ;\n            bds:relevance ?score ;\n            bds:matchAllTerms "true"  .\n      OPTIONAL { FILTER(?__childRelation__) }\n      BIND(BOUND(?child) AS ?hasChildren)\n      OPTIONAL {\n        FILTER(?__orderBy__)\n      }\n    }\n    ORDER BY DESC(?score) ?order ?label\n    LIMIT 200\n  '),o=bindTreePatterns(r,{itemVar:"child",parentVar:"item"});return new i.PatternBinder("__childRelation__",o).sparqlQuery(l),new i.PatternBinder("__scheme__",t).sparqlQuery(l),new i.PatternBinder("__orderBy__",n).sparqlQuery(l),l}function bindTreePatterns(e,r){var t=r.itemVar,a=r.parentVar,_=n.cloneDeep(e);if("item"!==t){var l=new i.VariableRenameBinder("item",t);_.forEach((function(e){return l.pattern(e)}))}if(a&&"parent"!==a){var o=new i.VariableRenameBinder("parent",a);_.forEach((function(e){return o.pattern(e)}))}return _}r.DefaultLightweightPatterns={schemePattern:"?item <http://www.w3.org/2004/02/skos/core#inScheme> ?__scheme__",relationPattern:"?item <http://www.w3.org/2004/02/skos/core#broader> ?parent",orderByPattern:"BIND(?label as ?order) ."},r.createDefaultTreeQueries=function createDefaultTreeQueries(e){void 0===e&&(e={});var t=e.schemePattern,n=void 0===t?r.DefaultLightweightPatterns.schemePattern:t,_=e.relationPattern,l=void 0===_?r.DefaultLightweightPatterns.relationPattern:_,o=e.orderByPattern,s=void 0===o?r.DefaultLightweightPatterns.orderByPattern:o,d=i.SparqlUtil.parseQuery("SELECT * WHERE {}").prefixes,c="string"==typeof l?i.SparqlUtil.parsePatterns(l,d):l,p=i.SparqlUtil.parsePatterns(s,d),h=[];if((e.scheme||e.schemePattern)&&(h=i.SparqlUtil.parsePatterns(n,d),e.scheme)){var u=a.Rdf.iri(e.scheme),P=new i.VariableBinder({__scheme__:u});h.forEach((function(e){return P.pattern(e)}))}var y={relation:c,scheme:h,orderBy:p};return{rootsQuery:i.SparqlUtil.serializeQuery(createRootsQuery(y)),childrenQuery:i.SparqlUtil.serializeQuery(createChildrenQuery(y)),parentsQuery:i.SparqlUtil.serializeQuery(createParentsQuery(y)),searchQuery:i.SparqlUtil.serializeQuery(createSearchQuery(y))}}}}]);
//# sourceMappingURL=default~diagram-search-result~field-editor~mp-sparql-query-editor~mp-spin-query-template-editor~onto~198dad14-fc10f7a40670798dcff2.js.map