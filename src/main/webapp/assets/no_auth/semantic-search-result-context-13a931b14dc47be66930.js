(window.webpackJsonp=window.webpackJsonp||[]).push([[504],{1499:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),r=n(1),o=n(1559),i=n(16),l=n(33),s=n(72),u=n(23),c=n(630),p=n(1630),m=n(1569),d=n(1500),h=o.default,S=function(e){function SemanticSearchContextualizedResult(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(SemanticSearchContextualizedResult,e),SemanticSearchContextualizedResult.prototype.render=function(){var e=this;return r.createElement(m.SemanticSearchContext.Consumer,null,(function(t){return r.createElement(f,a.__assign({},e.props,{context:t}))}))},SemanticSearchContextualizedResult}(r.Component),f=function(e){function SemanticSearchContextualizedResultInner(t){var n=e.call(this,t)||this;n.getBindings=function(){return n.state.relation.map((function(e){var t;return(t={})[p.RESULT_VARIABLES.CONTEXT_RELATION_VAR]=e.iri,t[p.SEMANTIC_SEARCH_VARIABLES.RELATION_VAR]=e.iri,t})).getOrElse({})},n.initialState=function(e,t){var a=i.uniq(i.flatten(t.map((function(t){return n.getAvailableRelations(e,t)}))));return{relations:a,relation:i.isEmpty(a)?l.Nothing():l.Just(i.head(a))}},n.getAvailableRelations=function(e,t){var a=l.fromNullable(e.categories.get(t));return e.relationsFor({domain:n.props.context.domain,range:a}).valueSeq().toJS()},n.contextSelector=function(e){var t=i.map(n.state.relations,(function(e){return{value:e,label:e.label}}));return r.createElement(h,{className:d.contextSelector,options:t,clearable:!1,value:n.state.relation.getOrElse(void 0),optionRenderer:n.customSuggestionRenderer(n.props.tupleTemplate),valueRenderer:n.customValueRenderer(n.props.tupleTemplate),onChange:n.selectRelation,placeholder:"Select Context"})},n.selectRelation=function(e){var t=l.Just(e.value);n.props.context.setVisualizationContext(t),n.setState({relation:t})},n.customValueRenderer=function(e){return function(t){return r.createElement(c.TemplateItem,{template:{source:e,options:t}})}},n.customSuggestionRenderer=function(e){return function(t){return r.createElement(c.TemplateItem,{template:{source:e,options:t.value}})}};var a=n.props.context.searchProfileStore.map((function(e){return n.initialState(e,t.ranges.map(u.Rdf.iri))})).getOrElse({relation:l.Nothing(),relations:[]});return n.state=a,n}return a.__extends(SemanticSearchContextualizedResultInner,e),SemanticSearchContextualizedResultInner.prototype.componentDidMount=function(){this.props.context.setVisualizationContext(this.state.relation)},SemanticSearchContextualizedResultInner.prototype.render=function(){var e=a.__assign(a.__assign({},this.props.context),{bindings:this.getBindings()});return r.createElement(m.SemanticSearchContext.Provider,{value:e},r.createElement("div",{className:d.holder},r.createElement(s.FormGroup,{className:d.selectorGroup},r.createElement(s.ControlLabel,null,"Visualization Context"),this.props.context.searchProfileStore.map(this.contextSelector).getOrElse(r.createElement("span",null))),r.Children.only(this.props.children)))},SemanticSearchContextualizedResultInner.defaultProps={tupleTemplate:'\n        <span title="{{label}}" style="display: flex; align-items: center; height: 40px;">\n          {{label}}\n          {{#ifCond hasRange.thumbnail.length \'>\' 0}}\n          <img style="margin-left: auto; width: 30px; margin-right: 10px"\n               src="{{hasRange.thumbnail}}"/>\n          {{else}}\n            <span style="margin-left: 10px">  [{{hasRange.label}}]</span>\n          {{/ifCond}}\n        </span>\n    '},SemanticSearchContextualizedResultInner}(r.Component);t.default=S}}]);
//# sourceMappingURL=semantic-search-result-context-13a931b14dc47be66930.js.map