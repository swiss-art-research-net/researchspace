(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{1928:function(t,i,n){"use strict";t.exports=rbush;var e=n(2756);function rbush(t,i){if(!(this instanceof rbush))return new rbush(t,i);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),this.clear()}function findItem(t,i,n){if(!n)return i.indexOf(t);for(var e=0;e<i.length;e++)if(n(t,i[e]))return e;return-1}function calcBBox(t,i){distBBox(t,0,t.children.length,i,t)}function distBBox(t,i,n,e,a){a||(a=createNode(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var r,h=i;h<n;h++)r=t.children[h],extend(a,t.leaf?e(r):r);return a}function extend(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function compareNodeMinX(t,i){return t.minX-i.minX}function compareNodeMinY(t,i){return t.minY-i.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function contains(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function intersects(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,i,n,a,r){for(var h,o=[i,n];o.length;)(n=o.pop())-(i=o.pop())<=a||(h=i+Math.ceil((n-i)/a/2)*a,e(t,h,i,n,r),o.push(i,h,h,n))}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],e=this.toBBox;if(!intersects(t,i))return n;for(var a,r,h,o,s=[];i;){for(a=0,r=i.children.length;a<r;a++)h=i.children[a],intersects(t,o=i.leaf?e(h):h)&&(i.leaf?n.push(h):contains(t,o)?this._all(h,n):s.push(h));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!intersects(t,i))return!1;for(var e,a,r,h,o=[];i;){for(e=0,a=i.children.length;e<a;e++)if(r=i.children[e],intersects(t,h=i.leaf?n(r):r)){if(i.leaf||contains(t,h))return!0;o.push(r)}i=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){var a=this.data;this.data=e,e=a}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=createNode([]),this},remove:function(t,i){if(!t)return this;for(var n,e,a,r,h=this.data,o=this.toBBox(t),s=[],c=[];h||s.length;){if(h||(h=s.pop(),e=s[s.length-1],n=c.pop(),r=!0),h.leaf&&-1!==(a=findItem(t,h.children,i)))return h.children.splice(a,1),s.push(h),this._condense(s),this;r||h.leaf||!contains(h,o)?e?(n++,h=e.children[n],r=!1):h=null:(s.push(h),c.push(n),n=0,e=h,h=h.children[0])}return this},toBBox:function(t){return t},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,e){var a,r=n-i+1,h=this._maxEntries;if(r<=h)return calcBBox(a=createNode(t.slice(i,n+1)),this.toBBox),a;e||(e=Math.ceil(Math.log(r)/Math.log(h)),h=Math.ceil(r/Math.pow(h,e-1))),(a=createNode([])).leaf=!1,a.height=e;var o,s,c,l,m=Math.ceil(r/h),u=m*Math.ceil(Math.sqrt(h));for(multiSelect(t,i,n,u,this.compareMinX),o=i;o<=n;o+=u)for(multiSelect(t,o,c=Math.min(o+u-1,n),m,this.compareMinY),s=o;s<=c;s+=m)l=Math.min(s+m-1,c),a.children.push(this._build(t,s,l,e-1));return calcBBox(a,this.toBBox),a},_chooseSubtree:function(t,i,n,e){for(var a,r,h,o,s,c,l,m,u,x;e.push(i),!i.leaf&&e.length-1!==n;){for(l=m=1/0,a=0,r=i.children.length;a<r;a++)s=bboxArea(h=i.children[a]),u=t,x=h,(c=(Math.max(x.maxX,u.maxX)-Math.min(x.minX,u.minX))*(Math.max(x.maxY,u.maxY)-Math.min(x.minY,u.minY))-s)<m?(m=c,l=s<l?s:l,o=h):c===m&&s<l&&(l=s,o=h);i=o||i.children[0]}return i},_insert:function(t,i,n){var e=this.toBBox,a=n?t:e(t),r=[],h=this._chooseSubtree(a,this.data,i,r);for(h.children.push(t),extend(h,a);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(a,r,i)},_split:function(t,i){var n=t[i],e=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,e);var r=this._chooseSplitIndex(n,a,e),h=createNode(n.children.splice(r,n.children.length-r));h.height=n.height,h.leaf=n.leaf,calcBBox(n,this.toBBox),calcBBox(h,this.toBBox),i?t[i-1].children.push(h):this._splitRoot(n,h)},_splitRoot:function(t,i){this.data=createNode([t,i]),this.data.height=t.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var e,a,r,h,o,s,c,l,m,u,x,d,f,p;for(s=c=1/0,e=i;e<=n-i;e++)a=distBBox(t,0,e,this.toBBox),r=distBBox(t,e,n,this.toBBox),m=a,u=r,x=void 0,d=void 0,f=void 0,p=void 0,x=Math.max(m.minX,u.minX),d=Math.max(m.minY,u.minY),f=Math.min(m.maxX,u.maxX),p=Math.min(m.maxY,u.maxY),h=Math.max(0,f-x)*Math.max(0,p-d),o=bboxArea(a)+bboxArea(r),h<s?(s=h,l=e,c=o<c?o:c):h===s&&o<c&&(c=o,l=e);return l},_chooseSplitAxis:function(t,i,n){var e=t.leaf?this.compareMinX:compareNodeMinX,a=t.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,a)&&t.children.sort(e)},_allDistMargin:function(t,i,n,e){t.children.sort(e);var a,r,h=this.toBBox,o=distBBox(t,0,i,h),s=distBBox(t,n-i,n,h),c=bboxMargin(o)+bboxMargin(s);for(a=i;a<n-i;a++)r=t.children[a],extend(o,t.leaf?h(r):r),c+=bboxMargin(o);for(a=n-i-1;a>=i;a--)r=t.children[a],extend(s,t.leaf?h(r):r),c+=bboxMargin(s);return c},_adjustParentBBoxes:function(t,i,n){for(var e=n;e>=0;e--)extend(i[e],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():calcBBox(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}}}]);
//# sourceMappingURL=npm.rbush-4f301373f72e04c01e7a.js.map