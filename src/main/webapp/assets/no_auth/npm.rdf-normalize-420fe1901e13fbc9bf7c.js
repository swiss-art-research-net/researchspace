(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{3176:function(e,t,n){var a=n(3177);function createPlainNode(e){if(!e)return null;var t={};return"NamedNode"===e.interfaceName?(t.type="IRI",t.value=e.nominalValue):"BlankNode"===e.interfaceName?(t.type="blank node",t.value=e.toString()):"Literal"===e.interfaceName&&(t.type="literal",t.value=e.nominalValue,t.datatype=e.datatype.nominalValue,t.language=e.language),t}function createPlainDataset(e){var t={};return e.forEach((function(e){var n="@default";"graph"in e&&e.graph.nominalValue&&(n=e.graph.nominalValue),n in t||(t[n]=[]),t[n].push(function createPlainTriple(e){return{subject:createPlainNode(e.subject),predicate:createPlainNode(e.predicate),object:createPlainNode(e.object)}}(e))})),t}e.exports=function normalize(e){return a(createPlainDataset(e))}},3177:function(e,t,n){var Processor=function(){};function _hashQuads(e,t){if("hash"in t[e])return t[e].hash;for(var n=t[e].quads,r=[],u=0;u<n.length;++u)r.push(_toNQuad(n[u],n[u].name?n[u].name.value:null,e));return r.sort(),t[e].hash=a.hash(r)}function _getAdjacentBlankNodeName(e,t){return"blank node"===e.type&&e.value!==t?e.value:null}function _toNQuad(e,t,n){var a=e.subject,r=e.predicate,u=e.object,i=t,l="";if("IRI"===a.type?l+="<"+a.value+">":l+=n?a.value===n?"_:a":"_:z":a.value,l+=" ","IRI"===r.type?l+="<"+r.value+">":l+=n?"_:p":r.value,l+=" ","IRI"===u.type)l+="<"+u.value+">";else if("blank node"===u.type)l+=n?u.value===n?"_:a":"_:z":u.value;else{l+='"'+u.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"')+'"',"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"===u.datatype?u.language&&(l+="@"+u.language):"http://www.w3.org/2001/XMLSchema#string"!==u.datatype&&(l+="^^<"+u.datatype+">")}return null!==i&&(0!==i.indexOf("_:")?l+=" <"+i+">":l+=n?" _:g":" "+i),l+=" .\n"}function UniqueNamer(e){this.prefix=e,this.counter=0,this.existing={}}Processor.prototype.normalize=function(e,t,n){var r=[],u={};for(var i in e){var l=e[i];"@default"===i&&(i=null);for(var o=0;o<l.length;++o){var s=l[o];null!==i&&(0===i.indexOf("_:")?s.name={type:"blank node",value:i}:s.name={type:"IRI",value:i}),r.push(s);for(var h=["subject","object","name"],c=0;c<h.length;++c){var f=h[c];if(s[f]&&"blank node"===s[f].type){var p=s[f].value;p in u?u[p].quads.push(s):u[p]={quads:[s]}}}}}var d=new UniqueNamer("_:c14n");return hashBlankNodes(Object.keys(u));function hashBlankNodes(e){var t=[],i={},l={};return function hashUnnamed(o){if(o===e.length)return function nameBlankNodes(e,t,i){for(var l=!1,o=Object.keys(e).sort(),s=0;s<o.length;++s){var h=e[o[s]];d.getName(h),l=!0}return l?hashBlankNodes(i):function nameDuplicates(e){var t=Object.keys(e).sort();return function processGroup(i){if(i===t.length)return function createArray(){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],a=["subject","object","name"],u=0;u<a.length;++u){var i=a[u];n[i]&&"blank node"===n[i].type&&0!==n[i].value.indexOf("_:c14n")&&(n[i].value=d.getName(n[i].value))}e.push(_toNQuad(n,n.name?n.name.value:null))}return e.sort().join("")}();var l=e[t[i]],o=[];return nameGroupMember(l,0);function nameGroupMember(e,t){if(t===e.length){o.sort((function(e,t){return(e=e.hash)<(t=t.hash)?-1:e>t?1:0}));for(var r=0;r<o.length;++r)for(var l in o[r].pathNamer.existing)d.getName(l);return processGroup(i+1)}var s=e[t];if(d.isNamed(s))return nameGroupMember(e,t+1);var h=new UniqueNamer("_:b");return h.getName(s),function _hashPaths(e,t,n,r,u){var i,l=a.create(),o={},s=t[e].quads;return function groupNodes(u){if(u===s.length)return i=Object.keys(o).sort(),hashGroup(0);var l=s[u],h=_getAdjacentBlankNodeName(l.subject,e),c=null;null!==h?c="p":null!==(h=_getAdjacentBlankNodeName(l.object,e))&&(c="r");if(null!==h){var f;f=n.isNamed(h)?n.getName(h):r.isNamed(h)?r.getName(h):_hashQuads(h,t);var p=a.create();p.update(c),p.update(l.predicate.value),p.update(f);var d=p.digest();d in o?o[d].push(h):o[d]=[h]}return groupNodes(u+1)}(0);function hashGroup(e){if(e===i.length)return u(null,{hash:l.digest(),pathNamer:r});var a=i[e];l.update(a);var s=null,h=null,c=new Permutator(o[a]);return permutate();function permutate(){var a=c.next(),i=r.clone(),o="",f=[];for(var p in a){var d=a[p];if(n.isNamed(d)?o+=n.getName(d):(i.isNamed(d)||f.push(d),o+=i.getName(d)),null!==s&&o.length>=s.length&&o>s)return nextPermutation(!0)}return nextRecursion(0);function nextRecursion(e){if(e===f.length)return nextPermutation(!1);var a=f[e];return _hashPaths(a,t,n,i,(function(t,n){return t?u(t):(o+=i.getName(a)+"<"+n.hash+">",i=n.pathNamer,null!==s&&o.length>=s.length&&o>s?nextPermutation(!0):nextRecursion(e+1))}))}function nextPermutation(t){return!t&&(null===s||o<s)&&(s=o,h=i),c.hasNext()?permutate():(l.update(s),r=h,hashGroup(e+1))}}}}(s,u,d,h,(function(a,r){return a?n(a):(o.push(r),nameGroupMember(e,t+1))}))}}(0)}(t)}(l,i,t);var s=e[o],h=_hashQuads(s,u);h in i?(i[h].push(s),t.push(s)):h in l?(i[h]=[l[h],s],t.push(l[h]),t.push(s),delete l[h]):l[h]=s;return hashUnnamed(o+1)}(0)}},UniqueNamer.prototype.clone=function(){var e=new UniqueNamer(this.prefix);return e.counter=this.counter,e.existing=function _clone(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;++n)t[n]=_clone(e[n])}else if("object"==typeof e)for(var a in t={},e)t[a]=_clone(e[a]);else t=e.toString();return t}return e}(this.existing),e},UniqueNamer.prototype.getName=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},UniqueNamer.prototype.isNamed=function(e){return e in this.existing};var Permutator=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};Permutator.prototype.hasNext=function(){return!this.done},Permutator.prototype.next=function(){for(var e=this.list.slice(),t=null,n=0,a=this.list.length,r=0;r<a;++r){var u=this.list[r],i=this.left[u];(null===t||u>t)&&(i&&r>0&&u>this.list[r-1]||!i&&r<a-1&&u>this.list[r+1])&&(t=u,n=r)}if(null===t)this.done=!0;else{var l=this.left[t]?n-1:n+1;this.list[n]=this.list[l],this.list[l]=t;for(r=0;r<a;++r)this.list[r]>t&&(this.left[this.list[r]]=!this.left[this.list[r]])}return e};var a={},r=n(3178);a.create=function(){var e=r.createHash("sha1");return{update:function(t){e.update(t,"utf8")},digest:function(){return e.digest("hex")}}},a.hash=function(e){for(var t=a.create(),n=0;n<e.length;++n)t.update(e[n]);return t.digest()},e.exports=function normalize(e){return(new Processor).normalize(e)}}}]);
//# sourceMappingURL=npm.rdf-normalize-420fe1901e13fbc9bf7c.js.map