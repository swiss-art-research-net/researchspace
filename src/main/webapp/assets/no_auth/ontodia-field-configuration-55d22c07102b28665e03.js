(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{1293:function(e,i,t){Object.defineProperty(i,"__esModule",{value:!0});var n=t(11),r=t(1),a=t(43),o=t(56),l=t(23),d=t(1237),s=t(1562),u=t(214),f=t(1751),c=function(e){function OntodiaFieldConfiguration(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(OntodiaFieldConfiguration,e),OntodiaFieldConfiguration.prototype.render=function(){return null},OntodiaFieldConfiguration}(o.Component);i.OntodiaFieldConfiguration=c,i.extractFieldConfiguration=function extractFieldConfiguration(e,i){return n.__awaiter(this,void 0,Promise,(function(){var t,o,c,p,g,h,y,v,b,F,w,C,m,I,_,M,O,S,j,q,R,T,k,x,D,P,z,A,B,E,J,L,G,V,H,K,N;return n.__generator(this,(function(Q){switch(Q.label){case 0:if(t=new Map,o=[],c=a.Map(),p=new Map,!e)return[2,{authoringMode:!1,enforceConstraints:!1,metadata:void 0,persistence:void 0,allFields:[],datatypeFields:p,inputOverrides:o}];if(g=e.typeIri,h=e.defaultLabelIri,y=e.defaultImageIri,v=e.defaultSubjectTemplate,b=e.allowRequestFields,F=void 0===b||b,w=e.fields,C=void 0===w?[]:w,m=e.forceDatatypeFields,I=void 0===m?[]:m,_=e.enforceConstraints,M=void 0!==_&&_,"string"!=typeof g)throw new Error("Missing 'typeIri' property for ontodia-field-configuration");for(O=r.Children.toArray(e.children).filter((function(e){return u.isValidChild(e)&&function isConfigurationItem(e){if("function"!=typeof e)return!1;return"function"==typeof e.configure}(e.type)})),S=[],j=new Set,q=0,R=C;q<R.length;q++)T=R[q],j.add(T.iri);j.has(g)||(j.add(g),S.push(l.Rdf.iri(g))),k=0,x=O,Q.label=1;case 1:return k<x.length?(K=x[k]).type.getRequiredFields?(D=0,[4,K.type.getRequiredFields(K.props,i)]):[3,5]:[3,6];case 2:P=Q.sent(),Q.label=3;case 3:if(!(D<P.length))return[3,5];if(z=P[D],j.has(z.value))return[3,4];j.add(z.value),S.push(z),Q.label=4;case 4:return D++,[3,3];case 5:return k++,[3,1];case 6:if(A=C,!(S.length>0))return[3,8];if(!F)throw new Error("Fetching following fields is disallowed by configuration:\n"+S.map((function(e){return e.toString()})).join(",\n"));return[4,f.observableToCancellablePromise(d.getGeneratedFieldDefinitions(S),i)];case 7:B=Q.sent(),A=A.concat(B),Q.label=8;case 8:for(c=a.Map(A.map((function(e){var i=s.normalizeFieldDefinition(e);return[(i=n.__assign(n.__assign({},i),{id:i.iri})).iri,i]}))),E=0,J=I;E<J.length;E++)L=J[E],p.set(L,c.get(L));G={fieldByIri:c,typeIri:g,defaultLabelIri:h,defaultImageIri:y,defaultSubjectTemplate:v,datatypeFields:I,cancellationToken:i,collectedMetadata:t,collectedInputOverrides:o},V=0,H=O,Q.label=9;case 9:return V<H.length?[4,(K=H[V]).type.configure(K.props,G)]:[3,12];case 10:Q.sent(),Q.label=11;case 11:return V++,[3,9];case 12:return N={authoringMode:!!e&&Boolean(e.authoringMode),enforceConstraints:M,metadata:t.size>0?t:void 0,persistence:e?e.persistence:void 0,allFields:c.valueSeq().toArray(),datatypeFields:p,inputOverrides:o},e.debug&&console.log("Ontodia field configuration:",N),[2,N]}}))}))},i.default=c}}]);
//# sourceMappingURL=ontodia-field-configuration-55d22c07102b28665e03.js.map