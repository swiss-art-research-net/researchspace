(window.webpackJsonp=window.webpackJsonp||[]).push([[333],{1393:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),r=a(1),s=a(72),i=a(19),o=a(16),c=a(33),l=a(1625),p=a(7),m=a(34),u=a(56),d=a(63),f=a(640),g=a(221),h=a(2243),N=a(1690),E=a(631),S=a(116),v=a(327),x=a(1395),y=function(e){function NamespaceManager(t,a){var n=e.call(this,t,a)||this;return n.cancellation=new m.Cancellation,n.onPrefixInput=function(e){n.setState({isLoading:!1,selectedPrefix:e.target.value.trim()})},n.onNamespaceInput=function(e){n.setState({isLoading:!1,selectedNamespace:e.target.value.trim()})},n.onSelectedAppChange=function(e){n.setState({selectedAppId:e})},n.onSetNamespace=function(e){e.stopPropagation(),e.preventDefault(),n.setState({isApplyingModifications:!0}),n.cancellation.map(g.setPrefix(n.state.selectedPrefix,n.state.selectedNamespace,n.state.selectedAppId)).observe({value:function(){return d.refresh()},error:function(e){return n.setState({isApplyingModifications:!1,modificationError:e})}})},n.state={isLoading:!0,selectedPrefix:"",selectedNamespace:""},n}return n.__extends(NamespaceManager,e),NamespaceManager.prototype.render=function(){return this.state.loadingError?r.createElement(S.ErrorNotification,{errorMessage:this.state.loadingError}):this.state.isLoading?r.createElement(v.Spinner,null):r.createElement("div",{className:x.component},this.getTable(),this.state.modificationError?r.createElement(E.Alert,{alert:E.AlertType.DANGER,message:""},r.createElement(S.ErrorPresenter,{error:this.state.modificationError})):null,this.getUpdatePanel())},NamespaceManager.prototype.componentDidMount=function(){var e=this;this.cancellation.map(i.combine({data:g.getNamespaceRecords(),appStatus:f.getStorageStatus()})).observe({value:function(t){var a=t.data,n=t.appStatus,r=h.chooseDefaultTargetApp(n);e.setState({isLoading:!1,data:a,appStatus:n,selectedAppId:r})},error:function(t){return e.setState({isLoading:!1,loadingError:t})}})},NamespaceManager.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},NamespaceManager.prototype.getTable=function(){var e,t=this,a=[{variableName:"prefix",displayName:"Prefix"},{variableName:"namespace",displayName:"Namespace"},{variableName:"appId",displayName:"Source App"},{displayName:"Actions",cellComponent:(e={onDelete:function(e){return t.deleteNamespace(e)}},function(t){function class_1(a,n){var r=t.call(this,a,n)||this;return r.onDeleteClick=function(){r.setState({confirm:!0})},r.onConfirm=function(){r.setState({confirm:!1});var t=r.props.rowData,a=e.onDelete;a(t)},r.onCancel=function(){r.setState({confirm:!1})},r.state={confirm:!1},r}return n.__extends(class_1,t),class_1.prototype.render=function(){var e=this.props.rowData;return g.isSystemNamespacePrefix(e.prefix)?null:this.state.confirm?r.createElement("div",null,'Delete prefix "',e.prefix,'"?',r.createElement("div",null,r.createElement(s.Button,{className:"btn-grey btn-danger",onClick:this.onConfirm},"Delete"),r.createElement(s.Button,{className:"btn-grey",onClick:this.onCancel},"Cancel"))):r.createElement(s.Button,{className:"btn-grey btn-danger",onClick:this.onDeleteClick},r.createElement("span",{className:"fa fa-trash-o"}),"Â Delete")},class_1}(u.Component))}],i=this.state.data.filter((function(e){return e.prefix.length>0})).map((function(e){return{prefix:e.prefix,namespace:e.iri,appId:e.appId}}));i=o.orderBy(i,[function(e){return e.prefix},function(e){return g.isSystemNamespacePrefix(e.prefix)?0:1}]);return r.createElement(N.Table,{numberOfDisplayedRows:c.Just(10),columnConfiguration:a,data:l.Left(i),layout:c.Just({options:{resultsPerPage:20},tupleTemplate:c.Nothing()})})},NamespaceManager.prototype.getUpdatePanel=function(){return this.state.isApplyingModifications?r.createElement(v.Spinner,null):r.createElement("div",{className:p(x.updatePanel,"row")},r.createElement("div",{className:"col-xs-1 px-0"},r.createElement(s.FormControl,{type:"text",placeholder:"Prefix",value:this.state.selectedPrefix,onChange:this.onPrefixInput})),r.createElement("div",{className:"col-xs-5"},r.createElement(s.FormControl,{type:"text",placeholder:"Namespace",value:this.state.selectedNamespace,onChange:this.onNamespaceInput})),r.createElement("div",{className:p(x.updatePanel_submit,"col-xs-6")},r.createElement(h.StorageSelector,{allApps:this.state.appStatus,sourceApps:[],targetApp:this.state.selectedAppId,onChange:this.onSelectedAppChange}),r.createElement(s.ButtonToolbar,null,r.createElement(s.Button,{type:"submit",bsSize:"small",bsStyle:"primary",onClick:this.onSetNamespace,disabled:!(this.state.selectedPrefix&&this.state.selectedNamespace&&this.state.selectedAppId)},"Set Namespace"))))},NamespaceManager.prototype.deleteNamespace=function(e){var t=this;this.setState({isApplyingModifications:!0}),this.cancellation.map(g.deletePrefix(e.prefix,e.appId)).observe({value:function(){return d.refresh()},error:function(e){return t.setState({isApplyingModifications:!1,modificationError:e})}})},NamespaceManager}(u.Component);t.NamespaceManager=y,t.default=y}}]);
//# sourceMappingURL=mp-admin-namespace-manager-a34a083b65ae227a66d6.js.map