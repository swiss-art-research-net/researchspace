{"version":3,"sources":["webpack:///./node_modules/rc-align/es/index.js","webpack:///./node_modules/rc-align/es/Align.js","webpack:///./node_modules/rc-align/es/util.js"],"names":["getElement","func","getPoint","point","Align","_Component","_ref","_temp","_this","_ret","this","_len","arguments","length","args","Array","_key","__proto__","Object","getPrototypeOf","call","apply","concat","forceAlign","_this$props","props","disabled","target","align","onAlign","source","findDOMNode","result","element","activeElement","document","key","value","componentDidMount","monitorWindowResize","startMonitorWindowResize","componentDidUpdate","prevProps","reAlign","sourceRect","getBoundingClientRect","lastElement","currentElement","lastPoint","currentPoint","preRect","width","height","stopMonitorWindowResize","componentWillUnmount","resizeHandler","bufferMonitor","monitorBufferTime","window","clear","remove","render","_this2","_props","childrenProps","children","child","Children","only","newProps","keys","forEach","prop","cloneElement","propTypes","object","isRequired","oneOfType","shape","clientX","number","clientY","pageX","pageY","bool","any","defaultProps","buffer","fn","ms","timer","clearTimeout","bufferFn","setTimeout","isSamePoint","prev","next","isWindow","obj","isSimilarValue","val1","val2","int1","Math","floor","int2","abs","restoreFocus","container","focus"],"mappings":"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","file":"npm.rc-align-6589a0a6bf97c30c28e6.js","sourcesContent":["// export this package's api\nimport Align from './Align';\n\nexport default Align;","import _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from 'rc-util/es/Dom/addEventListener';\n\nimport { isWindow, buffer, isSamePoint, isSimilarValue, restoreFocus } from './util';\n\nfunction getElement(func) {\n  if (typeof func !== 'function' || !func) return null;\n  return func();\n}\n\nfunction getPoint(point) {\n  if (typeof point !== 'object' || !point) return null;\n  return point;\n}\n\nvar Align = function (_Component) {\n  _inherits(Align, _Component);\n\n  function Align() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Align);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Align.__proto__ || Object.getPrototypeOf(Align)).call.apply(_ref, [this].concat(args))), _this), _this.forceAlign = function () {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          target = _this$props.target,\n          align = _this$props.align,\n          onAlign = _this$props.onAlign;\n\n      if (!disabled && target) {\n        var source = ReactDOM.findDOMNode(_this);\n\n        var result = void 0;\n        var element = getElement(target);\n        var point = getPoint(target);\n\n        // IE lose focus after element realign\n        // We should record activeElement and restore later\n        var activeElement = document.activeElement;\n\n        if (element) {\n          result = alignElement(source, element, align);\n        } else if (point) {\n          result = alignPoint(source, point, align);\n        }\n\n        restoreFocus(activeElement, source);\n\n        if (onAlign) {\n          onAlign(source, result);\n        }\n      }\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Align, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var props = this.props;\n      // if parent ref not attached .... use document.getElementById\n      this.forceAlign();\n      if (!props.disabled && props.monitorWindowResize) {\n        this.startMonitorWindowResize();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var reAlign = false;\n      var props = this.props;\n\n      if (!props.disabled) {\n        var source = ReactDOM.findDOMNode(this);\n        var sourceRect = source ? source.getBoundingClientRect() : null;\n\n        if (prevProps.disabled) {\n          reAlign = true;\n        } else {\n          var lastElement = getElement(prevProps.target);\n          var currentElement = getElement(props.target);\n          var lastPoint = getPoint(prevProps.target);\n          var currentPoint = getPoint(props.target);\n\n          if (isWindow(lastElement) && isWindow(currentElement)) {\n            // Skip if is window\n            reAlign = false;\n          } else if (lastElement !== currentElement || // Element change\n          lastElement && !currentElement && currentPoint || // Change from element to point\n          lastPoint && currentPoint && currentElement || // Change from point to element\n          currentPoint && !isSamePoint(lastPoint, currentPoint)) {\n            reAlign = true;\n          }\n\n          // If source element size changed\n          var preRect = this.sourceRect || {};\n          if (!reAlign && source && (!isSimilarValue(preRect.width, sourceRect.width) || !isSimilarValue(preRect.height, sourceRect.height))) {\n            reAlign = true;\n          }\n        }\n\n        this.sourceRect = sourceRect;\n      }\n\n      if (reAlign) {\n        this.forceAlign();\n      }\n\n      if (props.monitorWindowResize && !props.disabled) {\n        this.startMonitorWindowResize();\n      } else {\n        this.stopMonitorWindowResize();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.stopMonitorWindowResize();\n    }\n  }, {\n    key: 'startMonitorWindowResize',\n    value: function startMonitorWindowResize() {\n      if (!this.resizeHandler) {\n        this.bufferMonitor = buffer(this.forceAlign, this.props.monitorBufferTime);\n        this.resizeHandler = addEventListener(window, 'resize', this.bufferMonitor);\n      }\n    }\n  }, {\n    key: 'stopMonitorWindowResize',\n    value: function stopMonitorWindowResize() {\n      if (this.resizeHandler) {\n        this.bufferMonitor.clear();\n        this.resizeHandler.remove();\n        this.resizeHandler = null;\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          childrenProps = _props.childrenProps,\n          children = _props.children;\n\n      var child = React.Children.only(children);\n      if (childrenProps) {\n        var newProps = {};\n        var propList = Object.keys(childrenProps);\n        propList.forEach(function (prop) {\n          newProps[prop] = _this2.props[childrenProps[prop]];\n        });\n\n        return React.cloneElement(child, newProps);\n      }\n      return child;\n    }\n  }]);\n\n  return Align;\n}(Component);\n\nAlign.propTypes = {\n  childrenProps: PropTypes.object,\n  align: PropTypes.object.isRequired,\n  target: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    clientX: PropTypes.number,\n    clientY: PropTypes.number,\n    pageX: PropTypes.number,\n    pageY: PropTypes.number\n  })]),\n  onAlign: PropTypes.func,\n  monitorBufferTime: PropTypes.number,\n  monitorWindowResize: PropTypes.bool,\n  disabled: PropTypes.bool,\n  children: PropTypes.any\n};\nAlign.defaultProps = {\n  target: function target() {\n    return window;\n  },\n  monitorBufferTime: 50,\n  monitorWindowResize: false,\n  disabled: false\n};\n\n\nexport default Align;","import contains from 'rc-util/es/Dom/contains';\n\nexport function buffer(fn, ms) {\n  var timer = void 0;\n\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  }\n\n  function bufferFn() {\n    clear();\n    timer = setTimeout(fn, ms);\n  }\n\n  bufferFn.clear = clear;\n\n  return bufferFn;\n}\n\nexport function isSamePoint(prev, next) {\n  if (prev === next) return true;\n  if (!prev || !next) return false;\n\n  if ('pageX' in next && 'pageY' in next) {\n    return prev.pageX === next.pageX && prev.pageY === next.pageY;\n  }\n\n  if ('clientX' in next && 'clientY' in next) {\n    return prev.clientX === next.clientX && prev.clientY === next.clientY;\n  }\n\n  return false;\n}\n\nexport function isWindow(obj) {\n  return obj && typeof obj === 'object' && obj.window === obj;\n}\n\nexport function isSimilarValue(val1, val2) {\n  var int1 = Math.floor(val1);\n  var int2 = Math.floor(val2);\n  return Math.abs(int1 - int2) <= 1;\n}\n\nexport function restoreFocus(activeElement, container) {\n  // Focus back if is in the container\n  if (activeElement !== document.activeElement && contains(container, activeElement)) {\n    activeElement.focus();\n  }\n}"],"sourceRoot":""}