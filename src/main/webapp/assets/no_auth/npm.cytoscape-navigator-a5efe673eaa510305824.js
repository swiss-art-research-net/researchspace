(window.webpackJsonp=window.webpackJsonp||[]).push([[393],{2922:function(t,i,e){(function(o,n){var s;!function(){"use strict";var h,a,r,v={container:!1,viewLiveFramerate:0,dblClickDelay:200,removeCustomContainer:!0,rerenderDelay:500},l=(a=Math.max,r=Date.now||function(){return(new Date).getTime()},function l(t,i,e){var o,n,s,h,v,l,u,f=0,p=!1,c=!0;if("function"!=typeof t)throw new TypeError("Expected a function");if(i=i<0?0:+i||0,!0===e){var m=!0;c=!1}else(function isObject(t){var i=typeof t;return!!t&&("object"==i||"function"==i)})(e)&&(m=!!e.leading,p="maxWait"in e&&a(+e.maxWait||0,i),c="trailing"in e?!!e.trailing:c);function complete(i,e){e&&clearTimeout(e),n=l=u=void 0,i&&(f=r(),s=t.apply(v,o),l||n||(o=v=void 0))}function delayed(){var t=i-(r()-h);t<=0||t>i?complete(u,n):l=setTimeout(delayed,t)}function maxDelayed(){complete(c,l)}function debounced(){if(o=arguments,h=r(),v=this,u=c&&(l||!m),!1===p)var e=m&&!l;else{n||m||(f=h);var a=p-(h-f),d=a<=0||a>p;d?(n&&(n=clearTimeout(n)),f=h,s=t.apply(v,o)):n||(n=setTimeout(maxDelayed,a))}return d&&l?l=clearTimeout(l):l||i===p||(l=setTimeout(delayed,i)),e&&(d=!0,s=t.apply(v,o)),!d||l||n||(o=v=void 0),s}return debounced.cancel=function cancel(){l&&clearTimeout(l),n&&clearTimeout(n),f=0,n=l=u=void 0},debounced}),Navigator=function(t,i){this._init(t,i)};Navigator.prototype={constructor:Navigator,bb:function(){var t=this.cy.elements().boundingBox();return 0===t.w||0===t.h?{x1:0,x2:1/0,y1:0,y2:1/0,w:1/0,h:1/0}:t},_init:function(t,i){this.$element=h(t.container()),this.options=h.extend({},v,i),this.cy=t,this.boundingBox=this.bb(),this.width=this.$element.width(),this.height=this.$element.height(),this._initPanel(),this._initThumbnail(),this._initView(),this._initOverlay()},destroy:function(){this._removeEventsHandling(),this.options.container&&!this.options.removeCustomContainer?this.$panel.empty():this.$panel.remove(),this.$element.removeData("navigator")},_initPanel:function(){var t=this.options;if(t.container)if(t.container instanceof o){if(!(t.container.length>0))return void h.error("Container for jquery.cyNavigator is empty");this.$panel=t.container.first()}else{if(!(h(t.container).length>0))return void h.error("There is no any element matching your selector for jquery.cyNavigator");this.$panel=h(t.container).first()}else this.$panel=h('<div class="cytoscape-navigator"/>'),h("body").append(this.$panel);this._setupPanel(),this.cy.on("resize",h.proxy(this.resize,this))},_setupPanel:function(){this.options;this.panelWidth=this.$panel.width(),this.panelHeight=this.$panel.height()},_initThumbnail:function(){this.$thumbnail=h("<img/>"),this.$panel.append(this.$thumbnail),this._setupThumbnailSizes(),this._setupThumbnail()},_setupThumbnail:function(){this._updateThumbnailImage()},_setupThumbnailSizes:function(){this.boundingBox=this.bb(),this.thumbnailZoom=Math.min(this.panelHeight/this.boundingBox.h,this.panelWidth/this.boundingBox.w),this.thumbnailPan={x:(this.panelWidth-this.thumbnailZoom*(this.boundingBox.x1+this.boundingBox.x2))/2,y:(this.panelHeight-this.thumbnailZoom*(this.boundingBox.y1+this.boundingBox.y2))/2}},_checkThumbnailSizesAndUpdate:function(){var t=this.thumbnailZoom,i=this.thumbnailPan.x,e=this.thumbnailPan.y;this._setupThumbnailSizes(),t!=this.thumbnailZoom||i!=this.thumbnailPan.x||e!=this.thumbnailPan.y?(this._setupThumbnail(),this._setupView()):this._updateThumbnailImage()},_initView:function(){this.$view=h('<div class="cytoscape-navigatorView"/>'),this.$panel.append(this.$view),this.viewBorderTop=parseInt(this.$view.css("border-top-width"),10),this.viewBorderRight=parseInt(this.$view.css("border-right-width"),10),this.viewBorderBottom=parseInt(this.$view.css("border-bottom-width"),10),this.viewBorderLeft=parseInt(this.$view.css("border-left-width"),10),this.viewBorderHorizontal=this.viewBorderLeft+this.viewBorderRight,this.viewBorderVertical=this.viewBorderTop+this.viewBorderBottom,this._setupView(),this.cy.on("zoom pan",h.proxy(this._setupView,this))},_setupView:function(){if(!this.viewLocked){var t=this.cy.zoom(),i=this.cy.pan();this.viewW=this.width/t*this.thumbnailZoom,this.viewX=-i.x*this.viewW/this.width+this.thumbnailPan.x-this.viewBorderLeft,this.viewH=this.height/t*this.thumbnailZoom,this.viewY=-i.y*this.viewH/this.height+this.thumbnailPan.y-this.viewBorderTop,this.$view.width(this.viewW).height(this.viewH).css({position:"absolute",left:this.viewX,top:this.viewY})}},_initOverlay:function(){this.$overlay=h('<div class="cytoscape-navigatorOverlay"/>'),this.$panel.append(this.$overlay),this.overlayHookPointX=0,this.overlayHookPointY=0,this._initEventsHandling()},resize:function(){this.width=this.$element.width(),this.height=this.$element.height(),this._thumbnailSetup=!1,this._setupPanel(),this._checkThumbnailSizesAndUpdate(),this._setupView()},_initEventsHandling:function(){var t,i,e=this,o=["mousedown","mousewheel","DOMMouseScroll","touchstart"],n=["mouseup","mouseout","mousemove","touchmove","touchend"];this.$overlay.on(o.join(" "),t=function(t){if("touchstart"==t.type&&(t.offsetX=e.viewX+e.viewW/2,t.offsetY=e.viewY+e.viewH/2),void 0===t.offsetX||void 0===t.offsetY){var i=h(t.target).offset();t.offsetX=t.pageX-i.left,t.offsetY=t.pageY-i.top}return"mousedown"==t.type||"touchstart"==t.type?e._eventMoveStart(t):"mousewheel"!=t.type&&"DOMMouseScroll"!=t.type||e._eventZoom(t),!1}),h(window).on(n.join(" "),i=function(t){if(e.overlayInMovement){if("touchend"==t.type?(t.offsetX=e.viewX+e.viewW/2,t.offsetY=e.viewY+e.viewH/2):"touchmove"==t.type&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),void 0===t.offsetX||void 0===t.offsetY){var i=h(t.target).offset();t.offsetX=t.pageX-i.left,t.offsetY=t.pageY-i.top}if(t.target!==e.$overlay[0]){i=h(t.target).offset();var o=e.$overlay.offset();t.offsetX=t.offsetX-o.left+i.left,t.offsetY=t.offsetY-o.top+i.top}return"mousemove"==t.type||"touchmove"==t.type?e._eventMove(t):"mouseup"!=t.type&&"touchend"!=t.type||e._eventMoveEnd(t),!1}}),this._removeEventsHandling=function(){this.$overlay.off(o.join(" "),t),h(window).off(n.join(" "),i)}},_eventMoveStart:function(t){var i=(new Date).getTime();this.overlayLastMoveStartTime&&this.overlayLastMoveStartTime+this.options.dblClickDelay>i?(this.overlayLastMoveStartTime=0,this.overlayInMovement=!0,this.overlayHookPointX=this.viewW/2,this.overlayHookPointY=this.viewH/2,!1!==this.options.viewLiveFramerate?this._eventMove({offsetX:this.panelWidth/2,offsetY:this.panelHeight/2}):this._eventMoveEnd({offsetX:this.panelWidth/2,offsetY:this.panelHeight/2}),this.overlayInMovement=!1):(this.overlayLastMoveStartTime=i,this.overlayInMovement=!0,this.viewLocked=!0,t.offsetX>=this.viewX&&t.offsetX<=this.viewX+this.viewW&&t.offsetY>=this.viewY&&t.offsetY<=this.viewY+this.viewH?(this.overlayHookPointX=t.offsetX-this.viewX,this.overlayHookPointY=t.offsetY-this.viewY):(this.overlayHookPointX=this.viewW/2,this.overlayHookPointY=this.viewH/2,this._eventMove(t)))},_eventMove:function(t){var i=this;this._checkMousePosition(t),this.overlayInMovement&&(this.viewX=t.offsetX-this.overlayHookPointX,this.viewY=t.offsetY-this.overlayHookPointY,this.$view.css("left",this.viewX),this.$view.css("top",this.viewY),!1!==this.options.viewLiveFramerate&&(0==this.options.viewLiveFramerate?this._moveCy():this.overlayTimeout||(this.overlayTimeout=setTimeout((function(){i._moveCy(),i.overlayTimeout=!1}),1e3/this.options.viewLiveFramerate))))},_checkMousePosition:function(t){t.offsetX>this.viewX&&t.offsetX<this.viewX+this.viewBorderHorizontal+this.viewW&&t.offsetY>this.viewY&&t.offsetY<this.viewY+this.viewBorderVertical+this.viewH?this.$panel.addClass("mouseover-view"):this.$panel.removeClass("mouseover-view")},_eventMoveEnd:function(t){this.viewLocked=!1,this.$panel.removeClass("mouseover-view"),this.overlayInMovement&&(this._eventMove(t),!1===this.options.viewLiveFramerate&&this._moveCy(),this.overlayInMovement=!1)},_eventZoom:function(t){var i=Math.pow(10,t.originalEvent.wheelDeltaY/1e3||t.originalEvent.wheelDelta/1e3||t.originalEvent.detail/-32),e={left:t.offsetX,top:t.offsetY};this.cy.zoomingEnabled()&&this._zoomCy(i,e)},_updateThumbnailImage:function(){var t=this;if(!this._thumbnailUpdating){this._thumbnailUpdating=!0;var i,e,o,n,s;this.cy.onRender((i=function(){t._checkThumbnailSizesAndUpdate(),t._setupView();var i=t.$thumbnail,e=i[0],o=t.panelWidth,n=t.panelHeight,s=t.boundingBox,h=Math.min(o/s.w,n/s.h),a=(o-h*s.w)/2,r=(n-h*s.h)/2,v=t.cy.png({full:!0,scale:h});v.indexOf("image/png")<0?e.removeAttribute("src"):e.setAttribute("src",v),i.css({position:"absolute",left:a+"px",top:r+"px"})},e=t.options.rerenderDelay,n=!0,s=!0,!1===o?n=!1:typeof o==typeof{}&&(n="leading"in o?o.leading:n,s="trailing"in o?o.trailing:s),(o=o||{}).leading=n,o.maxWait=e,o.trailing=s,l(i,e,o)))}},_moveCy:function(){this.cy.pan({x:-(this.viewX+this.viewBorderLeft-this.thumbnailPan.x)*this.width/this.viewW,y:-(this.viewY+this.viewBorderLeft-this.thumbnailPan.y)*this.height/this.viewH})},_zoomCy:function(t,i){var e;e={x:this.width/2,y:this.height/2},this.cy.zoom({level:this.cy.zoom()*t,renderedPosition:e})}};var register=function(t,i){t&&i&&(h=i,t("core","navigator",(function(t){return new Navigator(this,t)})))};t.exports&&(t.exports=register),void 0===(s=function(){return register}.call(i,e,i,t))||(t.exports=s),void 0!==n&&void 0!==o&&register(n,o)}()}).call(this,e(1733),e(1734))}}]);
//# sourceMappingURL=npm.cytoscape-navigator-a5efe673eaa510305824.js.map