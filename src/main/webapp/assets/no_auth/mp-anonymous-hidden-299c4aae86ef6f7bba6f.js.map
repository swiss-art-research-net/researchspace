{"version":3,"sources":["webpack:///./src/main/web/components/security/AnonymousHidden.ts"],"names":["props","context","state","isAnonymous","componentDidMount","b","setState","render","_","isUndefined","this","alt","createElement","TemplateItem","template","source","Children","only","children","Component","AnonymousHiddenComponentClass","component","factory","createFactory"],"mappings":"6IAmBA,OAEA,QAEA,QACA,SACA,SAaA,cACE,uCAAYA,EAAOC,GAAnB,MACE,YAAMD,EAAOC,IAAQ,K,OACrB,EAAKC,MAAQ,CACXC,YAAa,M,EAkBnB,OAtBmD,6CAQjD,wCAAAC,kBAAA,sBACE,OAASD,aAAY,SAACE,GAAM,SAAKC,SAAS,CAAEH,YAAaE,QAG3D,wCAAAE,OAAA,WACU,IAAAJ,EAAA,WAAAA,YACR,OAAIA,IAAgBK,EAAEC,YAAYC,KAAKV,MAAMW,KACpC,EAAAC,cAAc,EAAAC,aAAc,CAAEC,SAAU,CAAEC,OAAQL,KAAKV,MAAMW,QAC3C,IAAhBR,EACF,EAAAa,SAASC,KAAKP,KAAKV,MAAMkB,UAEzB,MAGb,8BAtBA,CAAmD,EAAAC,WAAtC,EAAAC,gCAyBA,EAAAC,UAAYD,EACZ,EAAAE,QAAU,EAAAC,cAAc,EAAAF,WACrC,UAAe,EAAAA","file":"mp-anonymous-hidden-299c4aae86ef6f7bba6f.js","sourcesContent":["/**\n * ResearchSpace\n * Copyright (C) 2020, Â© Trustees of the British Museum\n * Copyright (C) 2015-2019, metaphacts GmbH\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { createFactory, createElement, Props as ReactProps, Children } from 'react';\n\nimport * as _ from 'lodash';\n\nimport { Component } from 'platform/api/components';\nimport { TemplateItem } from 'platform/components/ui/template';\nimport { Util as Security } from 'platform/api/services/security';\n\ninterface Props extends ReactProps<AnonymousHiddenComponentClass> {\n  alt?: string;\n}\n\n/**\n * Usage example:\n * <mp-anonymous-hidden><b>Text not to be shown to anonymous user</b></mp-anonymous-hidden>\n * <mp-anonymous-hidden alt=\"No permission.\">\n *    <b>Text not to be shown to anonymous user</b>\n * </mp-anonymous-hidden>\n */\nexport class AnonymousHiddenComponentClass extends Component<Props, { isAnonymous: boolean }> {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      isAnonymous: null,\n    };\n  }\n\n  componentDidMount() {\n    Security.isAnonymous((b) => this.setState({ isAnonymous: b }));\n  }\n\n  render() {\n    const { isAnonymous } = this.state;\n    if (isAnonymous && !_.isUndefined(this.props.alt)) {\n      return createElement(TemplateItem, { template: { source: this.props.alt } });\n    } else if (isAnonymous === false) {\n      return Children.only(this.props.children);\n    } else {\n      return null;\n    }\n  }\n}\n\nexport type component = AnonymousHiddenComponentClass;\nexport const component = AnonymousHiddenComponentClass;\nexport const factory = createFactory(component);\nexport default component;\n"],"sourceRoot":""}